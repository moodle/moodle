/*
YUI 3.6.0 (build 5521)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("graphics-svg",function(b){var i="svgShape",c=b.Lang,g=b.AttributeLite,d,m,f,h,l,e,j,n=b.config.doc,k=b.ClassNameManager.getClassName;function a(){}a.prototype={_currentX:0,_currentY:0,_type:"path",curveTo:function(s,q,E,D,A,z){var p,u,B,t,F,C,r,o,v;this._pathArray=this._pathArray||[];if(this._pathType!=="C"){this._pathType="C";u=["C"];this._pathArray.push(u);}else{u=this._pathArray[Math.max(0,this._pathArray.length-1)];if(!u){u=[];this._pathArray.push(u);}}p=this._pathArray.length-1;this._pathArray[p]=this._pathArray[p].concat([Math.round(s),Math.round(q),Math.round(E),Math.round(D),A,z]);C=Math.max(A,Math.max(s,E));o=Math.max(z,Math.max(q,D));r=Math.min(A,Math.min(s,E));v=Math.min(z,Math.min(q,D));B=Math.abs(C-r);t=Math.abs(o-v);F=[[this._currentX,this._currentY],[s,q],[E,D],[A,z]];this._setCurveBoundingBox(F,B,t);this._currentX=A;this._currentY=z;},quadraticCurveTo:function(s,r,A,z){var p,u,B,t,D,C,q,o,v;if(this._pathType!=="Q"){this._pathType="Q";u=["Q"];this._pathArray.push(u);}else{u=this._pathArray[Math.max(0,this._pathArray.length-1)];if(!u){u=[];this._pathArray.push(u);}}p=this._pathArray.length-1;this._pathArray[p]=this._pathArray[p].concat([Math.round(s),Math.round(r),Math.round(A),Math.round(z)]);C=Math.max(A,s);o=Math.max(z,r);q=Math.min(A,s);v=Math.min(z,r);B=Math.abs(C-q);t=Math.abs(o-v);D=[[this._currentX,this._currentY],[s,r],[A,z]];this._setCurveBoundingBox(D,B,t);this._currentX=A;this._currentY=z;},drawRect:function(o,r,p,q){this.moveTo(o,r);this.lineTo(o+p,r);this.lineTo(o+p,r+q);this.lineTo(o,r+q);this.lineTo(o,r);},drawRoundRect:function(o,t,p,r,q,s){this.moveTo(o,t+s);this.lineTo(o,t+r-s);this.quadraticCurveTo(o,t+r,o+q,t+r);this.lineTo(o+p-q,t+r);this.quadraticCurveTo(o+p,t+r,o+p,t+r-s);this.lineTo(o+p,t+s);this.quadraticCurveTo(o+p,t,o+p-q,t);this.lineTo(o+q,t);this.quadraticCurveTo(o,t,o,t+s);},drawCircle:function(p,r,o){var q=o*2;this._drawingComplete=false;this._trackSize(p,r);this._trackSize(p+q,r+q);this._pathArray=this._pathArray||[];this._pathArray.push(["M",p+o,r]);this._pathArray.push(["A",o,o,0,1,0,p+o,r+q]);this._pathArray.push(["A",o,o,0,1,0,p+o,r]);this._currentX=p;this._currentY=r;return this;},drawEllipse:function(q,t,r,s){var p=r*0.5,o=s*0.5;this._drawingComplete=false;this._trackSize(q,t);this._trackSize(q+r,t+s);this._pathArray=this._pathArray||[];this._pathArray.push(["M",q+p,t]);this._pathArray.push(["A",p,o,0,1,0,q+p,t+s]);this._pathArray.push(["A",p,o,0,1,0,q+p,t]);this._currentX=q;this._currentY=t;return this;},drawDiamond:function(p,t,s,o){var r=s*0.5,q=o*0.5;this.moveTo(p+r,t);this.lineTo(p+s,t+q);this.lineTo(p+r,t+o);this.lineTo(p,t+q);this.lineTo(p+r,t);return this;},drawWedge:function(B,w,G,v,r,s){var F,E,u,K,t,C,A,J,I,q,p,H=0,z=r*2,o,D;s=s||r;if(this._pathType!="M"){this._pathType="M";o=["M"];this._pathArray.push(o);}else{o=this._getCurrentArray();}D=this._pathArray.length-1;this._pathArray[D].push(B);this._pathArray[D].push(B);if(Math.abs(v)>360){v=360;}F=Math.ceil(Math.abs(v)/45);E=v/F;u=-(E/180)*Math.PI;K=(G/180)*Math.PI;if(F>0){C=B+Math.cos(G/180*Math.PI)*r;A=w+Math.sin(G/180*Math.PI)*s;this._pathType="L";D++;this._pathArray[D]=["L"];this._pathArray[D].push(Math.round(C));this._pathArray[D].push(Math.round(A));D++;this._pathType="Q";this._pathArray[D]=["Q"];for(;H<F;++H){K+=u;t=K-(u/2);J=B+Math.cos(K)*r;I=w+Math.sin(K)*s;q=B+Math.cos(t)*(r/Math.cos(u/2));p=w+Math.sin(t)*(s/Math.cos(u/2));this._pathArray[D].push(Math.round(q));this._pathArray[D].push(Math.round(p));this._pathArray[D].push(Math.round(J));this._pathArray[D].push(Math.round(I));}}this._currentX=B;this._currentY=w;this._trackSize(z,z);return this;},lineTo:function(t,s,q){var p=arguments,r,o,v,u;this._pathArray=this._pathArray||[];if(typeof t==="string"||typeof t==="number"){p=[[t,s]];}o=p.length;this._shapeType="path";if(this._pathType!=="L"){this._pathType="L";u=["L"];this._pathArray.push(u);}else{u=this._getCurrentArray();}v=this._pathArray.length-1;for(r=0;r<o;++r){this._pathArray[v].push(p[r][0]);this._pathArray[v].push(p[r][1]);this._currentX=p[r][0];this._currentY=p[r][1];this._trackSize.apply(this,p[r]);}},moveTo:function(o,r){var q,p;this._pathArray=this._pathArray||[];this._pathType="M";p=["M"];this._pathArray.push(p);q=this._pathArray.length-1;this._pathArray[q]=this._pathArray[q].concat([o,r]);this._currentX=o;this._currentY=r;this._trackSize(o,r);},end:function(){this._closePath();this._graphic.addToRedrawQueue(this);},clear:function(){this._currentX=0;this._currentY=0;this._width=0;this._height=0;this._left=0;this._right=0;this._top=0;this._bottom=0;this._pathArray=[];this._path="";},_closePath:function(){var p,t,o,w,q,v,u,z="",s=this.node,r=this._left,x=this._top,y=this.get("fill");if(this._pathArray){p=this._pathArray.concat();while(p&&p.length>0){t=p.shift();w=t.length;o=t[0];if(o==="A"){z+=o+t[1]+","+t[2];}else{if(o!="z"){z+=" "+o+(t[1]-r);}else{z+=" z ";}}switch(o){case"L":case"M":case"Q":for(u=2;u<w;++u){q=(u%2===0)?x:r;q=t[u]-q;z+=", "+q;}break;case"A":q=" "+t[3]+" "+t[4];q+=","+t[5]+" "+(t[6]-r);q+=","+(t[7]-x);z+=" "+q;break;case"C":for(u=2;u<w;++u){q=(u%2===0)?x:r;v=t[u];v-=q;z+=" "+v;}break;}}if(y&&y.color){z+="z";}if(z){s.setAttribute("d",z);}this._path=z;this._fillChangeHandler();this._strokeChangeHandler();this._updateTransform();}},closePath:function(){this._pathArray.push(["z"]);},_getCurrentArray:function(){var o=this._pathArray[Math.max(0,this._pathArray.length-1)];if(!o){o=[];this._pathArray.push(o);}return o;},getBezierData:function(s,r){var u=s.length,q=[],p,o;for(p=0;p<u;++p){q[p]=[s[p][0],s[p][1]];}for(o=1;o<u;++o){for(p=0;p<u-o;++p){q[p][0]=(1-r)*q[p][0]+r*q[parseInt(p+1,10)][0];q[p][1]=(1-r)*q[p][1]+r*q[parseInt(p+1,10)][1];}}return[q[0][0],q[0][1]];},_setCurveBoundingBox:function(A,v,r){var q=0,p=this._currentX,x=p,u=this._currentY,o=u,s=Math.round(Math.sqrt((v*v)+(r*r))),y=1/s,z;for(;q<s;++q){z=this.getBezierData(A,y*q);p=isNaN(p)?z[0]:Math.min(z[0],p);x=isNaN(x)?z[0]:Math.max(z[0],x);u=isNaN(u)?z[1]:Math.min(z[1],u);o=isNaN(o)?z[1]:Math.max(z[1],o);
}p=Math.round(p*10)/10;x=Math.round(x*10)/10;u=Math.round(u*10)/10;o=Math.round(o*10)/10;this._trackSize(x,o);this._trackSize(p,u);},_trackSize:function(o,p){if(o>this._right){this._right=o;}if(o<this._left){this._left=o;}if(p<this._top){this._top=p;}if(p>this._bottom){this._bottom=p;}this._width=this._right-this._left;this._height=this._bottom-this._top;}};b.SVGDrawing=a;m=function(o){this._transforms=[];this.matrix=new b.Matrix();this._normalizedMatrix=new b.Matrix();m.superclass.constructor.apply(this,arguments);};m.NAME="svgShape";b.extend(m,b.GraphicBase,b.mix({_x:0,_y:0,init:function(){this.initializer.apply(this,arguments);},initializer:function(o){var p=this,q=o.graphic;p.createNode();if(q){p._setGraphic(q);}p._updateHandler();},_setGraphic:function(o){var p;if(o instanceof b.SVGGraphic){this._graphic=o;}else{o=b.one(o);p=new b.SVGGraphic({render:o});p._appendShape(this);this._graphic=p;}},addClass:function(o){var p=this.node;p.className.baseVal=c.trim([p.className.baseVal,o].join(" "));},removeClass:function(o){var p=this.node,q=p.className.baseVal;q=q.replace(new RegExp(o+" "),o).replace(new RegExp(o),"");p.className.baseVal=q;},getXY:function(){var r=this._graphic,p=r.getXY(),o=this._x,q=this._y;return[p[0]+o,p[1]+q];},setXY:function(p){var q=this._graphic,o=q.getXY();this._x=p[0]-o[0];this._y=p[1]-o[1];this.set("transform",this.get("transform"));},contains:function(o){return o===b.one(this.node);},compareTo:function(o){var p=this.node;return p===o;},test:function(o){return b.Selector.test(this.node,o);},_getDefaultFill:function(){return{type:"solid",opacity:1,cx:0.5,cy:0.5,fx:0.5,fy:0.5,r:0.5};},_getDefaultStroke:function(){return{weight:1,dashstyle:"none",color:"#000",opacity:1};},createNode:function(){var o=n.createElementNS("http://www.w3.org/2000/svg","svg:"+this._type),q=this.get("id"),p=this.get("pointerEvents");this.node=o;this.addClass(k(i)+" "+k(this.name));if(q){o.setAttribute("id",q);}if(p){o.setAttribute("pointer-events",p);}if(!this.get("visible")){b.one(o).setStyle("visibility","hidden");}},on:function(p,o){if(b.Node.DOM_EVENTS[p]){return b.one("#"+this.get("id")).on(p,o);}return b.on.apply(this,arguments);},_strokeChangeHandler:function(t){var r=this.node,s=this.get("stroke"),q,o,u,p;if(s&&s.weight&&s.weight>0){p=s.linejoin||"round";q=parseFloat(s.opacity);o=s.dashstyle||"none";u=c.isArray(o)?o.toString():o;s.color=s.color||"#000000";s.weight=s.weight||1;s.opacity=c.isNumber(q)?q:1;s.linecap=s.linecap||"butt";r.setAttribute("stroke-dasharray",u);r.setAttribute("stroke",s.color);r.setAttribute("stroke-linecap",s.linecap);r.setAttribute("stroke-width",s.weight);r.setAttribute("stroke-opacity",s.opacity);if(p=="round"||p=="bevel"){r.setAttribute("stroke-linejoin",p);}else{p=parseInt(p,10);if(c.isNumber(p)){r.setAttribute("stroke-miterlimit",Math.max(p,1));r.setAttribute("stroke-linejoin","miter");}}}else{r.setAttribute("stroke","none");}},_fillChangeHandler:function(s){var q=this.node,r=this.get("fill"),o,p;if(r){p=r.type;if(p=="linear"||p=="radial"){this._setGradientFill(r);q.setAttribute("fill","url(#grad"+this.get("id")+")");}else{if(!r.color){q.setAttribute("fill","none");}else{o=parseFloat(r.opacity);o=c.isNumber(o)?o:1;q.setAttribute("fill",r.color);q.setAttribute("fill-opacity",o);}}}else{q.setAttribute("fill","none");}},_setGradientFill:function(O){var A,x,M,I,q,F=c.isNumber,E=this._graphic,y=O.type,L=E.getGradientNode("grad"+this.get("id"),y),B=O.stops,C=this.get("width"),S=this.get("height"),K=O.rotation||0,z=Math.PI/180,H=parseFloat(parseFloat(Math.tan(K*z)).toFixed(8)),P,R,D,J,T="0%",Q="100%",u="0%",p="0%",t=O.cx,o=O.cy,v=O.fx,s=O.fy,G=O.r,N=[];if(y=="linear"){t=C/2;o=S/2;if(Math.abs(H)*C/2>=S/2){if(K<180){u=0;p=S;}else{u=S;p=0;}T=t-((o-u)/H);Q=t-((o-p)/H);}else{if(K>90&&K<270){T=C;Q=0;}else{T=0;Q=C;}u=((H*(t-T))-o)*-1;p=((H*(t-Q))-o)*-1;}T=Math.round(100*T/C);Q=Math.round(100*Q/C);u=Math.round(100*u/S);p=Math.round(100*p/S);T=F(T)?T:0;Q=F(Q)?Q:100;u=F(u)?u:0;p=F(p)?p:0;L.setAttribute("spreadMethod","pad");L.setAttribute("width",C);L.setAttribute("height",S);L.setAttribute("x1",T+"%");L.setAttribute("x2",Q+"%");L.setAttribute("y1",u+"%");L.setAttribute("y2",p+"%");}else{L.setAttribute("cx",(t*100)+"%");L.setAttribute("cy",(o*100)+"%");L.setAttribute("fx",(v*100)+"%");L.setAttribute("fy",(s*100)+"%");L.setAttribute("r",(G*100)+"%");}R=B.length;D=0;for(P=0;P<R;++P){if(this._stops&&this._stops.length>0){I=this._stops.shift();q=false;}else{I=E._createGraphicNode("stop");q=true;}J=B[P];x=J.opacity;M=J.color;A=J.offset||P/(R-1);A=Math.round(A*100)+"%";x=F(x)?x:1;x=Math.max(0,Math.min(1,x));D=(P+1)/R;I.setAttribute("offset",A);I.setAttribute("stop-color",M);I.setAttribute("stop-opacity",x);if(q){L.appendChild(I);}N.push(I);}while(this._stops&&this._stops.length>0){L.removeChild(this._stops.shift());}this._stops=N;},_stops:null,set:function(){var o=this;g.prototype.set.apply(o,arguments);if(o.initialized){o._updateHandler();}},translate:function(o,p){this._addTransform("translate",arguments);},translateX:function(o){this._addTransform("translateX",arguments);},translateY:function(o){this._addTransform("translateY",arguments);},skew:function(o,p){this._addTransform("skew",arguments);},skewX:function(o){this._addTransform("skewX",arguments);},skewY:function(o){this._addTransform("skewY",arguments);},rotate:function(o){this._addTransform("rotate",arguments);},scale:function(o,p){this._addTransform("scale",arguments);},_addTransform:function(p,o){o=b.Array(o);this._transform=c.trim(this._transform+" "+p+"("+o.join(", ")+")");o.unshift(p);this._transforms.push(o);if(this.initialized){this._updateTransform();}},_updateTransform:function(){var w=this._type=="path",q=this.node,C,p,s,B,z,u,r,A=this.matrix,o=this._normalizedMatrix,t=0,v=this._transforms.length;if(w||(this._transforms&&this._transforms.length>0)){B=this._x;z=this._y;s=this.get("transformOrigin");u=B+(s[0]*this.get("width"));r=z+(s[1]*this.get("height"));if(w){if(!(this instanceof b.SVGPath)){u=this._left+(s[0]*this.get("width"));
r=this._top+(s[1]*this.get("height"));}o.init({dx:B+this._left,dy:z+this._top});}o.translate(u,r);for(;t<v;++t){C=this._transforms[t].shift();if(C){o[C].apply(o,this._transforms[t]);A[C].apply(A,this._transforms[t]);}if(w){this._transforms[t].unshift(C);}}o.translate(-u,-r);p="matrix("+o.a+","+o.b+","+o.c+","+o.d+","+o.dx+","+o.dy+")";}this._graphic.addToRedrawQueue(this);if(p){q.setAttribute("transform",p);}if(!w){this._transforms=[];}},_draw:function(){var o=this.node;o.setAttribute("width",this.get("width"));o.setAttribute("height",this.get("height"));o.setAttribute("x",this._x);o.setAttribute("y",this._y);o.style.left=this._x+"px";o.style.top=this._y+"px";this._fillChangeHandler();this._strokeChangeHandler();this._updateTransform();},_updateHandler:function(o){this._draw();},_transform:"",getBounds:function(){var s=this._type,t=this.get("stroke"),q=this.get("width"),r=this.get("height"),p=s=="path"?0:this._x,u=s=="path"?0:this._y,o=0;if(t&&t.weight){o=t.weight;}q=(p+q+o)-(p-o);r=(u+r+o)-(u-o);p-=o;u-=o;return this._normalizedMatrix.getContentRect(q,r,p,u);},destroy:function(){var o=this.get("graphic");if(o){o.removeShape(this);}else{this._destroy();}},_destroy:function(){if(this.node){b.Event.purgeElement(this.node,true);if(this.node.parentNode){this.node.parentNode.removeChild(this.node);}this.node=null;}}},b.SVGDrawing.prototype));m.ATTRS={transformOrigin:{valueFn:function(){return[0.5,0.5];}},transform:{setter:function(o){this.matrix.init();this._normalizedMatrix.init();this._transforms=this.matrix.getTransformArray(o);this._transform=o;return o;},getter:function(){return this._transform;}},id:{valueFn:function(){return b.guid();},setter:function(p){var o=this.node;if(o){o.setAttribute("id",p);}return p;}},x:{getter:function(){return this._x;},setter:function(p){var o=this.get("transform");this._x=p;if(o){this.set("transform",o);}}},y:{getter:function(){return this._y;},setter:function(p){var o=this.get("transform");this._y=p;if(o){this.set("transform",o);}}},width:{value:0},height:{value:0},visible:{value:true,setter:function(p){var o=p?"visible":"hidden";if(this.node){this.node.style.visibility=o;}return p;}},fill:{valueFn:"_getDefaultFill",setter:function(q){var p,o=this.get("fill")||this._getDefaultFill();p=(q)?b.merge(o,q):null;if(p&&p.color){if(p.color===undefined||p.color=="none"){p.color=null;}}return p;}},stroke:{valueFn:"_getDefaultStroke",setter:function(q){var p=this.get("stroke")||this._getDefaultStroke(),o;if(q&&q.hasOwnProperty("weight")){o=parseInt(q.weight,10);if(!isNaN(o)){q.weight=o;}}return(q)?b.merge(p,q):null;}},pointerEvents:{valueFn:function(){var p="visiblePainted",o=this.node;if(o){o.setAttribute("pointer-events",p);}return p;},setter:function(p){var o=this.node;if(o){o.setAttribute("pointer-events",p);}return p;}},node:{readOnly:true,getter:function(){return this.node;}},graphic:{readOnly:true,getter:function(){return this._graphic;}}};b.SVGShape=m;l=function(o){l.superclass.constructor.apply(this,arguments);};l.NAME="svgPath";b.extend(l,b.SVGShape,{_left:0,_right:0,_top:0,_bottom:0,_type:"path",_path:""});l.ATTRS=b.merge(b.SVGShape.ATTRS,{path:{readOnly:true,getter:function(){return this._path;}},width:{getter:function(){var o=Math.max(this._right-this._left,0);return o;}},height:{getter:function(){return Math.max(this._bottom-this._top,0);}}});b.SVGPath=l;h=function(){h.superclass.constructor.apply(this,arguments);};h.NAME="svgRect";b.extend(h,b.SVGShape,{_type:"rect"});h.ATTRS=b.SVGShape.ATTRS;b.SVGRect=h;e=function(o){e.superclass.constructor.apply(this,arguments);};e.NAME="svgEllipse";b.extend(e,m,{_type:"ellipse",_draw:function(){var o=this.node,z=this.get("width"),r=this.get("height"),v=this.get("x"),t=this.get("y"),u=z*0.5,s=r*0.5,q=v+u,p=t+s;o.setAttribute("rx",u);o.setAttribute("ry",s);o.setAttribute("cx",q);o.setAttribute("cy",p);this._fillChangeHandler();this._strokeChangeHandler();this._updateTransform();}});e.ATTRS=b.merge(m.ATTRS,{xRadius:{setter:function(o){this.set("width",o*2);},getter:function(){var o=this.get("width");if(o){o*=0.5;}return o;}},yRadius:{setter:function(o){this.set("height",o*2);},getter:function(){var o=this.get("height");if(o){o*=0.5;}return o;}}});b.SVGEllipse=e;f=function(o){f.superclass.constructor.apply(this,arguments);};f.NAME="svgCircle";b.extend(f,b.SVGShape,{_type:"circle",_draw:function(){var r=this.node,q=this.get("x"),t=this.get("y"),p=this.get("radius"),o=q+p,s=t+p;r.setAttribute("r",p);r.setAttribute("cx",o);r.setAttribute("cy",s);this._fillChangeHandler();this._strokeChangeHandler();this._updateTransform();}});f.ATTRS=b.merge(b.SVGShape.ATTRS,{width:{setter:function(o){this.set("radius",o/2);return o;},getter:function(){return this.get("radius")*2;}},height:{setter:function(o){this.set("radius",o/2);return o;},getter:function(){return this.get("radius")*2;}},radius:{value:0}});b.SVGCircle=f;j=function(){j.superclass.constructor.apply(this,arguments);};j.NAME="svgPieSlice";b.extend(j,b.SVGShape,b.mix({_type:"path",_draw:function(s){var p=this.get("cx"),t=this.get("cy"),r=this.get("startAngle"),q=this.get("arc"),o=this.get("radius");this.clear();this.drawWedge(p,t,r,q,o);this.end();}},b.SVGDrawing.prototype));j.ATTRS=b.mix({cx:{value:0},cy:{value:0},startAngle:{value:0},arc:{value:0},radius:{value:0}},b.SVGShape.ATTRS);b.SVGPieSlice=j;d=function(o){d.superclass.constructor.apply(this,arguments);};d.NAME="svgGraphic";d.ATTRS={render:{},id:{valueFn:function(){return b.guid();},setter:function(p){var o=this._node;if(o){o.setAttribute("id",p);}return p;}},shapes:{readOnly:true,getter:function(){return this._shapes;}},contentBounds:{readOnly:true,getter:function(){return this._contentBounds;}},node:{readOnly:true,getter:function(){return this._node;}},width:{setter:function(o){if(this._node){this._node.style.width=o+"px";}return o;}},height:{setter:function(o){if(this._node){this._node.style.height=o+"px";}return o;}},autoSize:{value:false},resizeDown:{getter:function(){return this._resizeDown;},setter:function(o){this._resizeDown=o;
if(this._contentNode){this._redraw();}return o;}},x:{getter:function(){return this._x;},setter:function(o){this._x=o;if(this._node){this._node.style.left=o+"px";}return o;}},y:{getter:function(){return this._y;},setter:function(o){this._y=o;if(this._node){this._node.style.top=o+"px";}return o;}},autoDraw:{value:true},visible:{value:true,setter:function(o){this._toggleVisible(o);return o;}},pointerEvents:{value:"none"}};b.extend(d,b.GraphicBase,{_x:0,_y:0,getXY:function(){var o=b.one(this._node),p;if(o){p=o.getXY();}return p;},_resizeDown:false,initializer:function(){var p=this.get("render"),o=this.get("visible")?"visible":"hidden";this._shapes={};this._contentBounds={left:0,top:0,right:0,bottom:0};this._gradients={};this._node=n.createElement("div");this._node.style.position="absolute";this._node.style.left=this.get("x")+"px";this._node.style.top=this.get("y")+"px";this._node.style.visibility=o;this._contentNode=this._createGraphics();this._contentNode.style.visibility=o;this._contentNode.setAttribute("id",this.get("id"));this._node.appendChild(this._contentNode);if(p){this.render(p);}},render:function(r){var o=b.one(r),p=this.get("width")||parseInt(o.getComputedStyle("width"),10),q=this.get("height")||parseInt(o.getComputedStyle("height"),10);o=o||b.one(n.body);o.append(this._node);this.parentNode=o;this.set("width",p);this.set("height",q);return this;},destroy:function(){this.removeAllShapes();if(this._contentNode){this._removeChildren(this._contentNode);if(this._contentNode.parentNode){this._contentNode.parentNode.removeChild(this._contentNode);}this._contentNode=null;}if(this._node){this._removeChildren(this._node);b.one(this._node).remove(true);this._node=null;}},addShape:function(o){o.graphic=this;if(!this.get("visible")){o.visible=false;}var q=this._getShapeClass(o.type),p=new q(o);this._appendShape(p);return p;},_appendShape:function(p){var q=p.node,o=this._frag||this._contentNode;if(this.get("autoDraw")){o.appendChild(q);}else{this._getDocFrag().appendChild(q);}},removeShape:function(o){if(!(o instanceof m)){if(c.isString(o)){o=this._shapes[o];}}if(o&&o instanceof m){o._destroy();delete this._shapes[o.get("id")];}if(this.get("autoDraw")){this._redraw();}return o;},removeAllShapes:function(){var o=this._shapes,p;for(p in o){if(o.hasOwnProperty(p)){o[p]._destroy();}}this._shapes={};},_removeChildren:function(o){if(o.hasChildNodes()){var p;while(o.firstChild){p=o.firstChild;this._removeChildren(p);o.removeChild(p);}}},clear:function(){this.removeAllShapes();},_toggleVisible:function(r){var q,p=this._shapes,o=r?"visible":"hidden";if(p){for(q in p){if(p.hasOwnProperty(q)){p[q].set("visible",r);}}}if(this._contentNode){this._contentNode.style.visibility=o;}if(this._node){this._node.style.visibility=o;}},_getShapeClass:function(p){var o=this._shapeClass[p];if(o){return o;}return p;},_shapeClass:{circle:b.SVGCircle,rect:b.SVGRect,path:b.SVGPath,ellipse:b.SVGEllipse,pieslice:b.SVGPieSlice},getShapeById:function(p){var o=this._shapes[p];return o;},batch:function(p){var o=this.get("autoDraw");this.set("autoDraw",false);p();this._redraw();this.set("autoDraw",o);},_getDocFrag:function(){if(!this._frag){this._frag=n.createDocumentFragment();}return this._frag;},_redraw:function(){var o=this.get("resizeDown")?this._getUpdatedContentBounds():this._contentBounds;if(this._contentNode){this._contentNode.style.left=o.left+"px";this._contentNode.style.top=o.top+"px";this._contentNode.setAttribute("width",o.width);this._contentNode.setAttribute("height",o.height);this._contentNode.style.width=o.width+"px";this._contentNode.style.height=o.height+"px";this._contentNode.setAttribute("viewBox",""+o.left+" "+o.top+" "+o.width+" "+o.height+"");}if(this.get("autoSize")){this.set("width",o.right);this.set("height",o.bottom);}if(this._frag){if(this._contentNode){this._contentNode.appendChild(this._frag);}this._frag=null;}},addToRedrawQueue:function(o){var q,p;this._shapes[o.get("id")]=o;if(!this.get("resizeDown")){q=o.getBounds();p=this._contentBounds;p.left=p.left<q.left?p.left:q.left;p.top=p.top<q.top?p.top:q.top;p.right=p.right>q.right?p.right:q.right;p.bottom=p.bottom>q.bottom?p.bottom:q.bottom;p.width=p.right-p.left;p.height=p.bottom-p.top;this._contentBounds=p;}if(this.get("autoDraw")){this._redraw();}},_getUpdatedContentBounds:function(){var s,q,p,o=this._shapes,r={left:0,top:0,right:0,bottom:0};for(q in o){if(o.hasOwnProperty(q)){p=o[q];s=p.getBounds();r.left=Math.min(r.left,s.left);r.top=Math.min(r.top,s.top);r.right=Math.max(r.right,s.right);r.bottom=Math.max(r.bottom,s.bottom);}}r.width=r.right-r.left;r.height=r.bottom-r.top;this._contentBounds=r;return r;},_createGraphics:function(){var o=this._createGraphicNode("svg"),p=this.get("pointerEvents");o.style.position="absolute";o.style.top="0px";o.style.left="0px";o.style.overflow="auto";o.setAttribute("overflow","auto");o.setAttribute("pointer-events",p);return o;},_createGraphicNode:function(q,o){var r=n.createElementNS("http://www.w3.org/2000/svg","svg:"+q),p=o||"none";if(q!=="defs"&&q!=="stop"&&q!=="linearGradient"&&q!="radialGradient"){r.setAttribute("pointer-events",p);}return r;},getGradientNode:function(q,r){var o=this._gradients,s,p=r+"Gradient";if(o.hasOwnProperty(q)&&o[q].tagName.indexOf(r)>-1){s=this._gradients[q];}else{s=this._createGraphicNode(p);if(!this._defs){this._defs=this._createGraphicNode("defs");this._contentNode.appendChild(this._defs);}this._defs.appendChild(s);q=q||"gradient"+Math.round(100000*Math.random());s.setAttribute("id",q);if(o.hasOwnProperty(q)){this._defs.removeChild(o[q]);}o[q]=s;}return s;}});b.SVGGraphic=d;},"3.6.0",{requires:["graphics"],skinnable:false});