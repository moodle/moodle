/*
YUI 3.13.0 (build 508226d)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

if (typeof __coverage__ === 'undefined') { __coverage__ = {}; }
if (!__coverage__['build/io-nodejs/io-nodejs.js']) {
   __coverage__['build/io-nodejs/io-nodejs.js'] = {"path":"build/io-nodejs/io-nodejs.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":21},"end":{"line":1,"column":40}}},"2":{"name":"(anonymous_2)","line":33,"loc":{"start":{"line":33,"column":18},"end":{"line":33,"column":30}}},"3":{"name":"(anonymous_3)","line":35,"loc":{"start":{"line":35,"column":31},"end":{"line":35,"column":46}}},"4":{"name":"(anonymous_4)","line":85,"loc":{"start":{"line":85,"column":29},"end":{"line":85,"column":40}}},"5":{"name":"(anonymous_5)","line":87,"loc":{"start":{"line":87,"column":18},"end":{"line":87,"column":54}}},"6":{"name":"(anonymous_6)","line":116,"loc":{"start":{"line":116,"column":36},"end":{"line":116,"column":56}}},"7":{"name":"(anonymous_7)","line":131,"loc":{"start":{"line":131,"column":47},"end":{"line":131,"column":62}}},"8":{"name":"(anonymous_8)","line":134,"loc":{"start":{"line":134,"column":51},"end":{"line":134,"column":62}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":156,"column":40}},"2":{"start":{"line":17,"column":4},"end":{"line":21,"column":5}},"3":{"start":{"line":20,"column":8},"end":{"line":20,"column":65}},"4":{"start":{"line":23,"column":4},"end":{"line":23,"column":45}},"5":{"start":{"line":33,"column":4},"end":{"line":39,"column":6}},"6":{"start":{"line":34,"column":8},"end":{"line":34,"column":21}},"7":{"start":{"line":35,"column":8},"end":{"line":37,"column":11}},"8":{"start":{"line":36,"column":12},"end":{"line":36,"column":44}},"9":{"start":{"line":38,"column":8},"end":{"line":38,"column":30}},"10":{"start":{"line":85,"column":4},"end":{"line":150,"column":6}},"11":{"start":{"line":86,"column":8},"end":{"line":149,"column":10}},"12":{"start":{"line":89,"column":16},"end":{"line":89,"column":60}},"13":{"start":{"line":90,"column":16},"end":{"line":90,"column":55}},"14":{"start":{"line":91,"column":16},"end":{"line":91,"column":60}},"15":{"start":{"line":93,"column":16},"end":{"line":96,"column":18}},"16":{"start":{"line":98,"column":16},"end":{"line":106,"column":17}},"17":{"start":{"line":99,"column":20},"end":{"line":101,"column":21}},"18":{"start":{"line":100,"column":24},"end":{"line":100,"column":49}},"19":{"start":{"line":102,"column":20},"end":{"line":105,"column":21}},"20":{"start":{"line":103,"column":24},"end":{"line":103,"column":92}},"21":{"start":{"line":104,"column":24},"end":{"line":104,"column":40}},"22":{"start":{"line":107,"column":16},"end":{"line":109,"column":17}},"23":{"start":{"line":108,"column":20},"end":{"line":108,"column":51}},"24":{"start":{"line":110,"column":16},"end":{"line":112,"column":17}},"25":{"start":{"line":111,"column":20},"end":{"line":111,"column":51}},"26":{"start":{"line":113,"column":16},"end":{"line":115,"column":17}},"27":{"start":{"line":114,"column":20},"end":{"line":114,"column":49}},"28":{"start":{"line":116,"column":16},"end":{"line":142,"column":19}},"29":{"start":{"line":118,"column":20},"end":{"line":122,"column":21}},"30":{"start":{"line":119,"column":24},"end":{"line":119,"column":44}},"31":{"start":{"line":120,"column":24},"end":{"line":120,"column":113}},"32":{"start":{"line":121,"column":24},"end":{"line":121,"column":31}},"33":{"start":{"line":123,"column":20},"end":{"line":138,"column":21}},"34":{"start":{"line":124,"column":24},"end":{"line":137,"column":26}},"35":{"start":{"line":132,"column":32},"end":{"line":132,"column":58}},"36":{"start":{"line":135,"column":32},"end":{"line":135,"column":61}},"37":{"start":{"line":140,"column":20},"end":{"line":140,"column":67}},"38":{"start":{"line":141,"column":20},"end":{"line":141,"column":143}},"39":{"start":{"line":144,"column":16},"end":{"line":146,"column":18}},"40":{"start":{"line":147,"column":16},"end":{"line":147,"column":27}},"41":{"start":{"line":152,"column":4},"end":{"line":152,"column":36}}},"branchMap":{"1":{"line":17,"type":"if","locations":[{"start":{"line":17,"column":4},"end":{"line":17,"column":4}},{"start":{"line":17,"column":4},"end":{"line":17,"column":4}}]},"2":{"line":90,"type":"binary-expr","locations":[{"start":{"line":90,"column":32},"end":{"line":90,"column":45}},{"start":{"line":90,"column":49},"end":{"line":90,"column":54}}]},"3":{"line":98,"type":"if","locations":[{"start":{"line":98,"column":16},"end":{"line":98,"column":16}},{"start":{"line":98,"column":16},"end":{"line":98,"column":16}}]},"4":{"line":99,"type":"if","locations":[{"start":{"line":99,"column":20},"end":{"line":99,"column":20}},{"start":{"line":99,"column":20},"end":{"line":99,"column":20}}]},"5":{"line":102,"type":"if","locations":[{"start":{"line":102,"column":20},"end":{"line":102,"column":20}},{"start":{"line":102,"column":20},"end":{"line":102,"column":20}}]},"6":{"line":102,"type":"binary-expr","locations":[{"start":{"line":102,"column":24},"end":{"line":102,"column":34}},{"start":{"line":102,"column":38},"end":{"line":102,"column":60}}]},"7":{"line":103,"type":"cond-expr","locations":[{"start":{"line":103,"column":68},"end":{"line":103,"column":71}},{"start":{"line":103,"column":74},"end":{"line":103,"column":77}}]},"8":{"line":107,"type":"if","locations":[{"start":{"line":107,"column":16},"end":{"line":107,"column":16}},{"start":{"line":107,"column":16},"end":{"line":107,"column":16}}]},"9":{"line":110,"type":"if","locations":[{"start":{"line":110,"column":16},"end":{"line":110,"column":16}},{"start":{"line":110,"column":16},"end":{"line":110,"column":16}}]},"10":{"line":113,"type":"if","locations":[{"start":{"line":113,"column":16},"end":{"line":113,"column":16}},{"start":{"line":113,"column":16},"end":{"line":113,"column":16}}]},"11":{"line":118,"type":"if","locations":[{"start":{"line":118,"column":20},"end":{"line":118,"column":20}},{"start":{"line":118,"column":20},"end":{"line":118,"column":20}}]},"12":{"line":120,"type":"cond-expr","locations":[{"start":{"line":120,"column":68},"end":{"line":120,"column":77}},{"start":{"line":120,"column":80},"end":{"line":120,"column":89}}]},"13":{"line":123,"type":"if","locations":[{"start":{"line":123,"column":20},"end":{"line":123,"column":20}},{"start":{"line":123,"column":20},"end":{"line":123,"column":20}}]},"14":{"line":129,"type":"binary-expr","locations":[{"start":{"line":129,"column":42},"end":{"line":129,"column":51}},{"start":{"line":129,"column":55},"end":{"line":129,"column":57}}]},"15":{"line":141,"type":"cond-expr","locations":[{"start":{"line":141,"column":98},"end":{"line":141,"column":107}},{"start":{"line":141,"column":110},"end":{"line":141,"column":119}}]},"16":{"line":141,"type":"binary-expr","locations":[{"start":{"line":141,"column":36},"end":{"line":141,"column":40}},{"start":{"line":141,"column":45},"end":{"line":141,"column":67}},{"start":{"line":141,"column":71},"end":{"line":141,"column":93}}]}},"code":["(function () { YUI.add('io-nodejs', function (Y, NAME) {","","/*global Y: false, Buffer: false, clearInterval: false, clearTimeout: false, console: false, exports: false, global: false, module: false, process: false, querystring: false, require: false, setInterval: false, setTimeout: false, __filename: false, __dirname: false */","    /**","    * Node.js override for IO, methods are mixed into `Y.IO`","    * @module io-nodejs","    * @main io-nodejs","    */","    /**","    * Passthru to the NodeJS <a href=\"https://github.com/mikeal/request\">request</a> module.","    * This method is return of `require('request')` so you can use it inside NodeJS without","    * the IO abstraction.","    * @method request","    * @static","    * @for IO","    */","    if (!Y.IO.request) {","        // Default Request's cookie jar to `false`. This way cookies will not be","        // maintained across requests.","        Y.IO.request = require('request').defaults({jar: false});","    }","","    var codes = require('http').STATUS_CODES;","","    /**","    Flatten headers object","    @method flatten","    @protected","    @for IO","    @param {Object} o The headers object","    @return {String} The flattened headers object","    */","    var flatten = function(o) {","        var str = [];","        Object.keys(o).forEach(function(name) {","            str.push(name + ': ' + o[name]);","        });","        return str.join('\\n');","    };","","","    /**","    NodeJS IO transport, uses the NodeJS <a href=\"https://github.com/mikeal/request\">request</a>","    module under the hood to perform all network IO.","    @method transports.nodejs","    @for IO","    @static","    @return {Object} This object contains only a `send` method that accepts a","    `transaction object`, `uri` and the `config object`.","    @example","","        Y.io('https://somedomain.com/url', {","            method: 'PUT',","            data: '?foo=bar',","            //Extra request module config options.","            request: {","                maxRedirects: 100,","                strictSSL: true,","                multipart: [","                    {","                        'content-type': 'application/json',","                        body: JSON.stringify({","                            foo: 'bar',","                            _attachments: {","                                'message.txt': {","                                    follows: true,","                                    length: 18,","                                    'content_type': 'text/plain'","                                }","                            }","                        })","                    },","                    {","                        body: 'I am an attachment'","                    }","                ]","            },","            on: {","                success: function(id, e) {","                }","            }","        });","    */","","    Y.IO.transports.nodejs = function() {","        return {","            send: function (transaction, uri, config) {","","                config.notify('start', transaction, config);","                config.method = config.method || 'GET';","                config.method = config.method.toUpperCase();","","                var rconf = {","                    method: config.method,","                    uri: uri","                };","","                if (config.data) {","                    if (Y.Lang.isString(config.data)) {","                        rconf.body = config.data;","                    }","                    if (rconf.body && rconf.method === 'GET') {","                        rconf.uri += (rconf.uri.indexOf('?') > -1 ? '&' : '?') + rconf.body;","                        rconf.body = '';","                    }","                }","                if (config.headers) {","                    rconf.headers = config.headers;","                }","                if (config.timeout) {","                    rconf.timeout = config.timeout;","                }","                if (config.request) {","                    Y.mix(rconf, config.request);","                }","                Y.IO.request(rconf, function(err, data) {","","                    if (err) {","                        transaction.c = err;","                        config.notify(((err.code === 'ETIMEDOUT') ? 'timeout' : 'failure'), transaction, config);","                        return;","                    }","                    if (data) {","                        transaction.c = {","                            status: data.statusCode,","                            statusCode: data.statusCode,","                            statusText: codes[data.statusCode],","                            headers: data.headers,","                            responseText: data.body || '',","                            responseXML: null,","                            getResponseHeader: function(name) {","                                return this.headers[name];","                            },","                            getAllResponseHeaders: function() {","                                return flatten(this.headers);","                            }","                        };","                    }","","                    config.notify('complete', transaction, config);","                    config.notify(((data && (data.statusCode >= 200 && data.statusCode <= 299)) ? 'success' : 'failure'), transaction, config);","                });","","                var ret = {","                    io: transaction","                };","                return ret;","            }","        };","    };","","    Y.IO.defaultTransport('nodejs');","","","","}, '3.13.0', {\"requires\": [\"io-base\"]});","","}());"]};
}
var __cov_xMI3Czai12udFLgokahGeg = __coverage__['build/io-nodejs/io-nodejs.js'];
__cov_xMI3Czai12udFLgokahGeg.s['1']++;YUI.add('io-nodejs',function(Y,NAME){__cov_xMI3Czai12udFLgokahGeg.f['1']++;__cov_xMI3Czai12udFLgokahGeg.s['2']++;if(!Y.IO.request){__cov_xMI3Czai12udFLgokahGeg.b['1'][0]++;__cov_xMI3Czai12udFLgokahGeg.s['3']++;Y.IO.request=require('request').defaults({jar:false});}else{__cov_xMI3Czai12udFLgokahGeg.b['1'][1]++;}__cov_xMI3Czai12udFLgokahGeg.s['4']++;var codes=require('http').STATUS_CODES;__cov_xMI3Czai12udFLgokahGeg.s['5']++;var flatten=function(o){__cov_xMI3Czai12udFLgokahGeg.f['2']++;__cov_xMI3Czai12udFLgokahGeg.s['6']++;var str=[];__cov_xMI3Czai12udFLgokahGeg.s['7']++;Object.keys(o).forEach(function(name){__cov_xMI3Czai12udFLgokahGeg.f['3']++;__cov_xMI3Czai12udFLgokahGeg.s['8']++;str.push(name+': '+o[name]);});__cov_xMI3Czai12udFLgokahGeg.s['9']++;return str.join('\n');};__cov_xMI3Czai12udFLgokahGeg.s['10']++;Y.IO.transports.nodejs=function(){__cov_xMI3Czai12udFLgokahGeg.f['4']++;__cov_xMI3Czai12udFLgokahGeg.s['11']++;return{send:function(transaction,uri,config){__cov_xMI3Czai12udFLgokahGeg.f['5']++;__cov_xMI3Czai12udFLgokahGeg.s['12']++;config.notify('start',transaction,config);__cov_xMI3Czai12udFLgokahGeg.s['13']++;config.method=(__cov_xMI3Czai12udFLgokahGeg.b['2'][0]++,config.method)||(__cov_xMI3Czai12udFLgokahGeg.b['2'][1]++,'GET');__cov_xMI3Czai12udFLgokahGeg.s['14']++;config.method=config.method.toUpperCase();__cov_xMI3Czai12udFLgokahGeg.s['15']++;var rconf={method:config.method,uri:uri};__cov_xMI3Czai12udFLgokahGeg.s['16']++;if(config.data){__cov_xMI3Czai12udFLgokahGeg.b['3'][0]++;__cov_xMI3Czai12udFLgokahGeg.s['17']++;if(Y.Lang.isString(config.data)){__cov_xMI3Czai12udFLgokahGeg.b['4'][0]++;__cov_xMI3Czai12udFLgokahGeg.s['18']++;rconf.body=config.data;}else{__cov_xMI3Czai12udFLgokahGeg.b['4'][1]++;}__cov_xMI3Czai12udFLgokahGeg.s['19']++;if((__cov_xMI3Czai12udFLgokahGeg.b['6'][0]++,rconf.body)&&(__cov_xMI3Czai12udFLgokahGeg.b['6'][1]++,rconf.method==='GET')){__cov_xMI3Czai12udFLgokahGeg.b['5'][0]++;__cov_xMI3Czai12udFLgokahGeg.s['20']++;rconf.uri+=(rconf.uri.indexOf('?')>-1?(__cov_xMI3Czai12udFLgokahGeg.b['7'][0]++,'&'):(__cov_xMI3Czai12udFLgokahGeg.b['7'][1]++,'?'))+rconf.body;__cov_xMI3Czai12udFLgokahGeg.s['21']++;rconf.body='';}else{__cov_xMI3Czai12udFLgokahGeg.b['5'][1]++;}}else{__cov_xMI3Czai12udFLgokahGeg.b['3'][1]++;}__cov_xMI3Czai12udFLgokahGeg.s['22']++;if(config.headers){__cov_xMI3Czai12udFLgokahGeg.b['8'][0]++;__cov_xMI3Czai12udFLgokahGeg.s['23']++;rconf.headers=config.headers;}else{__cov_xMI3Czai12udFLgokahGeg.b['8'][1]++;}__cov_xMI3Czai12udFLgokahGeg.s['24']++;if(config.timeout){__cov_xMI3Czai12udFLgokahGeg.b['9'][0]++;__cov_xMI3Czai12udFLgokahGeg.s['25']++;rconf.timeout=config.timeout;}else{__cov_xMI3Czai12udFLgokahGeg.b['9'][1]++;}__cov_xMI3Czai12udFLgokahGeg.s['26']++;if(config.request){__cov_xMI3Czai12udFLgokahGeg.b['10'][0]++;__cov_xMI3Czai12udFLgokahGeg.s['27']++;Y.mix(rconf,config.request);}else{__cov_xMI3Czai12udFLgokahGeg.b['10'][1]++;}__cov_xMI3Czai12udFLgokahGeg.s['28']++;Y.IO.request(rconf,function(err,data){__cov_xMI3Czai12udFLgokahGeg.f['6']++;__cov_xMI3Czai12udFLgokahGeg.s['29']++;if(err){__cov_xMI3Czai12udFLgokahGeg.b['11'][0]++;__cov_xMI3Czai12udFLgokahGeg.s['30']++;transaction.c=err;__cov_xMI3Czai12udFLgokahGeg.s['31']++;config.notify(err.code==='ETIMEDOUT'?(__cov_xMI3Czai12udFLgokahGeg.b['12'][0]++,'timeout'):(__cov_xMI3Czai12udFLgokahGeg.b['12'][1]++,'failure'),transaction,config);__cov_xMI3Czai12udFLgokahGeg.s['32']++;return;}else{__cov_xMI3Czai12udFLgokahGeg.b['11'][1]++;}__cov_xMI3Czai12udFLgokahGeg.s['33']++;if(data){__cov_xMI3Czai12udFLgokahGeg.b['13'][0]++;__cov_xMI3Czai12udFLgokahGeg.s['34']++;transaction.c={status:data.statusCode,statusCode:data.statusCode,statusText:codes[data.statusCode],headers:data.headers,responseText:(__cov_xMI3Czai12udFLgokahGeg.b['14'][0]++,data.body)||(__cov_xMI3Czai12udFLgokahGeg.b['14'][1]++,''),responseXML:null,getResponseHeader:function(name){__cov_xMI3Czai12udFLgokahGeg.f['7']++;__cov_xMI3Czai12udFLgokahGeg.s['35']++;return this.headers[name];},getAllResponseHeaders:function(){__cov_xMI3Czai12udFLgokahGeg.f['8']++;__cov_xMI3Czai12udFLgokahGeg.s['36']++;return flatten(this.headers);}};}else{__cov_xMI3Czai12udFLgokahGeg.b['13'][1]++;}__cov_xMI3Czai12udFLgokahGeg.s['37']++;config.notify('complete',transaction,config);__cov_xMI3Czai12udFLgokahGeg.s['38']++;config.notify((__cov_xMI3Czai12udFLgokahGeg.b['16'][0]++,data)&&((__cov_xMI3Czai12udFLgokahGeg.b['16'][1]++,data.statusCode>=200)&&(__cov_xMI3Czai12udFLgokahGeg.b['16'][2]++,data.statusCode<=299))?(__cov_xMI3Czai12udFLgokahGeg.b['15'][0]++,'success'):(__cov_xMI3Czai12udFLgokahGeg.b['15'][1]++,'failure'),transaction,config);});__cov_xMI3Czai12udFLgokahGeg.s['39']++;var ret={io:transaction};__cov_xMI3Czai12udFLgokahGeg.s['40']++;return ret;}};};__cov_xMI3Czai12udFLgokahGeg.s['41']++;Y.IO.defaultTransport('nodejs');},'3.13.0',{'requires':['io-base']});
