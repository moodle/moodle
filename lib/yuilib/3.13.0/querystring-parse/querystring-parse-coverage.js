/*
YUI 3.13.0 (build 508226d)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

if (typeof __coverage__ === 'undefined') { __coverage__ = {}; }
if (!__coverage__['build/querystring-parse/querystring-parse.js']) {
   __coverage__['build/querystring-parse/querystring-parse.js'] = {"path":"build/querystring-parse/querystring-parse.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":29},"end":{"line":1,"column":48}}},"2":{"name":"(anonymous_2)","line":48,"loc":{"start":{"line":48,"column":14},"end":{"line":48,"column":28}}},"3":{"name":"parsePiece","line":49,"loc":{"start":{"line":49,"column":11},"end":{"line":49,"column":42}}},"4":{"name":"(anonymous_4)","line":97,"loc":{"start":{"line":97,"column":14},"end":{"line":97,"column":41}}},"5":{"name":"(anonymous_5)","line":112,"loc":{"start":{"line":112,"column":15},"end":{"line":112,"column":42}}},"6":{"name":"(anonymous_6)","line":131,"loc":{"start":{"line":131,"column":20},"end":{"line":131,"column":43}}},"7":{"name":"(anonymous_7)","line":155,"loc":{"start":{"line":155,"column":23},"end":{"line":155,"column":36}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":162,"column":57}},"2":{"start":{"line":37,"column":0},"end":{"line":119,"column":2}},"3":{"start":{"line":49,"column":4},"end":{"line":93,"column":6}},"4":{"start":{"line":51,"column":8},"end":{"line":51,"column":44}},"5":{"start":{"line":53,"column":8},"end":{"line":60,"column":9}},"6":{"start":{"line":55,"column":12},"end":{"line":55,"column":32}},"7":{"start":{"line":56,"column":12},"end":{"line":59,"column":14}},"8":{"start":{"line":61,"column":8},"end":{"line":61,"column":44}},"9":{"start":{"line":62,"column":8},"end":{"line":71,"column":9}},"10":{"start":{"line":63,"column":12},"end":{"line":63,"column":48}},"11":{"start":{"line":65,"column":12},"end":{"line":70,"column":13}},"12":{"start":{"line":66,"column":16},"end":{"line":66,"column":30}},"13":{"start":{"line":67,"column":16},"end":{"line":69,"column":17}},"14":{"start":{"line":68,"column":20},"end":{"line":68,"column":33}},"15":{"start":{"line":72,"column":8},"end":{"line":72,"column":47}},"16":{"start":{"line":73,"column":8},"end":{"line":79,"column":9}},"17":{"start":{"line":74,"column":12},"end":{"line":74,"column":21}},"18":{"start":{"line":75,"column":12},"end":{"line":77,"column":13}},"19":{"start":{"line":76,"column":16},"end":{"line":76,"column":31}},"20":{"start":{"line":78,"column":12},"end":{"line":78,"column":23}},"21":{"start":{"line":81,"column":8},"end":{"line":81,"column":25}},"22":{"start":{"line":82,"column":8},"end":{"line":82,"column":25}},"23":{"start":{"line":85,"column":8},"end":{"line":87,"column":9}},"24":{"start":{"line":86,"column":12},"end":{"line":86,"column":43}},"25":{"start":{"line":90,"column":8},"end":{"line":90,"column":17}},"26":{"start":{"line":91,"column":8},"end":{"line":91,"column":24}},"27":{"start":{"line":92,"column":8},"end":{"line":92,"column":37}},"28":{"start":{"line":98,"column":4},"end":{"line":107,"column":6}},"29":{"start":{"line":113,"column":4},"end":{"line":117,"column":5}},"30":{"start":{"line":114,"column":8},"end":{"line":116,"column":9}},"31":{"start":{"line":115,"column":12},"end":{"line":115,"column":60}},"32":{"start":{"line":118,"column":4},"end":{"line":118,"column":18}},"33":{"start":{"line":131,"column":0},"end":{"line":141,"column":2}},"34":{"start":{"line":133,"column":4},"end":{"line":140,"column":6}},"35":{"start":{"line":155,"column":0},"end":{"line":157,"column":2}},"36":{"start":{"line":156,"column":4},"end":{"line":156,"column":53}}},"branchMap":{"1":{"line":53,"type":"if","locations":[{"start":{"line":53,"column":8},"end":{"line":53,"column":8}},{"start":{"line":53,"column":8},"end":{"line":53,"column":8}}]},"2":{"line":62,"type":"if","locations":[{"start":{"line":62,"column":8},"end":{"line":62,"column":8}},{"start":{"line":62,"column":8},"end":{"line":62,"column":8}}]},"3":{"line":65,"type":"if","locations":[{"start":{"line":65,"column":12},"end":{"line":65,"column":12}},{"start":{"line":65,"column":12},"end":{"line":65,"column":12}}]},"4":{"line":67,"type":"if","locations":[{"start":{"line":67,"column":16},"end":{"line":67,"column":16}},{"start":{"line":67,"column":16},"end":{"line":67,"column":16}}]},"5":{"line":73,"type":"if","locations":[{"start":{"line":73,"column":8},"end":{"line":73,"column":8}},{"start":{"line":73,"column":8},"end":{"line":73,"column":8}}]},"6":{"line":75,"type":"if","locations":[{"start":{"line":75,"column":12},"end":{"line":75,"column":12}},{"start":{"line":75,"column":12},"end":{"line":75,"column":12}}]},"7":{"line":85,"type":"if","locations":[{"start":{"line":85,"column":8},"end":{"line":85,"column":8}},{"start":{"line":85,"column":8},"end":{"line":85,"column":8}}]},"8":{"line":100,"type":"cond-expr","locations":[{"start":{"line":100,"column":20},"end":{"line":100,"column":28}},{"start":{"line":102,"column":10},"end":{"line":106,"column":40}}]},"9":{"line":102,"type":"cond-expr","locations":[{"start":{"line":102,"column":37},"end":{"line":102,"column":60}},{"start":{"line":104,"column":10},"end":{"line":106,"column":40}}]},"10":{"line":104,"type":"cond-expr","locations":[{"start":{"line":104,"column":69},"end":{"line":104,"column":94}},{"start":{"line":106,"column":10},"end":{"line":106,"column":40}}]},"11":{"line":104,"type":"binary-expr","locations":[{"start":{"line":104,"column":11},"end":{"line":104,"column":35}},{"start":{"line":104,"column":39},"end":{"line":104,"column":65}}]},"12":{"line":114,"type":"if","locations":[{"start":{"line":114,"column":8},"end":{"line":114,"column":8}},{"start":{"line":114,"column":8},"end":{"line":114,"column":8}}]},"13":{"line":114,"type":"binary-expr","locations":[{"start":{"line":114,"column":12},"end":{"line":114,"column":13}},{"start":{"line":114,"column":17},"end":{"line":114,"column":43}}]},"14":{"line":135,"type":"binary-expr","locations":[{"start":{"line":135,"column":21},"end":{"line":135,"column":24}},{"start":{"line":135,"column":28},"end":{"line":135,"column":31}}]},"15":{"line":136,"type":"binary-expr","locations":[{"start":{"line":136,"column":24},"end":{"line":136,"column":26}},{"start":{"line":136,"column":30},"end":{"line":136,"column":33}}]}},"code":["(function () { YUI.add('querystring-parse', function (Y, NAME) {","","/**"," * The QueryString module adds support for serializing JavaScript objects into"," * query strings and parsing JavaScript objects from query strings format."," *"," * The QueryString namespace is added to your YUI instance including static methods"," * `Y.QueryString.parse(..)` and `Y.QueryString.stringify(..)`."," *"," * The `querystring` module is a alias for `querystring-parse` and"," * `querystring-stringify`."," *"," * As their names suggest, `querystring-parse` adds support for parsing"," * Query String data (`Y.QueryString.parse`) and `querystring-stringify` for serializing"," * JavaScript data into Query Strings (`Y.QueryString.stringify`).  You may choose to"," * include either of the submodules individually if you don't need the"," * complementary functionality, or include the rollup for both."," *"," * @module querystring"," * @main querystring","*/","","/**"," * Provides Y.QueryString.parse method to accept Query Strings and return native"," * JavaScript objects."," *"," * @module querystring"," * @submodule querystring-parse","*/","","/**"," * The QueryString module adds support for serializing JavaScript objects into"," * query strings and parsing JavaScript objects from query strings format."," * @class QueryString"," * @static"," */","var QueryString = Y.namespace(\"QueryString\"),","","// Parse a key=val string.","// These can get pretty hairy","// example flow:","// parse(foo[bar][][bla]=baz)","// return parse(foo[bar][][bla],\"baz\")","// return parse(foo[bar][], {bla : \"baz\"})","// return parse(foo[bar], [{bla:\"baz\"}])","// return parse(foo, {bar:[{bla:\"baz\"}]})","// return {foo:{bar:[{bla:\"baz\"}]}}","pieceParser = function (eq) {","    return function parsePiece (key, val) {","","        var sliced, numVal, head, tail, ret;","","        if (arguments.length !== 2) {","            // key=val, called from the map/reduce","            key = key.split(eq);","            return parsePiece(","                QueryString.unescape(key.shift()),","                QueryString.unescape(key.join(eq))","            );","        }","        key = key.replace(/^\\s+|\\s+$/g, '');","        if (Y.Lang.isString(val)) {","            val = val.replace(/^\\s+|\\s+$/g, '');","            // convert numerals to numbers","            if (!isNaN(val)) {","                numVal = +val;","                if (val === numVal.toString(10)) {","                    val = numVal;","                }","            }","        }","        sliced = /(.*)\\[([^\\]]*)\\]$/.exec(key);","        if (!sliced) {","            ret = {};","            if (key) {","                ret[key] = val;","            }","            return ret;","        }","        // [\"foo[][bar][][baz]\", \"foo[][bar][]\", \"baz\"]","        tail = sliced[2];","        head = sliced[1];","","        // array: key[]=val","        if (!tail) {","            return parsePiece(head, [val]);","        }","","        // obj: key[subkey]=val","        ret = {};","        ret[tail] = val;","        return parsePiece(head, ret);","    };","},","","// the reducer function that merges each query piece together into one set of params","mergeParams = function(params, addition) {","    return (","        // if it's uncontested, then just return the addition.","        (!params) ? addition","        // if the existing value is an array, then concat it.","        : (Y.Lang.isArray(params)) ? params.concat(addition)","        // if the existing value is not an array, and either are not objects, arrayify it.","        : (!Y.Lang.isObject(params) || !Y.Lang.isObject(addition)) ? [params].concat(addition)","        // else merge them as objects, which is a little more complex","        : mergeObjects(params, addition)","    );","},","","// Merge two *objects* together. If this is called, we've already ruled","// out the simple cases, and need to do the for-in business.","mergeObjects = function(params, addition) {","    for (var i in addition) {","        if (i && addition.hasOwnProperty(i)) {","            params[i] = mergeParams(params[i], addition[i]);","        }","    }","    return params;","};","","/**"," * Accept Query Strings and return native JavaScript objects."," *"," * @method parse"," * @param qs {String} Querystring to be parsed into an object."," * @param sep {String} (optional) Character that should join param k=v pairs together. Default: \"&\""," * @param eq  {String} (optional) Character that should join keys to their values. Default: \"=\""," * @public"," * @static"," */","QueryString.parse = function (qs, sep, eq) {","    // wouldn't Y.Array(qs.split()).map(pieceParser(eq)).reduce(mergeParams) be prettier?","    return Y.Array.reduce(","        Y.Array.map(","            qs.split(sep || \"&\"),","            pieceParser(eq || \"=\")","        ),","        {},","        mergeParams","    );","};","","/**"," * Provides Y.QueryString.unescape method to be able to override default decoding"," * method.  This is important in cases where non-standard delimiters are used, if"," * the delimiters would not normally be handled properly by the builtin"," * (en|de)codeURIComponent functions."," * Default: replace \"+\" with \" \", and then decodeURIComponent behavior."," *"," * @method unescape"," * @param s {String} String to be decoded."," * @public"," * @static"," **/","QueryString.unescape = function (s) {","    return decodeURIComponent(s.replace(/\\+/g, ' '));","};","","","","","}, '3.13.0', {\"requires\": [\"yui-base\", \"array-extras\"]});","","}());"]};
}
var __cov_Zszjc85USWL3YeWXCABb8g = __coverage__['build/querystring-parse/querystring-parse.js'];
__cov_Zszjc85USWL3YeWXCABb8g.s['1']++;YUI.add('querystring-parse',function(Y,NAME){__cov_Zszjc85USWL3YeWXCABb8g.f['1']++;__cov_Zszjc85USWL3YeWXCABb8g.s['2']++;var QueryString=Y.namespace('QueryString'),pieceParser=function(eq){__cov_Zszjc85USWL3YeWXCABb8g.f['2']++;__cov_Zszjc85USWL3YeWXCABb8g.s['3']++;return function parsePiece(key,val){__cov_Zszjc85USWL3YeWXCABb8g.f['3']++;__cov_Zszjc85USWL3YeWXCABb8g.s['4']++;var sliced,numVal,head,tail,ret;__cov_Zszjc85USWL3YeWXCABb8g.s['5']++;if(arguments.length!==2){__cov_Zszjc85USWL3YeWXCABb8g.b['1'][0]++;__cov_Zszjc85USWL3YeWXCABb8g.s['6']++;key=key.split(eq);__cov_Zszjc85USWL3YeWXCABb8g.s['7']++;return parsePiece(QueryString.unescape(key.shift()),QueryString.unescape(key.join(eq)));}else{__cov_Zszjc85USWL3YeWXCABb8g.b['1'][1]++;}__cov_Zszjc85USWL3YeWXCABb8g.s['8']++;key=key.replace(/^\s+|\s+$/g,'');__cov_Zszjc85USWL3YeWXCABb8g.s['9']++;if(Y.Lang.isString(val)){__cov_Zszjc85USWL3YeWXCABb8g.b['2'][0]++;__cov_Zszjc85USWL3YeWXCABb8g.s['10']++;val=val.replace(/^\s+|\s+$/g,'');__cov_Zszjc85USWL3YeWXCABb8g.s['11']++;if(!isNaN(val)){__cov_Zszjc85USWL3YeWXCABb8g.b['3'][0]++;__cov_Zszjc85USWL3YeWXCABb8g.s['12']++;numVal=+val;__cov_Zszjc85USWL3YeWXCABb8g.s['13']++;if(val===numVal.toString(10)){__cov_Zszjc85USWL3YeWXCABb8g.b['4'][0]++;__cov_Zszjc85USWL3YeWXCABb8g.s['14']++;val=numVal;}else{__cov_Zszjc85USWL3YeWXCABb8g.b['4'][1]++;}}else{__cov_Zszjc85USWL3YeWXCABb8g.b['3'][1]++;}}else{__cov_Zszjc85USWL3YeWXCABb8g.b['2'][1]++;}__cov_Zszjc85USWL3YeWXCABb8g.s['15']++;sliced=/(.*)\[([^\]]*)\]$/.exec(key);__cov_Zszjc85USWL3YeWXCABb8g.s['16']++;if(!sliced){__cov_Zszjc85USWL3YeWXCABb8g.b['5'][0]++;__cov_Zszjc85USWL3YeWXCABb8g.s['17']++;ret={};__cov_Zszjc85USWL3YeWXCABb8g.s['18']++;if(key){__cov_Zszjc85USWL3YeWXCABb8g.b['6'][0]++;__cov_Zszjc85USWL3YeWXCABb8g.s['19']++;ret[key]=val;}else{__cov_Zszjc85USWL3YeWXCABb8g.b['6'][1]++;}__cov_Zszjc85USWL3YeWXCABb8g.s['20']++;return ret;}else{__cov_Zszjc85USWL3YeWXCABb8g.b['5'][1]++;}__cov_Zszjc85USWL3YeWXCABb8g.s['21']++;tail=sliced[2];__cov_Zszjc85USWL3YeWXCABb8g.s['22']++;head=sliced[1];__cov_Zszjc85USWL3YeWXCABb8g.s['23']++;if(!tail){__cov_Zszjc85USWL3YeWXCABb8g.b['7'][0]++;__cov_Zszjc85USWL3YeWXCABb8g.s['24']++;return parsePiece(head,[val]);}else{__cov_Zszjc85USWL3YeWXCABb8g.b['7'][1]++;}__cov_Zszjc85USWL3YeWXCABb8g.s['25']++;ret={};__cov_Zszjc85USWL3YeWXCABb8g.s['26']++;ret[tail]=val;__cov_Zszjc85USWL3YeWXCABb8g.s['27']++;return parsePiece(head,ret);};},mergeParams=function(params,addition){__cov_Zszjc85USWL3YeWXCABb8g.f['4']++;__cov_Zszjc85USWL3YeWXCABb8g.s['28']++;return!params?(__cov_Zszjc85USWL3YeWXCABb8g.b['8'][0]++,addition):(__cov_Zszjc85USWL3YeWXCABb8g.b['8'][1]++,Y.Lang.isArray(params)?(__cov_Zszjc85USWL3YeWXCABb8g.b['9'][0]++,params.concat(addition)):(__cov_Zszjc85USWL3YeWXCABb8g.b['9'][1]++,(__cov_Zszjc85USWL3YeWXCABb8g.b['11'][0]++,!Y.Lang.isObject(params))||(__cov_Zszjc85USWL3YeWXCABb8g.b['11'][1]++,!Y.Lang.isObject(addition))?(__cov_Zszjc85USWL3YeWXCABb8g.b['10'][0]++,[params].concat(addition)):(__cov_Zszjc85USWL3YeWXCABb8g.b['10'][1]++,mergeObjects(params,addition))));},mergeObjects=function(params,addition){__cov_Zszjc85USWL3YeWXCABb8g.f['5']++;__cov_Zszjc85USWL3YeWXCABb8g.s['29']++;for(var i in addition){__cov_Zszjc85USWL3YeWXCABb8g.s['30']++;if((__cov_Zszjc85USWL3YeWXCABb8g.b['13'][0]++,i)&&(__cov_Zszjc85USWL3YeWXCABb8g.b['13'][1]++,addition.hasOwnProperty(i))){__cov_Zszjc85USWL3YeWXCABb8g.b['12'][0]++;__cov_Zszjc85USWL3YeWXCABb8g.s['31']++;params[i]=mergeParams(params[i],addition[i]);}else{__cov_Zszjc85USWL3YeWXCABb8g.b['12'][1]++;}}__cov_Zszjc85USWL3YeWXCABb8g.s['32']++;return params;};__cov_Zszjc85USWL3YeWXCABb8g.s['33']++;QueryString.parse=function(qs,sep,eq){__cov_Zszjc85USWL3YeWXCABb8g.f['6']++;__cov_Zszjc85USWL3YeWXCABb8g.s['34']++;return Y.Array.reduce(Y.Array.map(qs.split((__cov_Zszjc85USWL3YeWXCABb8g.b['14'][0]++,sep)||(__cov_Zszjc85USWL3YeWXCABb8g.b['14'][1]++,'&')),pieceParser((__cov_Zszjc85USWL3YeWXCABb8g.b['15'][0]++,eq)||(__cov_Zszjc85USWL3YeWXCABb8g.b['15'][1]++,'='))),{},mergeParams);};__cov_Zszjc85USWL3YeWXCABb8g.s['35']++;QueryString.unescape=function(s){__cov_Zszjc85USWL3YeWXCABb8g.f['7']++;__cov_Zszjc85USWL3YeWXCABb8g.s['36']++;return decodeURIComponent(s.replace(/\+/g,' '));};},'3.13.0',{'requires':['yui-base','array-extras']});
