{"version":3,"sources":["../src/adapter.js"],"names":["define","e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","module","_adapter_factory","adapter","adapterFactory","window","Object","defineProperty","value","_ref","arguments","options","shimChrome","shimFirefox","shimEdge","shimSafari","logging","utils","log","browserDetails","detectBrowser","commonShim","extractVersion","disableLog","disableWarnings","browser","chromeShim","shimPeerConnection","browserShim","shimGetUserMedia","shimMediaStream","shimOnTrack","shimAddTrackRemoveTrack","shimGetSendersWithDtmf","shimGetStats","shimSenderReceiverGetStats","fixNegotiationNeeded","shimRTCIceCandidate","shimConnectionState","shimMaxMessageSize","shimSendThrowTypeError","removeAllowExtmapMixed","firefoxShim","shimRemoveStream","shimSenderGetStats","shimReceiverGetStats","shimRTCDataChannel","shimAddTransceiver","shimCreateOffer","shimCreateAnswer","edgeShim","shimGetDisplayMedia","shimReplaceTrack","safariShim","shimRTCIceServerUrls","shimCreateOfferLegacy","shimCallbacksAPI","shimLocalStreamsAPI","shimRemoteStreamsAPI","shimTrackEventTransceiver","_utils","_interopRequireWildcard","_chrome_shim","_edge_shim","_firefox_shim","_safari_shim","_common_shim","obj","__esModule","newObj","key","prototype","hasOwnProperty","default","_typeof","Symbol","iterator","constructor","_getusermedia","enumerable","get","_getdisplaymedia","MediaStream","webkitMediaStream","RTCPeerConnection","origGetStats","getStats","_this5","_arguments","Array","slice","selector","onSucc","onErr","apply","fixChromeStats_","response","standardReport","reports","result","forEach","report","standardStats","id","timestamp","type","localcandidate","remotecandidate","names","name","stat","makeMapStats","stats","Map","keys","map","successCallbackWrapper_","Promise","resolve","reject","then","shimAddTrackRemoveTrackWithNative","addTrack","version","origGetLocalStreams","getLocalStreams","_this11","nativeStreams","_reverseStreams","stream","origAddStream","addStream","_this12","_streams","getTracks","track","alreadyExists","getSenders","find","DOMException","newStream","origRemoveStream","removeStream","_this13","signalingState","streams","oldStream","dispatchEvent","Event","replaceInternalStreamId","pc","description","sdp","internalId","externalStream","internalStream","replace","RegExp","RTCSessionDescription","replaceExternalStreamId","method","nativeMethod","methodObj","_defineProperty","_this14","args","isLegacyCall","desc","err","origSetLocalDescription","setLocalDescription","origLocalDescription","getOwnPropertyDescriptor","removeTrack","sender","_this15","_pc","isLocal","streamid","hasTrack","webkitRTCPeerConnection","RTCIceCandidate","nativeAddIceCandidate","addIceCandidate","candidate","wrapPeerConnectionEvent","target","configurable","writable","_ontrack","set","removeEventListener","addEventListener","origSetRemoteDescription","setRemoteDescription","_this","_ontrackpoly","te","receiver","getReceivers","event","transceiver","shimSenderWithDtmf","dtmf","_dtmf","kind","createDTMFSender","_senders","origAddTrack","push","origRemoveTrack","idx","indexOf","splice","_this2","_this3","RTCRtpSender","origGetSenders","_this4","senders","RTCRtpReceiver","_this6","filterStats","origGetReceivers","_this7","receivers","srcElement","MediaStreamTrack","_this8","_shimmedLocalStreams","streamId","_this9","existingSenders","newSenders","filter","newSender","concat","_this10","getSourceId","navigator","mediaDevices","console","error","getDisplayMedia","constraints","sourceId","widthSpecified","video","width","heightSpecified","height","frameRateSpecified","frameRate","mandatory","chromeMediaSource","chromeMediaSourceId","maxFrameRate","maxWidth","maxHeight","getUserMedia","constraintsToChrome_","c","optional","cc","ideal","exact","min","max","oldname_","prefix","charAt","toUpperCase","oc","mix","advanced","shimConstraints_","func","JSON","parse","stringify","audio","remap","b","face","facingMode","getSupportedFacingModeLies","getSupportedConstraints","matches","enumerateDevices","devices","d","dev","some","match","label","toLowerCase","includes","deviceId","shimError_","PermissionDeniedError","PermissionDismissedError","InvalidStateError","DevicesNotFoundError","ConstraintNotSatisfiedError","TrackStartError","MediaDeviceFailedDueToShutdown","MediaDeviceKillSwitchOn","TabCaptureError","ScreenCaptureError","DeviceCaptureError","message","constraint","constraintName","toString","onSuccess","onError","webkitGetUserMedia","bind","origGetUserMedia","cs","getAudioTracks","getVideoTracks","stop","nativeSRD","split","line","trim","join","_sdp","_sdp2","NativeRTCIceCandidate","substr","nativeCandidate","parsedCandidate","parseCandidate","augmentedCandidate","assign","toJSON","sdpMid","sdpMLineIndex","usernameFragment","_sctp","sctpInDescription","sections","splitSections","shift","mediaSection","mLine","parseMLine","protocol","getRemoteFirefoxVersion","parseInt","getCanSendMaxMessageSize","remoteIsFirefox","canSendMaxMessageSize","getMaxMessageSize","maxMessageSize","matchPrefix","_getConfiguration","getConfiguration","sdpSemantics","isFirefox","canSendMMS","remoteMMS","Number","POSITIVE_INFINITY","Math","sctp","wrapDcSend","dc","origDataChannelSend","send","data","size","byteLength","readyState","TypeError","origCreateDataChannel","createDataChannel","dataChannel","channel","proto","completed","checking","iceConnectionState","_onconnectionstatechange","cb","origMethod","_connectionstatechangepoly","_lastConnectionState","connectionState","newEvent","_filtericeservers","_rtcpeerconnectionShim","_rtcpeerconnectionShim2","RTCIceGatherer","origMSTEnabled","ev","enabled","RTCDtmfSender","RTCDTMFSender","RTCPeerConnectionShim","config","iceServers","filterIceServers","replaceTrack","setTrack","hasTurn","server","urls","url","deprecated","isString","validTurn","startsWith","catch","mozRTCPeerConnection","modernStatsTypes","inboundrtp","outboundrtp","candidatepair","nativeGetStats","DataChannel","RTCDataChannel","origAddTransceiver","addTransceiver","setParametersPromises","initParameters","shouldPerformCheck","sendEncodings","encodingParam","ridRegex","test","rid","parseFloat","scaleResolutionDownBy","RangeError","maxFramerate","params","getParameters","encodings","setParameters","origCreateOffer","createOffer","_arguments2","all","finally","origCreateAnswer","createAnswer","_arguments3","RTCTrackEvent","preferredMediaSource","mediaSource","nativeGetUserMedia","getSettings","nativeGetSettings","applyConstraints","nativeApplyConstraints","successCallback","failureCallback","promise","withCallback","_getUserMedia","shimConstraints","errcb","offerOptions","offerToReceiveAudio","audioTransceiver","getTransceivers","direction","setDirection","offerToReceiveVideo","videoTransceiver","_localStreams","_addTrack","index","tracks","getRemoteStreams","_remoteStreams","_onaddstream","_onaddstreampoly","compactObject","OrigPeerConnection","pcConfig","pcConstraints","newIceServers","generateCertificate","eventNameToWrap","wrapper","nativeAddEventListener","nativeEventName","wrappedCallback","modifiedEvent","_eventMap","nativeRemoveEventListener","unwrappedCb","bool","logDisabled_","deprecationWarnings_","walkStats","outbound","streamStatsType","filteredResult","trackStats","trackIdentifier","trackStat","trackId","uastring","expr","pos","oldMethod","newMethod","warn","mozGetUserMedia","userAgent","isSecureContext","supportsUnifiedPlan","RTCRtpTransceiver","isObject","val","reduce","accumulator","isObj","isEmptyObject","base","resultSet","has","endsWith","SDPUtils","fixStatsType","writeMediaSection","caps","dtlsRole","writeRtpDescription","writeIceParameters","iceGatherer","getLocalParameters","writeDtlsParameters","dtlsTransport","mid","rtpSender","rtpReceiver","_initialTrackId","msid","sendEncodingParameters","ssrc","rtx","localCName","edgeVersion","getCommonCapabilities","localCapabilities","remoteCapabilities","commonCapabilities","codecs","headerExtensions","fecMechanisms","findCodecByPayloadType","pt","payloadType","preferredPayloadType","rtxCapabilityMatches","lRtx","rRtx","lCodecs","rCodecs","lCodec","parameters","apt","rCodec","clockRate","numChannels","rtcpFeedback","fb","j","parameter","lHeaderExtension","rHeaderExtension","uri","isActionAllowedInSignalingState","action","offer","answer","maybeAddCandidate","iceTransport","alreadyAdded","getRemoteCandidates","remoteCandidate","foundation","ip","port","priority","addRemoteCandidate","makeError","NotSupportedError","InvalidAccessError","OperationError","addTrackToStreamAndFireEvent","MediaStreamTrackEvent","removeTrackFromStreamAndFireEvent","fireAddTrack","trackEvent","setTimeout","_dispatchEvent","_eventTarget","document","createDocumentFragment","canTrickleIceCandidates","needNegotiation","localStreams","remoteStreams","_localDescription","_remoteDescription","iceGatheringState","usingBundle","bundlePolicy","rtcpMuxPolicy","iceTransportPolicy","_iceGatherers","iceCandidatePoolSize","gatherPolicy","_config","transceivers","_sdpSessionId","generateSessionId","_sdpSessionVersion","_dtlsRole","_isClosed","onicecandidate","onaddstream","ontrack","onremovestream","onsignalingstatechange","oniceconnectionstatechange","onconnectionstatechange","onicegatheringstatechange","onnegotiationneeded","ondatachannel","_emitGatheringStateChange","_createTransceiver","doNotAdd","hasBundleTransport","recvEncodingParameters","associatedRemoteMediaStreams","wantReceive","transports","_createIceAndDtlsTransports","_maybeFireNegotiationNeeded","clonedStream","clone","clonedTrack","_createIceGatherer","bufferedCandidateEvents","bufferCandidates","end","state","_gather","onlocalcandidate","evt","cand","component","ufrag","serializedCandidate","writeCandidate","getMediaSections","getDescription","complete","every","RTCIceTransport","onicestatechange","_updateIceConnectionState","_updateConnectionState","RTCDtlsTransport","ondtlsstatechange","onerror","_disposeIceAndDtlsTransports","_transceive","recv","rtcp","cname","compound","rtcpParameters","p","receive","sessionpart","parseRtpParameters","isIceLite","rejected","isRejected","remoteIceParameters","getIceParameters","remoteDtlsParameters","getDtlsParameters","role","start","_updateSignalingState","receiverList","iceOptions","lines","splitLines","getKind","getDirection","remoteMsid","parseMsid","getMid","generateIdentifier","parseRtpEncodingParameters","parseRtcpParameters","isComplete","cands","setTransport","setRemoteCandidates","getCapabilities","codec","isNewTrack","nativeTrack","hasRtx","sid","item","close","newState","states","closed","connected","disconnected","failed","new","connecting","numAudioTracks","numVideoTracks","writeSessionBoilerplate","remoteCodec","hdrExt","remoteExtensions","rHdrExt","getLocalCandidates","mediaSectionsInOffer","localTrack","reducedSize","candidateString","senderOrReceiver","promises","allStats","results","ortcObjectName","nativeGetstats","nativeStats","mapStats","methods","random","blob","parts","part","substring","address","relatedAddress","relatedPort","tcpType","parseIceOptions","parseRtpMap","parsed","channels","writeRtpMap","parseExtmap","writeExtmap","headerExtension","preferredId","parseFmtp","kv","writeFmtp","param","parseRtcpFb","writeRtcpFb","parseSsrcMedia","sp","colon","attribute","parseSsrcGroup","semantics","ssrcs","parseFingerprint","algorithm","fingerprints","setupType","fp","iceParameters","password","mline","rtpmapline","fmtps","maxptime","extension","encodingParameters","hasRed","hasUlpfec","primarySsrc","secondarySsrc","flows","encParam","codecPayloadType","fec","mechanism","bandwidth","maxBitrate","remoteSsrc","rsize","mux","spec","planB","msidParts","parseSctpDescription","maxSizeLine","isNaN","sctpPort","fmt","sctpMapLines","writeSctpDescription","media","output","sessId","sessVer","sessUser","sessionId","parseOLine","username","sessionVersion","netType","addressType","isValidSDP"],"mappings":"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","sourcesContent":["/**\n * Description of import/upgrade into Moodle:\n *\n * 1. Visit https://github.com/webrtc/adapter/releases.\n * 2. Check if the version has been updated from what is listed in lib/thirdpartylibs.xml in the Moodle wwwroot.\n * 3. If it has -\n *    1. Download the source code.\n *    2. Copy the content of the file release/adapter.js from the archive (ignore the first line).\n *    3. Replace the content below \"return (function e(t,n,r) ..\" in this file with the content you copied.\n *    4. Ensure to update lib/thirdpartylibs.xml with any changes.\n */\n\n// ESLint directives.\n/* eslint-disable */\n\n// JSHint directives.\n/* jshint ignore:start */\n\ndefine([], function() {\nreturn (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n\n'use strict';\n\nvar _adapter_factory = require('./adapter_factory.js');\n\nvar adapter = (0, _adapter_factory.adapterFactory)({ window: window });\nmodule.exports = adapter; // this is the difference from adapter_core.\n\n},{\"./adapter_factory.js\":2}],2:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.adapterFactory = adapterFactory;\n\nvar _utils = require('./utils');\n\nvar utils = _interopRequireWildcard(_utils);\n\nvar _chrome_shim = require('./chrome/chrome_shim');\n\nvar chromeShim = _interopRequireWildcard(_chrome_shim);\n\nvar _edge_shim = require('./edge/edge_shim');\n\nvar edgeShim = _interopRequireWildcard(_edge_shim);\n\nvar _firefox_shim = require('./firefox/firefox_shim');\n\nvar firefoxShim = _interopRequireWildcard(_firefox_shim);\n\nvar _safari_shim = require('./safari/safari_shim');\n\nvar safariShim = _interopRequireWildcard(_safari_shim);\n\nvar _common_shim = require('./common_shim');\n\nvar commonShim = _interopRequireWildcard(_common_shim);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n// Shimming starts here.\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\nfunction adapterFactory() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      window = _ref.window;\n\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n    shimChrome: true,\n    shimFirefox: true,\n    shimEdge: true,\n    shimSafari: true\n  };\n\n  // Utils.\n  var logging = utils.log;\n  var browserDetails = utils.detectBrowser(window);\n\n  var adapter = {\n    browserDetails: browserDetails,\n    commonShim: commonShim,\n    extractVersion: utils.extractVersion,\n    disableLog: utils.disableLog,\n    disableWarnings: utils.disableWarnings\n  };\n\n  // Shim browser if found.\n  switch (browserDetails.browser) {\n    case 'chrome':\n      if (!chromeShim || !chromeShim.shimPeerConnection || !options.shimChrome) {\n        logging('Chrome shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming chrome.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = chromeShim;\n\n      chromeShim.shimGetUserMedia(window);\n      chromeShim.shimMediaStream(window);\n      chromeShim.shimPeerConnection(window);\n      chromeShim.shimOnTrack(window);\n      chromeShim.shimAddTrackRemoveTrack(window);\n      chromeShim.shimGetSendersWithDtmf(window);\n      chromeShim.shimGetStats(window);\n      chromeShim.shimSenderReceiverGetStats(window);\n      chromeShim.fixNegotiationNeeded(window);\n\n      commonShim.shimRTCIceCandidate(window);\n      commonShim.shimConnectionState(window);\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      commonShim.removeAllowExtmapMixed(window);\n      break;\n    case 'firefox':\n      if (!firefoxShim || !firefoxShim.shimPeerConnection || !options.shimFirefox) {\n        logging('Firefox shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming firefox.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = firefoxShim;\n\n      firefoxShim.shimGetUserMedia(window);\n      firefoxShim.shimPeerConnection(window);\n      firefoxShim.shimOnTrack(window);\n      firefoxShim.shimRemoveStream(window);\n      firefoxShim.shimSenderGetStats(window);\n      firefoxShim.shimReceiverGetStats(window);\n      firefoxShim.shimRTCDataChannel(window);\n      firefoxShim.shimAddTransceiver(window);\n      firefoxShim.shimCreateOffer(window);\n      firefoxShim.shimCreateAnswer(window);\n\n      commonShim.shimRTCIceCandidate(window);\n      commonShim.shimConnectionState(window);\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      break;\n    case 'edge':\n      if (!edgeShim || !edgeShim.shimPeerConnection || !options.shimEdge) {\n        logging('MS edge shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming edge.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = edgeShim;\n\n      edgeShim.shimGetUserMedia(window);\n      edgeShim.shimGetDisplayMedia(window);\n      edgeShim.shimPeerConnection(window);\n      edgeShim.shimReplaceTrack(window);\n\n      // the edge shim implements the full RTCIceCandidate object.\n\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      break;\n    case 'safari':\n      if (!safariShim || !options.shimSafari) {\n        logging('Safari shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming safari.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = safariShim;\n\n      safariShim.shimRTCIceServerUrls(window);\n      safariShim.shimCreateOfferLegacy(window);\n      safariShim.shimCallbacksAPI(window);\n      safariShim.shimLocalStreamsAPI(window);\n      safariShim.shimRemoteStreamsAPI(window);\n      safariShim.shimTrackEventTransceiver(window);\n      safariShim.shimGetUserMedia(window);\n\n      commonShim.shimRTCIceCandidate(window);\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      commonShim.removeAllowExtmapMixed(window);\n      break;\n    default:\n      logging('Unsupported browser!');\n      break;\n  }\n\n  return adapter;\n}\n\n// Browser shims.\n\n},{\"./chrome/chrome_shim\":3,\"./common_shim\":6,\"./edge/edge_shim\":7,\"./firefox/firefox_shim\":11,\"./safari/safari_shim\":14,\"./utils\":15}],3:[function(require,module,exports){\n\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.shimGetDisplayMedia = exports.shimGetUserMedia = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _getusermedia = require('./getusermedia');\n\nObject.defineProperty(exports, 'shimGetUserMedia', {\n  enumerable: true,\n  get: function get() {\n    return _getusermedia.shimGetUserMedia;\n  }\n});\n\nvar _getdisplaymedia = require('./getdisplaymedia');\n\nObject.defineProperty(exports, 'shimGetDisplayMedia', {\n  enumerable: true,\n  get: function get() {\n    return _getdisplaymedia.shimGetDisplayMedia;\n  }\n});\nexports.shimMediaStream = shimMediaStream;\nexports.shimOnTrack = shimOnTrack;\nexports.shimGetSendersWithDtmf = shimGetSendersWithDtmf;\nexports.shimGetStats = shimGetStats;\nexports.shimSenderReceiverGetStats = shimSenderReceiverGetStats;\nexports.shimAddTrackRemoveTrackWithNative = shimAddTrackRemoveTrackWithNative;\nexports.shimAddTrackRemoveTrack = shimAddTrackRemoveTrack;\nexports.shimPeerConnection = shimPeerConnection;\nexports.fixNegotiationNeeded = fixNegotiationNeeded;\n\nvar _utils = require('../utils.js');\n\nvar utils = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction shimMediaStream(window) {\n  window.MediaStream = window.MediaStream || window.webkitMediaStream;\n}\n\nfunction shimOnTrack(window) {\n  if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection && !('ontrack' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n      get: function get() {\n        return this._ontrack;\n      },\n      set: function set(f) {\n        if (this._ontrack) {\n          this.removeEventListener('track', this._ontrack);\n        }\n        this.addEventListener('track', this._ontrack = f);\n      },\n\n      enumerable: true,\n      configurable: true\n    });\n    var origSetRemoteDescription = window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription = function setRemoteDescription() {\n      var _this = this;\n\n      if (!this._ontrackpoly) {\n        this._ontrackpoly = function (e) {\n          // onaddstream does not fire when a track is added to an existing\n          // stream. But stream.onaddtrack is implemented so we use that.\n          e.stream.addEventListener('addtrack', function (te) {\n            var receiver = void 0;\n            if (window.RTCPeerConnection.prototype.getReceivers) {\n              receiver = _this.getReceivers().find(function (r) {\n                return r.track && r.track.id === te.track.id;\n              });\n            } else {\n              receiver = { track: te.track };\n            }\n\n            var event = new Event('track');\n            event.track = te.track;\n            event.receiver = receiver;\n            event.transceiver = { receiver: receiver };\n            event.streams = [e.stream];\n            _this.dispatchEvent(event);\n          });\n          e.stream.getTracks().forEach(function (track) {\n            var receiver = void 0;\n            if (window.RTCPeerConnection.prototype.getReceivers) {\n              receiver = _this.getReceivers().find(function (r) {\n                return r.track && r.track.id === track.id;\n              });\n            } else {\n              receiver = { track: track };\n            }\n            var event = new Event('track');\n            event.track = track;\n            event.receiver = receiver;\n            event.transceiver = { receiver: receiver };\n            event.streams = [e.stream];\n            _this.dispatchEvent(event);\n          });\n        };\n        this.addEventListener('addstream', this._ontrackpoly);\n      }\n      return origSetRemoteDescription.apply(this, arguments);\n    };\n  } else {\n    // even if RTCRtpTransceiver is in window, it is only used and\n    // emitted in unified-plan. Unfortunately this means we need\n    // to unconditionally wrap the event.\n    utils.wrapPeerConnectionEvent(window, 'track', function (e) {\n      if (!e.transceiver) {\n        Object.defineProperty(e, 'transceiver', { value: { receiver: e.receiver } });\n      }\n      return e;\n    });\n  }\n}\n\nfunction shimGetSendersWithDtmf(window) {\n  // Overrides addTrack/removeTrack, depends on shimAddTrackRemoveTrack.\n  if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection && !('getSenders' in window.RTCPeerConnection.prototype) && 'createDTMFSender' in window.RTCPeerConnection.prototype) {\n    var shimSenderWithDtmf = function shimSenderWithDtmf(pc, track) {\n      return {\n        track: track,\n        get dtmf() {\n          if (this._dtmf === undefined) {\n            if (track.kind === 'audio') {\n              this._dtmf = pc.createDTMFSender(track);\n            } else {\n              this._dtmf = null;\n            }\n          }\n          return this._dtmf;\n        },\n        _pc: pc\n      };\n    };\n\n    // augment addTrack when getSenders is not available.\n    if (!window.RTCPeerConnection.prototype.getSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        this._senders = this._senders || [];\n        return this._senders.slice(); // return a copy of the internal state.\n      };\n      var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n      window.RTCPeerConnection.prototype.addTrack = function addTrack(track, stream) {\n        var sender = origAddTrack.apply(this, arguments);\n        if (!sender) {\n          sender = shimSenderWithDtmf(this, track);\n          this._senders.push(sender);\n        }\n        return sender;\n      };\n\n      var origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n      window.RTCPeerConnection.prototype.removeTrack = function removeTrack(sender) {\n        origRemoveTrack.apply(this, arguments);\n        var idx = this._senders.indexOf(sender);\n        if (idx !== -1) {\n          this._senders.splice(idx, 1);\n        }\n      };\n    }\n    var origAddStream = window.RTCPeerConnection.prototype.addStream;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      var _this2 = this;\n\n      this._senders = this._senders || [];\n      origAddStream.apply(this, [stream]);\n      stream.getTracks().forEach(function (track) {\n        _this2._senders.push(shimSenderWithDtmf(_this2, track));\n      });\n    };\n\n    var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n    window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\n      var _this3 = this;\n\n      this._senders = this._senders || [];\n      origRemoveStream.apply(this, [stream]);\n\n      stream.getTracks().forEach(function (track) {\n        var sender = _this3._senders.find(function (s) {\n          return s.track === track;\n        });\n        if (sender) {\n          // remove sender\n          _this3._senders.splice(_this3._senders.indexOf(sender), 1);\n        }\n      });\n    };\n  } else if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection && 'getSenders' in window.RTCPeerConnection.prototype && 'createDTMFSender' in window.RTCPeerConnection.prototype && window.RTCRtpSender && !('dtmf' in window.RTCRtpSender.prototype)) {\n    var origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n      var _this4 = this;\n\n      var senders = origGetSenders.apply(this, []);\n      senders.forEach(function (sender) {\n        return sender._pc = _this4;\n      });\n      return senders;\n    };\n\n    Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n      get: function get() {\n        if (this._dtmf === undefined) {\n          if (this.track.kind === 'audio') {\n            this._dtmf = this._pc.createDTMFSender(this.track);\n          } else {\n            this._dtmf = null;\n          }\n        }\n        return this._dtmf;\n      }\n    });\n  }\n}\n\nfunction shimGetStats(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  var origGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    var _this5 = this;\n\n    var _arguments = Array.prototype.slice.call(arguments),\n        selector = _arguments[0],\n        onSucc = _arguments[1],\n        onErr = _arguments[2];\n\n    // If selector is a function then we are in the old style stats so just\n    // pass back the original getStats format to avoid breaking old users.\n\n\n    if (arguments.length > 0 && typeof selector === 'function') {\n      return origGetStats.apply(this, arguments);\n    }\n\n    // When spec-style getStats is supported, return those when called with\n    // either no arguments or the selector argument is null.\n    if (origGetStats.length === 0 && (arguments.length === 0 || typeof selector !== 'function')) {\n      return origGetStats.apply(this, []);\n    }\n\n    var fixChromeStats_ = function fixChromeStats_(response) {\n      var standardReport = {};\n      var reports = response.result();\n      reports.forEach(function (report) {\n        var standardStats = {\n          id: report.id,\n          timestamp: report.timestamp,\n          type: {\n            localcandidate: 'local-candidate',\n            remotecandidate: 'remote-candidate'\n          }[report.type] || report.type\n        };\n        report.names().forEach(function (name) {\n          standardStats[name] = report.stat(name);\n        });\n        standardReport[standardStats.id] = standardStats;\n      });\n\n      return standardReport;\n    };\n\n    // shim getStats with maplike support\n    var makeMapStats = function makeMapStats(stats) {\n      return new Map(Object.keys(stats).map(function (key) {\n        return [key, stats[key]];\n      }));\n    };\n\n    if (arguments.length >= 2) {\n      var successCallbackWrapper_ = function successCallbackWrapper_(response) {\n        onSucc(makeMapStats(fixChromeStats_(response)));\n      };\n\n      return origGetStats.apply(this, [successCallbackWrapper_, selector]);\n    }\n\n    // promise-support\n    return new Promise(function (resolve, reject) {\n      origGetStats.apply(_this5, [function (response) {\n        resolve(makeMapStats(fixChromeStats_(response)));\n      }, reject]);\n    }).then(onSucc, onErr);\n  };\n}\n\nfunction shimSenderReceiverGetStats(window) {\n  if (!((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection && window.RTCRtpSender && window.RTCRtpReceiver)) {\n    return;\n  }\n\n  // shim sender stats.\n  if (!('getStats' in window.RTCRtpSender.prototype)) {\n    var origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    if (origGetSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        var _this6 = this;\n\n        var senders = origGetSenders.apply(this, []);\n        senders.forEach(function (sender) {\n          return sender._pc = _this6;\n        });\n        return senders;\n      };\n    }\n\n    var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n    if (origAddTrack) {\n      window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n        var sender = origAddTrack.apply(this, arguments);\n        sender._pc = this;\n        return sender;\n      };\n    }\n    window.RTCRtpSender.prototype.getStats = function getStats() {\n      var sender = this;\n      return this._pc.getStats().then(function (result) {\n        return (\n          /* Note: this will include stats of all senders that\n           *   send a track with the same id as sender.track as\n           *   it is not possible to identify the RTCRtpSender.\n           */\n          utils.filterStats(result, sender.track, true)\n        );\n      });\n    };\n  }\n\n  // shim receiver stats.\n  if (!('getStats' in window.RTCRtpReceiver.prototype)) {\n    var origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n    if (origGetReceivers) {\n      window.RTCPeerConnection.prototype.getReceivers = function getReceivers() {\n        var _this7 = this;\n\n        var receivers = origGetReceivers.apply(this, []);\n        receivers.forEach(function (receiver) {\n          return receiver._pc = _this7;\n        });\n        return receivers;\n      };\n    }\n    utils.wrapPeerConnectionEvent(window, 'track', function (e) {\n      e.receiver._pc = e.srcElement;\n      return e;\n    });\n    window.RTCRtpReceiver.prototype.getStats = function getStats() {\n      var receiver = this;\n      return this._pc.getStats().then(function (result) {\n        return utils.filterStats(result, receiver.track, false);\n      });\n    };\n  }\n\n  if (!('getStats' in window.RTCRtpSender.prototype && 'getStats' in window.RTCRtpReceiver.prototype)) {\n    return;\n  }\n\n  // shim RTCPeerConnection.getStats(track).\n  var origGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    if (arguments.length > 0 && arguments[0] instanceof window.MediaStreamTrack) {\n      var track = arguments[0];\n      var sender = void 0;\n      var receiver = void 0;\n      var err = void 0;\n      this.getSenders().forEach(function (s) {\n        if (s.track === track) {\n          if (sender) {\n            err = true;\n          } else {\n            sender = s;\n          }\n        }\n      });\n      this.getReceivers().forEach(function (r) {\n        if (r.track === track) {\n          if (receiver) {\n            err = true;\n          } else {\n            receiver = r;\n          }\n        }\n        return r.track === track;\n      });\n      if (err || sender && receiver) {\n        return Promise.reject(new DOMException('There are more than one sender or receiver for the track.', 'InvalidAccessError'));\n      } else if (sender) {\n        return sender.getStats();\n      } else if (receiver) {\n        return receiver.getStats();\n      }\n      return Promise.reject(new DOMException('There is no sender or receiver for the track.', 'InvalidAccessError'));\n    }\n    return origGetStats.apply(this, arguments);\n  };\n}\n\nfunction shimAddTrackRemoveTrackWithNative(window) {\n  // shim addTrack/removeTrack with native variants in order to make\n  // the interactions with legacy getLocalStreams behave as in other browsers.\n  // Keeps a mapping stream.id => [stream, rtpsenders...]\n  window.RTCPeerConnection.prototype.getLocalStreams = function getLocalStreams() {\n    var _this8 = this;\n\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n    return Object.keys(this._shimmedLocalStreams).map(function (streamId) {\n      return _this8._shimmedLocalStreams[streamId][0];\n    });\n  };\n\n  var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  window.RTCPeerConnection.prototype.addTrack = function addTrack(track, stream) {\n    if (!stream) {\n      return origAddTrack.apply(this, arguments);\n    }\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n    var sender = origAddTrack.apply(this, arguments);\n    if (!this._shimmedLocalStreams[stream.id]) {\n      this._shimmedLocalStreams[stream.id] = [stream, sender];\n    } else if (this._shimmedLocalStreams[stream.id].indexOf(sender) === -1) {\n      this._shimmedLocalStreams[stream.id].push(sender);\n    }\n    return sender;\n  };\n\n  var origAddStream = window.RTCPeerConnection.prototype.addStream;\n  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n    var _this9 = this;\n\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n    stream.getTracks().forEach(function (track) {\n      var alreadyExists = _this9.getSenders().find(function (s) {\n        return s.track === track;\n      });\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.', 'InvalidAccessError');\n      }\n    });\n    var existingSenders = this.getSenders();\n    origAddStream.apply(this, arguments);\n    var newSenders = this.getSenders().filter(function (newSender) {\n      return existingSenders.indexOf(newSender) === -1;\n    });\n    this._shimmedLocalStreams[stream.id] = [stream].concat(newSenders);\n  };\n\n  var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n  window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n    delete this._shimmedLocalStreams[stream.id];\n    return origRemoveStream.apply(this, arguments);\n  };\n\n  var origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n  window.RTCPeerConnection.prototype.removeTrack = function removeTrack(sender) {\n    var _this10 = this;\n\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n    if (sender) {\n      Object.keys(this._shimmedLocalStreams).forEach(function (streamId) {\n        var idx = _this10._shimmedLocalStreams[streamId].indexOf(sender);\n        if (idx !== -1) {\n          _this10._shimmedLocalStreams[streamId].splice(idx, 1);\n        }\n        if (_this10._shimmedLocalStreams[streamId].length === 1) {\n          delete _this10._shimmedLocalStreams[streamId];\n        }\n      });\n    }\n    return origRemoveTrack.apply(this, arguments);\n  };\n}\n\nfunction shimAddTrackRemoveTrack(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  var browserDetails = utils.detectBrowser(window);\n  // shim addTrack and removeTrack.\n  if (window.RTCPeerConnection.prototype.addTrack && browserDetails.version >= 65) {\n    return shimAddTrackRemoveTrackWithNative(window);\n  }\n\n  // also shim pc.getLocalStreams when addTrack is shimmed\n  // to return the original streams.\n  var origGetLocalStreams = window.RTCPeerConnection.prototype.getLocalStreams;\n  window.RTCPeerConnection.prototype.getLocalStreams = function getLocalStreams() {\n    var _this11 = this;\n\n    var nativeStreams = origGetLocalStreams.apply(this);\n    this._reverseStreams = this._reverseStreams || {};\n    return nativeStreams.map(function (stream) {\n      return _this11._reverseStreams[stream.id];\n    });\n  };\n\n  var origAddStream = window.RTCPeerConnection.prototype.addStream;\n  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n    var _this12 = this;\n\n    this._streams = this._streams || {};\n    this._reverseStreams = this._reverseStreams || {};\n\n    stream.getTracks().forEach(function (track) {\n      var alreadyExists = _this12.getSenders().find(function (s) {\n        return s.track === track;\n      });\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.', 'InvalidAccessError');\n      }\n    });\n    // Add identity mapping for consistency with addTrack.\n    // Unless this is being used with a stream from addTrack.\n    if (!this._reverseStreams[stream.id]) {\n      var newStream = new window.MediaStream(stream.getTracks());\n      this._streams[stream.id] = newStream;\n      this._reverseStreams[newStream.id] = stream;\n      stream = newStream;\n    }\n    origAddStream.apply(this, [stream]);\n  };\n\n  var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n  window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\n    this._streams = this._streams || {};\n    this._reverseStreams = this._reverseStreams || {};\n\n    origRemoveStream.apply(this, [this._streams[stream.id] || stream]);\n    delete this._reverseStreams[this._streams[stream.id] ? this._streams[stream.id].id : stream.id];\n    delete this._streams[stream.id];\n  };\n\n  window.RTCPeerConnection.prototype.addTrack = function addTrack(track, stream) {\n    var _this13 = this;\n\n    if (this.signalingState === 'closed') {\n      throw new DOMException('The RTCPeerConnection\\'s signalingState is \\'closed\\'.', 'InvalidStateError');\n    }\n    var streams = [].slice.call(arguments, 1);\n    if (streams.length !== 1 || !streams[0].getTracks().find(function (t) {\n      return t === track;\n    })) {\n      // this is not fully correct but all we can manage without\n      // [[associated MediaStreams]] internal slot.\n      throw new DOMException('The adapter.js addTrack polyfill only supports a single ' + ' stream which is associated with the specified track.', 'NotSupportedError');\n    }\n\n    var alreadyExists = this.getSenders().find(function (s) {\n      return s.track === track;\n    });\n    if (alreadyExists) {\n      throw new DOMException('Track already exists.', 'InvalidAccessError');\n    }\n\n    this._streams = this._streams || {};\n    this._reverseStreams = this._reverseStreams || {};\n    var oldStream = this._streams[stream.id];\n    if (oldStream) {\n      // this is using odd Chrome behaviour, use with caution:\n      // https://bugs.chromium.org/p/webrtc/issues/detail?id=7815\n      // Note: we rely on the high-level addTrack/dtmf shim to\n      // create the sender with a dtmf sender.\n      oldStream.addTrack(track);\n\n      // Trigger ONN async.\n      Promise.resolve().then(function () {\n        _this13.dispatchEvent(new Event('negotiationneeded'));\n      });\n    } else {\n      var newStream = new window.MediaStream([track]);\n      this._streams[stream.id] = newStream;\n      this._reverseStreams[newStream.id] = stream;\n      this.addStream(newStream);\n    }\n    return this.getSenders().find(function (s) {\n      return s.track === track;\n    });\n  };\n\n  // replace the internal stream id with the external one and\n  // vice versa.\n  function replaceInternalStreamId(pc, description) {\n    var sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(function (internalId) {\n      var externalStream = pc._reverseStreams[internalId];\n      var internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(internalStream.id, 'g'), externalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp: sdp\n    });\n  }\n  function replaceExternalStreamId(pc, description) {\n    var sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(function (internalId) {\n      var externalStream = pc._reverseStreams[internalId];\n      var internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(externalStream.id, 'g'), internalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp: sdp\n    });\n  }\n  ['createOffer', 'createAnswer'].forEach(function (method) {\n    var nativeMethod = window.RTCPeerConnection.prototype[method];\n    var methodObj = _defineProperty({}, method, function () {\n      var _this14 = this;\n\n      var args = arguments;\n      var isLegacyCall = arguments.length && typeof arguments[0] === 'function';\n      if (isLegacyCall) {\n        return nativeMethod.apply(this, [function (description) {\n          var desc = replaceInternalStreamId(_this14, description);\n          args[0].apply(null, [desc]);\n        }, function (err) {\n          if (args[1]) {\n            args[1].apply(null, err);\n          }\n        }, arguments[2]]);\n      }\n      return nativeMethod.apply(this, arguments).then(function (description) {\n        return replaceInternalStreamId(_this14, description);\n      });\n    });\n    window.RTCPeerConnection.prototype[method] = methodObj[method];\n  });\n\n  var origSetLocalDescription = window.RTCPeerConnection.prototype.setLocalDescription;\n  window.RTCPeerConnection.prototype.setLocalDescription = function setLocalDescription() {\n    if (!arguments.length || !arguments[0].type) {\n      return origSetLocalDescription.apply(this, arguments);\n    }\n    arguments[0] = replaceExternalStreamId(this, arguments[0]);\n    return origSetLocalDescription.apply(this, arguments);\n  };\n\n  // TODO: mangle getStats: https://w3c.github.io/webrtc-stats/#dom-rtcmediastreamstats-streamidentifier\n\n  var origLocalDescription = Object.getOwnPropertyDescriptor(window.RTCPeerConnection.prototype, 'localDescription');\n  Object.defineProperty(window.RTCPeerConnection.prototype, 'localDescription', {\n    get: function get() {\n      var description = origLocalDescription.get.apply(this);\n      if (description.type === '') {\n        return description;\n      }\n      return replaceInternalStreamId(this, description);\n    }\n  });\n\n  window.RTCPeerConnection.prototype.removeTrack = function removeTrack(sender) {\n    var _this15 = this;\n\n    if (this.signalingState === 'closed') {\n      throw new DOMException('The RTCPeerConnection\\'s signalingState is \\'closed\\'.', 'InvalidStateError');\n    }\n    // We can not yet check for sender instanceof RTCRtpSender\n    // since we shim RTPSender. So we check if sender._pc is set.\n    if (!sender._pc) {\n      throw new DOMException('Argument 1 of RTCPeerConnection.removeTrack ' + 'does not implement interface RTCRtpSender.', 'TypeError');\n    }\n    var isLocal = sender._pc === this;\n    if (!isLocal) {\n      throw new DOMException('Sender was not created by this connection.', 'InvalidAccessError');\n    }\n\n    // Search for the native stream the senders track belongs to.\n    this._streams = this._streams || {};\n    var stream = void 0;\n    Object.keys(this._streams).forEach(function (streamid) {\n      var hasTrack = _this15._streams[streamid].getTracks().find(function (track) {\n        return sender.track === track;\n      });\n      if (hasTrack) {\n        stream = _this15._streams[streamid];\n      }\n    });\n\n    if (stream) {\n      if (stream.getTracks().length === 1) {\n        // if this is the last track of the stream, remove the stream. This\n        // takes care of any shimmed _senders.\n        this.removeStream(this._reverseStreams[stream.id]);\n      } else {\n        // relying on the same odd chrome behaviour as above.\n        stream.removeTrack(sender.track);\n      }\n      this.dispatchEvent(new Event('negotiationneeded'));\n    }\n  };\n}\n\nfunction shimPeerConnection(window) {\n  var browserDetails = utils.detectBrowser(window);\n\n  if (!window.RTCPeerConnection && window.webkitRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.webkitRTCPeerConnection;\n  }\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  // shim implicit creation of RTCSessionDescription/RTCIceCandidate\n  if (browserDetails.version < 53) {\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate'].forEach(function (method) {\n      var nativeMethod = window.RTCPeerConnection.prototype[method];\n      var methodObj = _defineProperty({}, method, function () {\n        arguments[0] = new (method === 'addIceCandidate' ? window.RTCIceCandidate : window.RTCSessionDescription)(arguments[0]);\n        return nativeMethod.apply(this, arguments);\n      });\n      window.RTCPeerConnection.prototype[method] = methodObj[method];\n    });\n  }\n\n  // support for addIceCandidate(null or undefined)\n  var nativeAddIceCandidate = window.RTCPeerConnection.prototype.addIceCandidate;\n  window.RTCPeerConnection.prototype.addIceCandidate = function addIceCandidate() {\n    if (!arguments[0]) {\n      if (arguments[1]) {\n        arguments[1].apply(null);\n      }\n      return Promise.resolve();\n    }\n    // Firefox 68+ emits and processes {candidate: \"\", ...}, ignore\n    // in older versions. Native support planned for Chrome M77.\n    if (browserDetails.version < 78 && arguments[0] && arguments[0].candidate === '') {\n      return Promise.resolve();\n    }\n    return nativeAddIceCandidate.apply(this, arguments);\n  };\n}\n\nfunction fixNegotiationNeeded(window) {\n  utils.wrapPeerConnectionEvent(window, 'negotiationneeded', function (e) {\n    var pc = e.target;\n    if (pc.signalingState !== 'stable') {\n      return;\n    }\n    return e;\n  });\n}\n\n},{\"../utils.js\":15,\"./getdisplaymedia\":4,\"./getusermedia\":5}],4:[function(require,module,exports){\n/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.shimGetDisplayMedia = shimGetDisplayMedia;\nfunction shimGetDisplayMedia(window, getSourceId) {\n  if (window.navigator.mediaDevices && 'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  if (!window.navigator.mediaDevices) {\n    return;\n  }\n  // getSourceId is a function that returns a promise resolving with\n  // the sourceId of the screen/window/tab to be shared.\n  if (typeof getSourceId !== 'function') {\n    console.error('shimGetDisplayMedia: getSourceId argument is not ' + 'a function');\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia = function getDisplayMedia(constraints) {\n    return getSourceId(constraints).then(function (sourceId) {\n      var widthSpecified = constraints.video && constraints.video.width;\n      var heightSpecified = constraints.video && constraints.video.height;\n      var frameRateSpecified = constraints.video && constraints.video.frameRate;\n      constraints.video = {\n        mandatory: {\n          chromeMediaSource: 'desktop',\n          chromeMediaSourceId: sourceId,\n          maxFrameRate: frameRateSpecified || 3\n        }\n      };\n      if (widthSpecified) {\n        constraints.video.mandatory.maxWidth = widthSpecified;\n      }\n      if (heightSpecified) {\n        constraints.video.mandatory.maxHeight = heightSpecified;\n      }\n      return window.navigator.mediaDevices.getUserMedia(constraints);\n    });\n  };\n}\n\n},{}],5:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.shimGetUserMedia = shimGetUserMedia;\n\nvar _utils = require('../utils.js');\n\nvar utils = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar logging = utils.log;\n\nfunction shimGetUserMedia(window) {\n  var navigator = window && window.navigator;\n\n  if (!navigator.mediaDevices) {\n    return;\n  }\n\n  var browserDetails = utils.detectBrowser(window);\n\n  var constraintsToChrome_ = function constraintsToChrome_(c) {\n    if ((typeof c === 'undefined' ? 'undefined' : _typeof(c)) !== 'object' || c.mandatory || c.optional) {\n      return c;\n    }\n    var cc = {};\n    Object.keys(c).forEach(function (key) {\n      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n        return;\n      }\n      var r = _typeof(c[key]) === 'object' ? c[key] : { ideal: c[key] };\n      if (r.exact !== undefined && typeof r.exact === 'number') {\n        r.min = r.max = r.exact;\n      }\n      var oldname_ = function oldname_(prefix, name) {\n        if (prefix) {\n          return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n        }\n        return name === 'deviceId' ? 'sourceId' : name;\n      };\n      if (r.ideal !== undefined) {\n        cc.optional = cc.optional || [];\n        var oc = {};\n        if (typeof r.ideal === 'number') {\n          oc[oldname_('min', key)] = r.ideal;\n          cc.optional.push(oc);\n          oc = {};\n          oc[oldname_('max', key)] = r.ideal;\n          cc.optional.push(oc);\n        } else {\n          oc[oldname_('', key)] = r.ideal;\n          cc.optional.push(oc);\n        }\n      }\n      if (r.exact !== undefined && typeof r.exact !== 'number') {\n        cc.mandatory = cc.mandatory || {};\n        cc.mandatory[oldname_('', key)] = r.exact;\n      } else {\n        ['min', 'max'].forEach(function (mix) {\n          if (r[mix] !== undefined) {\n            cc.mandatory = cc.mandatory || {};\n            cc.mandatory[oldname_(mix, key)] = r[mix];\n          }\n        });\n      }\n    });\n    if (c.advanced) {\n      cc.optional = (cc.optional || []).concat(c.advanced);\n    }\n    return cc;\n  };\n\n  var shimConstraints_ = function shimConstraints_(constraints, func) {\n    if (browserDetails.version >= 61) {\n      return func(constraints);\n    }\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (constraints && _typeof(constraints.audio) === 'object') {\n      var remap = function remap(obj, a, b) {\n        if (a in obj && !(b in obj)) {\n          obj[b] = obj[a];\n          delete obj[a];\n        }\n      };\n      constraints = JSON.parse(JSON.stringify(constraints));\n      remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');\n      remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');\n      constraints.audio = constraintsToChrome_(constraints.audio);\n    }\n    if (constraints && _typeof(constraints.video) === 'object') {\n      // Shim facingMode for mobile & surface pro.\n      var face = constraints.video.facingMode;\n      face = face && ((typeof face === 'undefined' ? 'undefined' : _typeof(face)) === 'object' ? face : { ideal: face });\n      var getSupportedFacingModeLies = browserDetails.version < 66;\n\n      if (face && (face.exact === 'user' || face.exact === 'environment' || face.ideal === 'user' || face.ideal === 'environment') && !(navigator.mediaDevices.getSupportedConstraints && navigator.mediaDevices.getSupportedConstraints().facingMode && !getSupportedFacingModeLies)) {\n        delete constraints.video.facingMode;\n        var matches = void 0;\n        if (face.exact === 'environment' || face.ideal === 'environment') {\n          matches = ['back', 'rear'];\n        } else if (face.exact === 'user' || face.ideal === 'user') {\n          matches = ['front'];\n        }\n        if (matches) {\n          // Look for matches in label, or use last cam for back (typical).\n          return navigator.mediaDevices.enumerateDevices().then(function (devices) {\n            devices = devices.filter(function (d) {\n              return d.kind === 'videoinput';\n            });\n            var dev = devices.find(function (d) {\n              return matches.some(function (match) {\n                return d.label.toLowerCase().includes(match);\n              });\n            });\n            if (!dev && devices.length && matches.includes('back')) {\n              dev = devices[devices.length - 1]; // more likely the back cam\n            }\n            if (dev) {\n              constraints.video.deviceId = face.exact ? { exact: dev.deviceId } : { ideal: dev.deviceId };\n            }\n            constraints.video = constraintsToChrome_(constraints.video);\n            logging('chrome: ' + JSON.stringify(constraints));\n            return func(constraints);\n          });\n        }\n      }\n      constraints.video = constraintsToChrome_(constraints.video);\n    }\n    logging('chrome: ' + JSON.stringify(constraints));\n    return func(constraints);\n  };\n\n  var shimError_ = function shimError_(e) {\n    if (browserDetails.version >= 64) {\n      return e;\n    }\n    return {\n      name: {\n        PermissionDeniedError: 'NotAllowedError',\n        PermissionDismissedError: 'NotAllowedError',\n        InvalidStateError: 'NotAllowedError',\n        DevicesNotFoundError: 'NotFoundError',\n        ConstraintNotSatisfiedError: 'OverconstrainedError',\n        TrackStartError: 'NotReadableError',\n        MediaDeviceFailedDueToShutdown: 'NotAllowedError',\n        MediaDeviceKillSwitchOn: 'NotAllowedError',\n        TabCaptureError: 'AbortError',\n        ScreenCaptureError: 'AbortError',\n        DeviceCaptureError: 'AbortError'\n      }[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint || e.constraintName,\n      toString: function toString() {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n\n  var getUserMedia_ = function getUserMedia_(constraints, onSuccess, onError) {\n    shimConstraints_(constraints, function (c) {\n      navigator.webkitGetUserMedia(c, onSuccess, function (e) {\n        if (onError) {\n          onError(shimError_(e));\n        }\n      });\n    });\n  };\n  navigator.getUserMedia = getUserMedia_.bind(navigator);\n\n  // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n  // function which returns a Promise, it does not accept spec-style\n  // constraints.\n  if (navigator.mediaDevices.getUserMedia) {\n    var origGetUserMedia = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function (cs) {\n      return shimConstraints_(cs, function (c) {\n        return origGetUserMedia(c).then(function (stream) {\n          if (c.audio && !stream.getAudioTracks().length || c.video && !stream.getVideoTracks().length) {\n            stream.getTracks().forEach(function (track) {\n              track.stop();\n            });\n            throw new DOMException('', 'NotFoundError');\n          }\n          return stream;\n        }, function (e) {\n          return Promise.reject(shimError_(e));\n        });\n      });\n    };\n  }\n}\n\n},{\"../utils.js\":15}],6:[function(require,module,exports){\n/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.shimRTCIceCandidate = shimRTCIceCandidate;\nexports.shimMaxMessageSize = shimMaxMessageSize;\nexports.shimSendThrowTypeError = shimSendThrowTypeError;\nexports.shimConnectionState = shimConnectionState;\nexports.removeAllowExtmapMixed = removeAllowExtmapMixed;\n\nvar _sdp = require('sdp');\n\nvar _sdp2 = _interopRequireDefault(_sdp);\n\nvar _utils = require('./utils');\n\nvar utils = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction shimRTCIceCandidate(window) {\n  // foundation is arbitrarily chosen as an indicator for full support for\n  // https://w3c.github.io/webrtc-pc/#rtcicecandidate-interface\n  if (!window.RTCIceCandidate || window.RTCIceCandidate && 'foundation' in window.RTCIceCandidate.prototype) {\n    return;\n  }\n\n  var NativeRTCIceCandidate = window.RTCIceCandidate;\n  window.RTCIceCandidate = function RTCIceCandidate(args) {\n    // Remove the a= which shouldn't be part of the candidate string.\n    if ((typeof args === 'undefined' ? 'undefined' : _typeof(args)) === 'object' && args.candidate && args.candidate.indexOf('a=') === 0) {\n      args = JSON.parse(JSON.stringify(args));\n      args.candidate = args.candidate.substr(2);\n    }\n\n    if (args.candidate && args.candidate.length) {\n      // Augment the native candidate with the parsed fields.\n      var nativeCandidate = new NativeRTCIceCandidate(args);\n      var parsedCandidate = _sdp2.default.parseCandidate(args.candidate);\n      var augmentedCandidate = Object.assign(nativeCandidate, parsedCandidate);\n\n      // Add a serializer that does not serialize the extra attributes.\n      augmentedCandidate.toJSON = function toJSON() {\n        return {\n          candidate: augmentedCandidate.candidate,\n          sdpMid: augmentedCandidate.sdpMid,\n          sdpMLineIndex: augmentedCandidate.sdpMLineIndex,\n          usernameFragment: augmentedCandidate.usernameFragment\n        };\n      };\n      return augmentedCandidate;\n    }\n    return new NativeRTCIceCandidate(args);\n  };\n  window.RTCIceCandidate.prototype = NativeRTCIceCandidate.prototype;\n\n  // Hook up the augmented candidate in onicecandidate and\n  // addEventListener('icecandidate', ...)\n  utils.wrapPeerConnectionEvent(window, 'icecandidate', function (e) {\n    if (e.candidate) {\n      Object.defineProperty(e, 'candidate', {\n        value: new window.RTCIceCandidate(e.candidate),\n        writable: 'false'\n      });\n    }\n    return e;\n  });\n}\n\nfunction shimMaxMessageSize(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  var browserDetails = utils.detectBrowser(window);\n\n  if (!('sctp' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'sctp', {\n      get: function get() {\n        return typeof this._sctp === 'undefined' ? null : this._sctp;\n      }\n    });\n  }\n\n  var sctpInDescription = function sctpInDescription(description) {\n    if (!description || !description.sdp) {\n      return false;\n    }\n    var sections = _sdp2.default.splitSections(description.sdp);\n    sections.shift();\n    return sections.some(function (mediaSection) {\n      var mLine = _sdp2.default.parseMLine(mediaSection);\n      return mLine && mLine.kind === 'application' && mLine.protocol.indexOf('SCTP') !== -1;\n    });\n  };\n\n  var getRemoteFirefoxVersion = function getRemoteFirefoxVersion(description) {\n    // TODO: Is there a better solution for detecting Firefox?\n    var match = description.sdp.match(/mozilla...THIS_IS_SDPARTA-(\\d+)/);\n    if (match === null || match.length < 2) {\n      return -1;\n    }\n    var version = parseInt(match[1], 10);\n    // Test for NaN (yes, this is ugly)\n    return version !== version ? -1 : version;\n  };\n\n  var getCanSendMaxMessageSize = function getCanSendMaxMessageSize(remoteIsFirefox) {\n    // Every implementation we know can send at least 64 KiB.\n    // Note: Although Chrome is technically able to send up to 256 KiB, the\n    //       data does not reach the other peer reliably.\n    //       See: https://bugs.chromium.org/p/webrtc/issues/detail?id=8419\n    var canSendMaxMessageSize = 65536;\n    if (browserDetails.browser === 'firefox') {\n      if (browserDetails.version < 57) {\n        if (remoteIsFirefox === -1) {\n          // FF < 57 will send in 16 KiB chunks using the deprecated PPID\n          // fragmentation.\n          canSendMaxMessageSize = 16384;\n        } else {\n          // However, other FF (and RAWRTC) can reassemble PPID-fragmented\n          // messages. Thus, supporting ~2 GiB when sending.\n          canSendMaxMessageSize = 2147483637;\n        }\n      } else if (browserDetails.version < 60) {\n        // Currently, all FF >= 57 will reset the remote maximum message size\n        // to the default value when a data channel is created at a later\n        // stage. :(\n        // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n        canSendMaxMessageSize = browserDetails.version === 57 ? 65535 : 65536;\n      } else {\n        // FF >= 60 supports sending ~2 GiB\n        canSendMaxMessageSize = 2147483637;\n      }\n    }\n    return canSendMaxMessageSize;\n  };\n\n  var getMaxMessageSize = function getMaxMessageSize(description, remoteIsFirefox) {\n    // Note: 65536 bytes is the default value from the SDP spec. Also,\n    //       every implementation we know supports receiving 65536 bytes.\n    var maxMessageSize = 65536;\n\n    // FF 57 has a slightly incorrect default remote max message size, so\n    // we need to adjust it here to avoid a failure when sending.\n    // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1425697\n    if (browserDetails.browser === 'firefox' && browserDetails.version === 57) {\n      maxMessageSize = 65535;\n    }\n\n    var match = _sdp2.default.matchPrefix(description.sdp, 'a=max-message-size:');\n    if (match.length > 0) {\n      maxMessageSize = parseInt(match[0].substr(19), 10);\n    } else if (browserDetails.browser === 'firefox' && remoteIsFirefox !== -1) {\n      // If the maximum message size is not present in the remote SDP and\n      // both local and remote are Firefox, the remote peer can receive\n      // ~2 GiB.\n      maxMessageSize = 2147483637;\n    }\n    return maxMessageSize;\n  };\n\n  var origSetRemoteDescription = window.RTCPeerConnection.prototype.setRemoteDescription;\n  window.RTCPeerConnection.prototype.setRemoteDescription = function setRemoteDescription() {\n    this._sctp = null;\n    // Chrome decided to not expose .sctp in plan-b mode.\n    // As usual, adapter.js has to do an 'ugly worakaround'\n    // to cover up the mess.\n    if (browserDetails.browser === 'chrome' && browserDetails.version >= 76) {\n      var _getConfiguration = this.getConfiguration(),\n          sdpSemantics = _getConfiguration.sdpSemantics;\n\n      if (sdpSemantics === 'plan-b') {\n        Object.defineProperty(this, 'sctp', {\n          get: function get() {\n            return typeof this._sctp === 'undefined' ? null : this._sctp;\n          },\n\n          enumerable: true,\n          configurable: true\n        });\n      }\n    }\n\n    if (sctpInDescription(arguments[0])) {\n      // Check if the remote is FF.\n      var isFirefox = getRemoteFirefoxVersion(arguments[0]);\n\n      // Get the maximum message size the local peer is capable of sending\n      var canSendMMS = getCanSendMaxMessageSize(isFirefox);\n\n      // Get the maximum message size of the remote peer.\n      var remoteMMS = getMaxMessageSize(arguments[0], isFirefox);\n\n      // Determine final maximum message size\n      var maxMessageSize = void 0;\n      if (canSendMMS === 0 && remoteMMS === 0) {\n        maxMessageSize = Number.POSITIVE_INFINITY;\n      } else if (canSendMMS === 0 || remoteMMS === 0) {\n        maxMessageSize = Math.max(canSendMMS, remoteMMS);\n      } else {\n        maxMessageSize = Math.min(canSendMMS, remoteMMS);\n      }\n\n      // Create a dummy RTCSctpTransport object and the 'maxMessageSize'\n      // attribute.\n      var sctp = {};\n      Object.defineProperty(sctp, 'maxMessageSize', {\n        get: function get() {\n          return maxMessageSize;\n        }\n      });\n      this._sctp = sctp;\n    }\n\n    return origSetRemoteDescription.apply(this, arguments);\n  };\n}\n\nfunction shimSendThrowTypeError(window) {\n  if (!(window.RTCPeerConnection && 'createDataChannel' in window.RTCPeerConnection.prototype)) {\n    return;\n  }\n\n  // Note: Although Firefox >= 57 has a native implementation, the maximum\n  //       message size can be reset for all data channels at a later stage.\n  //       See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n\n  function wrapDcSend(dc, pc) {\n    var origDataChannelSend = dc.send;\n    dc.send = function send() {\n      var data = arguments[0];\n      var length = data.length || data.size || data.byteLength;\n      if (dc.readyState === 'open' && pc.sctp && length > pc.sctp.maxMessageSize) {\n        throw new TypeError('Message too large (can send a maximum of ' + pc.sctp.maxMessageSize + ' bytes)');\n      }\n      return origDataChannelSend.apply(dc, arguments);\n    };\n  }\n  var origCreateDataChannel = window.RTCPeerConnection.prototype.createDataChannel;\n  window.RTCPeerConnection.prototype.createDataChannel = function createDataChannel() {\n    var dataChannel = origCreateDataChannel.apply(this, arguments);\n    wrapDcSend(dataChannel, this);\n    return dataChannel;\n  };\n  utils.wrapPeerConnectionEvent(window, 'datachannel', function (e) {\n    wrapDcSend(e.channel, e.target);\n    return e;\n  });\n}\n\n/* shims RTCConnectionState by pretending it is the same as iceConnectionState.\n * See https://bugs.chromium.org/p/webrtc/issues/detail?id=6145#c12\n * for why this is a valid hack in Chrome. In Firefox it is slightly incorrect\n * since DTLS failures would be hidden. See\n * https://bugzilla.mozilla.org/show_bug.cgi?id=1265827\n * for the Firefox tracking bug.\n */\nfunction shimConnectionState(window) {\n  if (!window.RTCPeerConnection || 'connectionState' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  var proto = window.RTCPeerConnection.prototype;\n  Object.defineProperty(proto, 'connectionState', {\n    get: function get() {\n      return {\n        completed: 'connected',\n        checking: 'connecting'\n      }[this.iceConnectionState] || this.iceConnectionState;\n    },\n\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(proto, 'onconnectionstatechange', {\n    get: function get() {\n      return this._onconnectionstatechange || null;\n    },\n    set: function set(cb) {\n      if (this._onconnectionstatechange) {\n        this.removeEventListener('connectionstatechange', this._onconnectionstatechange);\n        delete this._onconnectionstatechange;\n      }\n      if (cb) {\n        this.addEventListener('connectionstatechange', this._onconnectionstatechange = cb);\n      }\n    },\n\n    enumerable: true,\n    configurable: true\n  });\n\n  ['setLocalDescription', 'setRemoteDescription'].forEach(function (method) {\n    var origMethod = proto[method];\n    proto[method] = function () {\n      if (!this._connectionstatechangepoly) {\n        this._connectionstatechangepoly = function (e) {\n          var pc = e.target;\n          if (pc._lastConnectionState !== pc.connectionState) {\n            pc._lastConnectionState = pc.connectionState;\n            var newEvent = new Event('connectionstatechange', e);\n            pc.dispatchEvent(newEvent);\n          }\n          return e;\n        };\n        this.addEventListener('iceconnectionstatechange', this._connectionstatechangepoly);\n      }\n      return origMethod.apply(this, arguments);\n    };\n  });\n}\n\nfunction removeAllowExtmapMixed(window) {\n  /* remove a=extmap-allow-mixed for Chrome < M71 */\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  var browserDetails = utils.detectBrowser(window);\n  if (browserDetails.browser === 'chrome' && browserDetails.version >= 71) {\n    return;\n  }\n  var nativeSRD = window.RTCPeerConnection.prototype.setRemoteDescription;\n  window.RTCPeerConnection.prototype.setRemoteDescription = function setRemoteDescription(desc) {\n    if (desc && desc.sdp && desc.sdp.indexOf('\\na=extmap-allow-mixed') !== -1) {\n      desc.sdp = desc.sdp.split('\\n').filter(function (line) {\n        return line.trim() !== 'a=extmap-allow-mixed';\n      }).join('\\n');\n    }\n    return nativeSRD.apply(this, arguments);\n  };\n}\n\n},{\"./utils\":15,\"sdp\":17}],7:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.shimGetDisplayMedia = exports.shimGetUserMedia = undefined;\n\nvar _getusermedia = require('./getusermedia');\n\nObject.defineProperty(exports, 'shimGetUserMedia', {\n  enumerable: true,\n  get: function get() {\n    return _getusermedia.shimGetUserMedia;\n  }\n});\n\nvar _getdisplaymedia = require('./getdisplaymedia');\n\nObject.defineProperty(exports, 'shimGetDisplayMedia', {\n  enumerable: true,\n  get: function get() {\n    return _getdisplaymedia.shimGetDisplayMedia;\n  }\n});\nexports.shimPeerConnection = shimPeerConnection;\nexports.shimReplaceTrack = shimReplaceTrack;\n\nvar _utils = require('../utils');\n\nvar utils = _interopRequireWildcard(_utils);\n\nvar _filtericeservers = require('./filtericeservers');\n\nvar _rtcpeerconnectionShim = require('rtcpeerconnection-shim');\n\nvar _rtcpeerconnectionShim2 = _interopRequireDefault(_rtcpeerconnectionShim);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction shimPeerConnection(window) {\n  var browserDetails = utils.detectBrowser(window);\n\n  if (window.RTCIceGatherer) {\n    if (!window.RTCIceCandidate) {\n      window.RTCIceCandidate = function RTCIceCandidate(args) {\n        return args;\n      };\n    }\n    if (!window.RTCSessionDescription) {\n      window.RTCSessionDescription = function RTCSessionDescription(args) {\n        return args;\n      };\n    }\n    // this adds an additional event listener to MediaStrackTrack that signals\n    // when a tracks enabled property was changed. Workaround for a bug in\n    // addStream, see below. No longer required in 15025+\n    if (browserDetails.version < 15025) {\n      var origMSTEnabled = Object.getOwnPropertyDescriptor(window.MediaStreamTrack.prototype, 'enabled');\n      Object.defineProperty(window.MediaStreamTrack.prototype, 'enabled', {\n        set: function set(value) {\n          origMSTEnabled.set.call(this, value);\n          var ev = new Event('enabled');\n          ev.enabled = value;\n          this.dispatchEvent(ev);\n        }\n      });\n    }\n  }\n\n  // ORTC defines the DTMF sender a bit different.\n  // https://github.com/w3c/ortc/issues/714\n  if (window.RTCRtpSender && !('dtmf' in window.RTCRtpSender.prototype)) {\n    Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n      get: function get() {\n        if (this._dtmf === undefined) {\n          if (this.track.kind === 'audio') {\n            this._dtmf = new window.RTCDtmfSender(this);\n          } else if (this.track.kind === 'video') {\n            this._dtmf = null;\n          }\n        }\n        return this._dtmf;\n      }\n    });\n  }\n  // Edge currently only implements the RTCDtmfSender, not the\n  // RTCDTMFSender alias. See http://draft.ortc.org/#rtcdtmfsender2*\n  if (window.RTCDtmfSender && !window.RTCDTMFSender) {\n    window.RTCDTMFSender = window.RTCDtmfSender;\n  }\n\n  var RTCPeerConnectionShim = (0, _rtcpeerconnectionShim2.default)(window, browserDetails.version);\n  window.RTCPeerConnection = function RTCPeerConnection(config) {\n    if (config && config.iceServers) {\n      config.iceServers = (0, _filtericeservers.filterIceServers)(config.iceServers, browserDetails.version);\n      utils.log('ICE servers after filtering:', config.iceServers);\n    }\n    return new RTCPeerConnectionShim(config);\n  };\n  window.RTCPeerConnection.prototype = RTCPeerConnectionShim.prototype;\n}\n\nfunction shimReplaceTrack(window) {\n  // ORTC has replaceTrack -- https://github.com/w3c/ortc/issues/614\n  if (window.RTCRtpSender && !('replaceTrack' in window.RTCRtpSender.prototype)) {\n    window.RTCRtpSender.prototype.replaceTrack = window.RTCRtpSender.prototype.setTrack;\n  }\n}\n\n},{\"../utils\":15,\"./filtericeservers\":8,\"./getdisplaymedia\":9,\"./getusermedia\":10,\"rtcpeerconnection-shim\":16}],8:[function(require,module,exports){\n/*\n *  Copyright (c) 2018 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.filterIceServers = filterIceServers;\n\nvar _utils = require('../utils');\n\nvar utils = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n// Edge does not like\n// 1) stun: filtered after 14393 unless ?transport=udp is present\n// 2) turn: that does not have all of turn:host:port?transport=udp\n// 3) turn: with ipv6 addresses\n// 4) turn: occurring muliple times\nfunction filterIceServers(iceServers, edgeVersion) {\n  var hasTurn = false;\n  iceServers = JSON.parse(JSON.stringify(iceServers));\n  return iceServers.filter(function (server) {\n    if (server && (server.urls || server.url)) {\n      var urls = server.urls || server.url;\n      if (server.url && !server.urls) {\n        utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n      }\n      var isString = typeof urls === 'string';\n      if (isString) {\n        urls = [urls];\n      }\n      urls = urls.filter(function (url) {\n        // filter STUN unconditionally.\n        if (url.indexOf('stun:') === 0) {\n          return false;\n        }\n\n        var validTurn = url.startsWith('turn') && !url.startsWith('turn:[') && url.includes('transport=udp');\n        if (validTurn && !hasTurn) {\n          hasTurn = true;\n          return true;\n        }\n        return validTurn && !hasTurn;\n      });\n\n      delete server.url;\n      server.urls = isString ? urls[0] : urls;\n      return !!urls.length;\n    }\n  });\n}\n\n},{\"../utils\":15}],9:[function(require,module,exports){\n/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.shimGetDisplayMedia = shimGetDisplayMedia;\nfunction shimGetDisplayMedia(window) {\n  if (!('getDisplayMedia' in window.navigator)) {\n    return;\n  }\n  if (!window.navigator.mediaDevices) {\n    return;\n  }\n  if (window.navigator.mediaDevices && 'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia = window.navigator.getDisplayMedia.bind(window.navigator);\n}\n\n},{}],10:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.shimGetUserMedia = shimGetUserMedia;\nfunction shimGetUserMedia(window) {\n  var navigator = window && window.navigator;\n\n  var shimError_ = function shimError_(e) {\n    return {\n      name: { PermissionDeniedError: 'NotAllowedError' }[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint,\n      toString: function toString() {\n        return this.name;\n      }\n    };\n  };\n\n  // getUserMedia error shim.\n  var origGetUserMedia = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);\n  navigator.mediaDevices.getUserMedia = function (c) {\n    return origGetUserMedia(c).catch(function (e) {\n      return Promise.reject(shimError_(e));\n    });\n  };\n}\n\n},{}],11:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.shimGetDisplayMedia = exports.shimGetUserMedia = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _getusermedia = require('./getusermedia');\n\nObject.defineProperty(exports, 'shimGetUserMedia', {\n  enumerable: true,\n  get: function get() {\n    return _getusermedia.shimGetUserMedia;\n  }\n});\n\nvar _getdisplaymedia = require('./getdisplaymedia');\n\nObject.defineProperty(exports, 'shimGetDisplayMedia', {\n  enumerable: true,\n  get: function get() {\n    return _getdisplaymedia.shimGetDisplayMedia;\n  }\n});\nexports.shimOnTrack = shimOnTrack;\nexports.shimPeerConnection = shimPeerConnection;\nexports.shimSenderGetStats = shimSenderGetStats;\nexports.shimReceiverGetStats = shimReceiverGetStats;\nexports.shimRemoveStream = shimRemoveStream;\nexports.shimRTCDataChannel = shimRTCDataChannel;\nexports.shimAddTransceiver = shimAddTransceiver;\nexports.shimCreateOffer = shimCreateOffer;\nexports.shimCreateAnswer = shimCreateAnswer;\n\nvar _utils = require('../utils');\n\nvar utils = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction shimOnTrack(window) {\n  if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCTrackEvent && 'receiver' in window.RTCTrackEvent.prototype && !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get: function get() {\n        return { receiver: this.receiver };\n      }\n    });\n  }\n}\n\nfunction shimPeerConnection(window) {\n  var browserDetails = utils.detectBrowser(window);\n\n  if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) !== 'object' || !(window.RTCPeerConnection || window.mozRTCPeerConnection)) {\n    return; // probably media.peerconnection.enabled=false in about:config\n  }\n  if (!window.RTCPeerConnection && window.mozRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.mozRTCPeerConnection;\n  }\n\n  if (browserDetails.version < 53) {\n    // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate'].forEach(function (method) {\n      var nativeMethod = window.RTCPeerConnection.prototype[method];\n      var methodObj = _defineProperty({}, method, function () {\n        arguments[0] = new (method === 'addIceCandidate' ? window.RTCIceCandidate : window.RTCSessionDescription)(arguments[0]);\n        return nativeMethod.apply(this, arguments);\n      });\n      window.RTCPeerConnection.prototype[method] = methodObj[method];\n    });\n  }\n\n  // support for addIceCandidate(null or undefined)\n  // as well as ignoring {sdpMid, candidate: \"\"}\n  if (browserDetails.version < 68) {\n    var nativeAddIceCandidate = window.RTCPeerConnection.prototype.addIceCandidate;\n    window.RTCPeerConnection.prototype.addIceCandidate = function addIceCandidate() {\n      if (!arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n        return Promise.resolve();\n      }\n      // Firefox 68+ emits and processes {candidate: \"\", ...}, ignore\n      // in older versions.\n      if (arguments[0] && arguments[0].candidate === '') {\n        return Promise.resolve();\n      }\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n  }\n\n  var modernStatsTypes = {\n    inboundrtp: 'inbound-rtp',\n    outboundrtp: 'outbound-rtp',\n    candidatepair: 'candidate-pair',\n    localcandidate: 'local-candidate',\n    remotecandidate: 'remote-candidate'\n  };\n\n  var nativeGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    var _arguments = Array.prototype.slice.call(arguments),\n        selector = _arguments[0],\n        onSucc = _arguments[1],\n        onErr = _arguments[2];\n\n    return nativeGetStats.apply(this, [selector || null]).then(function (stats) {\n      if (browserDetails.version < 53 && !onSucc) {\n        // Shim only promise getStats with spec-hyphens in type names\n        // Leave callback version alone; misc old uses of forEach before Map\n        try {\n          stats.forEach(function (stat) {\n            stat.type = modernStatsTypes[stat.type] || stat.type;\n          });\n        } catch (e) {\n          if (e.name !== 'TypeError') {\n            throw e;\n          }\n          // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\n          stats.forEach(function (stat, i) {\n            stats.set(i, Object.assign({}, stat, {\n              type: modernStatsTypes[stat.type] || stat.type\n            }));\n          });\n        }\n      }\n      return stats;\n    }).then(onSucc, onErr);\n  };\n}\n\nfunction shimSenderGetStats(window) {\n  if (!((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection && window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpSender.prototype) {\n    return;\n  }\n  var origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n  if (origGetSenders) {\n    window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n      var _this = this;\n\n      var senders = origGetSenders.apply(this, []);\n      senders.forEach(function (sender) {\n        return sender._pc = _this;\n      });\n      return senders;\n    };\n  }\n\n  var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  if (origAddTrack) {\n    window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n      var sender = origAddTrack.apply(this, arguments);\n      sender._pc = this;\n      return sender;\n    };\n  }\n  window.RTCRtpSender.prototype.getStats = function getStats() {\n    return this.track ? this._pc.getStats(this.track) : Promise.resolve(new Map());\n  };\n}\n\nfunction shimReceiverGetStats(window) {\n  if (!((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection && window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpReceiver.prototype) {\n    return;\n  }\n  var origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n  if (origGetReceivers) {\n    window.RTCPeerConnection.prototype.getReceivers = function getReceivers() {\n      var _this2 = this;\n\n      var receivers = origGetReceivers.apply(this, []);\n      receivers.forEach(function (receiver) {\n        return receiver._pc = _this2;\n      });\n      return receivers;\n    };\n  }\n  utils.wrapPeerConnectionEvent(window, 'track', function (e) {\n    e.receiver._pc = e.srcElement;\n    return e;\n  });\n  window.RTCRtpReceiver.prototype.getStats = function getStats() {\n    return this._pc.getStats(this.track);\n  };\n}\n\nfunction shimRemoveStream(window) {\n  if (!window.RTCPeerConnection || 'removeStream' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\n    var _this3 = this;\n\n    utils.deprecated('removeStream', 'removeTrack');\n    this.getSenders().forEach(function (sender) {\n      if (sender.track && stream.getTracks().includes(sender.track)) {\n        _this3.removeTrack(sender);\n      }\n    });\n  };\n}\n\nfunction shimRTCDataChannel(window) {\n  // rename DataChannel to RTCDataChannel (native fix in FF60):\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1173851\n  if (window.DataChannel && !window.RTCDataChannel) {\n    window.RTCDataChannel = window.DataChannel;\n  }\n}\n\nfunction shimAddTransceiver(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  var origAddTransceiver = window.RTCPeerConnection.prototype.addTransceiver;\n  if (origAddTransceiver) {\n    window.RTCPeerConnection.prototype.addTransceiver = function addTransceiver() {\n      this.setParametersPromises = [];\n      var initParameters = arguments[1];\n      var shouldPerformCheck = initParameters && 'sendEncodings' in initParameters;\n      if (shouldPerformCheck) {\n        // If sendEncodings params are provided, validate grammar\n        initParameters.sendEncodings.forEach(function (encodingParam) {\n          if ('rid' in encodingParam) {\n            var ridRegex = /^[a-z0-9]{0,16}$/i;\n            if (!ridRegex.test(encodingParam.rid)) {\n              throw new TypeError('Invalid RID value provided.');\n            }\n          }\n          if ('scaleResolutionDownBy' in encodingParam) {\n            if (!(parseFloat(encodingParam.scaleResolutionDownBy) >= 1.0)) {\n              throw new RangeError('scale_resolution_down_by must be >= 1.0');\n            }\n          }\n          if ('maxFramerate' in encodingParam) {\n            if (!(parseFloat(encodingParam.maxFramerate) >= 0)) {\n              throw new RangeError('max_framerate must be >= 0.0');\n            }\n          }\n        });\n      }\n      var transceiver = origAddTransceiver.apply(this, arguments);\n      if (shouldPerformCheck) {\n        // Check if the init options were applied. If not we do this in an\n        // asynchronous way and save the promise reference in a global object.\n        // This is an ugly hack, but at the same time is way more robust than\n        // checking the sender parameters before and after the createOffer\n        // Also note that after the createoffer we are not 100% sure that\n        // the params were asynchronously applied so we might miss the\n        // opportunity to recreate offer.\n        var sender = transceiver.sender;\n\n        var params = sender.getParameters();\n        if (!('encodings' in params)) {\n          params.encodings = initParameters.sendEncodings;\n          this.setParametersPromises.push(sender.setParameters(params).catch(function () {}));\n        }\n      }\n      return transceiver;\n    };\n  }\n}\n\nfunction shimCreateOffer(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  var origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer = function createOffer() {\n    var _this4 = this,\n        _arguments2 = arguments;\n\n    if (this.setParametersPromises && this.setParametersPromises.length) {\n      return Promise.all(this.setParametersPromises).then(function () {\n        return origCreateOffer.apply(_this4, _arguments2);\n      }).finally(function () {\n        _this4.setParametersPromises = [];\n      });\n    }\n    return origCreateOffer.apply(this, arguments);\n  };\n}\n\nfunction shimCreateAnswer(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  var origCreateAnswer = window.RTCPeerConnection.prototype.createAnswer;\n  window.RTCPeerConnection.prototype.createAnswer = function createAnswer() {\n    var _this5 = this,\n        _arguments3 = arguments;\n\n    if (this.setParametersPromises && this.setParametersPromises.length) {\n      return Promise.all(this.setParametersPromises).then(function () {\n        return origCreateAnswer.apply(_this5, _arguments3);\n      }).finally(function () {\n        _this5.setParametersPromises = [];\n      });\n    }\n    return origCreateAnswer.apply(this, arguments);\n  };\n}\n\n},{\"../utils\":15,\"./getdisplaymedia\":12,\"./getusermedia\":13}],12:[function(require,module,exports){\n/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.shimGetDisplayMedia = shimGetDisplayMedia;\nfunction shimGetDisplayMedia(window, preferredMediaSource) {\n  if (window.navigator.mediaDevices && 'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  if (!window.navigator.mediaDevices) {\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia = function getDisplayMedia(constraints) {\n    if (!(constraints && constraints.video)) {\n      var err = new DOMException('getDisplayMedia without video ' + 'constraints is undefined');\n      err.name = 'NotFoundError';\n      // from https://heycam.github.io/webidl/#idl-DOMException-error-names\n      err.code = 8;\n      return Promise.reject(err);\n    }\n    if (constraints.video === true) {\n      constraints.video = { mediaSource: preferredMediaSource };\n    } else {\n      constraints.video.mediaSource = preferredMediaSource;\n    }\n    return window.navigator.mediaDevices.getUserMedia(constraints);\n  };\n}\n\n},{}],13:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.shimGetUserMedia = shimGetUserMedia;\n\nvar _utils = require('../utils');\n\nvar utils = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction shimGetUserMedia(window) {\n  var browserDetails = utils.detectBrowser(window);\n  var navigator = window && window.navigator;\n  var MediaStreamTrack = window && window.MediaStreamTrack;\n\n  navigator.getUserMedia = function (constraints, onSuccess, onError) {\n    // Replace Firefox 44+'s deprecation warning with unprefixed version.\n    utils.deprecated('navigator.getUserMedia', 'navigator.mediaDevices.getUserMedia');\n    navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n  };\n\n  if (!(browserDetails.version > 55 && 'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {\n    var remap = function remap(obj, a, b) {\n      if (a in obj && !(b in obj)) {\n        obj[b] = obj[a];\n        delete obj[a];\n      }\n    };\n\n    var nativeGetUserMedia = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function (c) {\n      if ((typeof c === 'undefined' ? 'undefined' : _typeof(c)) === 'object' && _typeof(c.audio) === 'object') {\n        c = JSON.parse(JSON.stringify(c));\n        remap(c.audio, 'autoGainControl', 'mozAutoGainControl');\n        remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');\n      }\n      return nativeGetUserMedia(c);\n    };\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\n      var nativeGetSettings = MediaStreamTrack.prototype.getSettings;\n      MediaStreamTrack.prototype.getSettings = function () {\n        var obj = nativeGetSettings.apply(this, arguments);\n        remap(obj, 'mozAutoGainControl', 'autoGainControl');\n        remap(obj, 'mozNoiseSuppression', 'noiseSuppression');\n        return obj;\n      };\n    }\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {\n      var nativeApplyConstraints = MediaStreamTrack.prototype.applyConstraints;\n      MediaStreamTrack.prototype.applyConstraints = function (c) {\n        if (this.kind === 'audio' && (typeof c === 'undefined' ? 'undefined' : _typeof(c)) === 'object') {\n          c = JSON.parse(JSON.stringify(c));\n          remap(c, 'autoGainControl', 'mozAutoGainControl');\n          remap(c, 'noiseSuppression', 'mozNoiseSuppression');\n        }\n        return nativeApplyConstraints.apply(this, [c]);\n      };\n    }\n  }\n}\n\n},{\"../utils\":15}],14:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.shimLocalStreamsAPI = shimLocalStreamsAPI;\nexports.shimRemoteStreamsAPI = shimRemoteStreamsAPI;\nexports.shimCallbacksAPI = shimCallbacksAPI;\nexports.shimGetUserMedia = shimGetUserMedia;\nexports.shimConstraints = shimConstraints;\nexports.shimRTCIceServerUrls = shimRTCIceServerUrls;\nexports.shimTrackEventTransceiver = shimTrackEventTransceiver;\nexports.shimCreateOfferLegacy = shimCreateOfferLegacy;\n\nvar _utils = require('../utils');\n\nvar utils = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction shimLocalStreamsAPI(window) {\n  if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getLocalStreams = function getLocalStreams() {\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      return this._localStreams;\n    };\n  }\n  if (!('addStream' in window.RTCPeerConnection.prototype)) {\n    var _addTrack = window.RTCPeerConnection.prototype.addTrack;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      var _this = this;\n\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      if (!this._localStreams.includes(stream)) {\n        this._localStreams.push(stream);\n      }\n      // Try to emulate Chrome's behaviour of adding in audio-video order.\n      // Safari orders by track id.\n      stream.getAudioTracks().forEach(function (track) {\n        return _addTrack.call(_this, track, stream);\n      });\n      stream.getVideoTracks().forEach(function (track) {\n        return _addTrack.call(_this, track, stream);\n      });\n    };\n\n    window.RTCPeerConnection.prototype.addTrack = function addTrack(track) {\n      var stream = arguments[1];\n      if (stream) {\n        if (!this._localStreams) {\n          this._localStreams = [stream];\n        } else if (!this._localStreams.includes(stream)) {\n          this._localStreams.push(stream);\n        }\n      }\n      return _addTrack.apply(this, arguments);\n    };\n  }\n  if (!('removeStream' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\n      var _this2 = this;\n\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      var index = this._localStreams.indexOf(stream);\n      if (index === -1) {\n        return;\n      }\n      this._localStreams.splice(index, 1);\n      var tracks = stream.getTracks();\n      this.getSenders().forEach(function (sender) {\n        if (tracks.includes(sender.track)) {\n          _this2.removeTrack(sender);\n        }\n      });\n    };\n  }\n}\n\nfunction shimRemoteStreamsAPI(window) {\n  if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getRemoteStreams = function getRemoteStreams() {\n      return this._remoteStreams ? this._remoteStreams : [];\n    };\n  }\n  if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n      get: function get() {\n        return this._onaddstream;\n      },\n      set: function set(f) {\n        var _this3 = this;\n\n        if (this._onaddstream) {\n          this.removeEventListener('addstream', this._onaddstream);\n          this.removeEventListener('track', this._onaddstreampoly);\n        }\n        this.addEventListener('addstream', this._onaddstream = f);\n        this.addEventListener('track', this._onaddstreampoly = function (e) {\n          e.streams.forEach(function (stream) {\n            if (!_this3._remoteStreams) {\n              _this3._remoteStreams = [];\n            }\n            if (_this3._remoteStreams.includes(stream)) {\n              return;\n            }\n            _this3._remoteStreams.push(stream);\n            var event = new Event('addstream');\n            event.stream = stream;\n            _this3.dispatchEvent(event);\n          });\n        });\n      }\n    });\n    var origSetRemoteDescription = window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription = function setRemoteDescription() {\n      var pc = this;\n      if (!this._onaddstreampoly) {\n        this.addEventListener('track', this._onaddstreampoly = function (e) {\n          e.streams.forEach(function (stream) {\n            if (!pc._remoteStreams) {\n              pc._remoteStreams = [];\n            }\n            if (pc._remoteStreams.indexOf(stream) >= 0) {\n              return;\n            }\n            pc._remoteStreams.push(stream);\n            var event = new Event('addstream');\n            event.stream = stream;\n            pc.dispatchEvent(event);\n          });\n        });\n      }\n      return origSetRemoteDescription.apply(pc, arguments);\n    };\n  }\n}\n\nfunction shimCallbacksAPI(window) {\n  if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  var prototype = window.RTCPeerConnection.prototype;\n  var origCreateOffer = prototype.createOffer;\n  var origCreateAnswer = prototype.createAnswer;\n  var setLocalDescription = prototype.setLocalDescription;\n  var setRemoteDescription = prototype.setRemoteDescription;\n  var addIceCandidate = prototype.addIceCandidate;\n\n  prototype.createOffer = function createOffer(successCallback, failureCallback) {\n    var options = arguments.length >= 2 ? arguments[2] : arguments[0];\n    var promise = origCreateOffer.apply(this, [options]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n\n  prototype.createAnswer = function createAnswer(successCallback, failureCallback) {\n    var options = arguments.length >= 2 ? arguments[2] : arguments[0];\n    var promise = origCreateAnswer.apply(this, [options]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n\n  var withCallback = function withCallback(description, successCallback, failureCallback) {\n    var promise = setLocalDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setLocalDescription = withCallback;\n\n  withCallback = function withCallback(description, successCallback, failureCallback) {\n    var promise = setRemoteDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setRemoteDescription = withCallback;\n\n  withCallback = function withCallback(candidate, successCallback, failureCallback) {\n    var promise = addIceCandidate.apply(this, [candidate]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.addIceCandidate = withCallback;\n}\n\nfunction shimGetUserMedia(window) {\n  var navigator = window && window.navigator;\n\n  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    // shim not needed in Safari 12.1\n    var mediaDevices = navigator.mediaDevices;\n    var _getUserMedia = mediaDevices.getUserMedia.bind(mediaDevices);\n    navigator.mediaDevices.getUserMedia = function (constraints) {\n      return _getUserMedia(shimConstraints(constraints));\n    };\n  }\n\n  if (!navigator.getUserMedia && navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    navigator.getUserMedia = function getUserMedia(constraints, cb, errcb) {\n      navigator.mediaDevices.getUserMedia(constraints).then(cb, errcb);\n    }.bind(navigator);\n  }\n}\n\nfunction shimConstraints(constraints) {\n  if (constraints && constraints.video !== undefined) {\n    return Object.assign({}, constraints, { video: utils.compactObject(constraints.video) });\n  }\n\n  return constraints;\n}\n\nfunction shimRTCIceServerUrls(window) {\n  // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n  var OrigPeerConnection = window.RTCPeerConnection;\n  window.RTCPeerConnection = function RTCPeerConnection(pcConfig, pcConstraints) {\n    if (pcConfig && pcConfig.iceServers) {\n      var newIceServers = [];\n      for (var i = 0; i < pcConfig.iceServers.length; i++) {\n        var server = pcConfig.iceServers[i];\n        if (!server.hasOwnProperty('urls') && server.hasOwnProperty('url')) {\n          utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n          server = JSON.parse(JSON.stringify(server));\n          server.urls = server.url;\n          delete server.url;\n          newIceServers.push(server);\n        } else {\n          newIceServers.push(pcConfig.iceServers[i]);\n        }\n      }\n      pcConfig.iceServers = newIceServers;\n    }\n    return new OrigPeerConnection(pcConfig, pcConstraints);\n  };\n  window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n  // wrap static methods. Currently just generateCertificate.\n  if ('generateCertificate' in window.RTCPeerConnection) {\n    Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n      get: function get() {\n        return OrigPeerConnection.generateCertificate;\n      }\n    });\n  }\n}\n\nfunction shimTrackEventTransceiver(window) {\n  // Add event.transceiver member over deprecated event.receiver\n  if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCTrackEvent && 'receiver' in window.RTCTrackEvent.prototype && !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get: function get() {\n        return { receiver: this.receiver };\n      }\n    });\n  }\n}\n\nfunction shimCreateOfferLegacy(window) {\n  var origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer = function createOffer(offerOptions) {\n    if (offerOptions) {\n      if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\n        // support bit values\n        offerOptions.offerToReceiveAudio = !!offerOptions.offerToReceiveAudio;\n      }\n      var audioTransceiver = this.getTransceivers().find(function (transceiver) {\n        return transceiver.receiver.track.kind === 'audio';\n      });\n      if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\n        if (audioTransceiver.direction === 'sendrecv') {\n          if (audioTransceiver.setDirection) {\n            audioTransceiver.setDirection('sendonly');\n          } else {\n            audioTransceiver.direction = 'sendonly';\n          }\n        } else if (audioTransceiver.direction === 'recvonly') {\n          if (audioTransceiver.setDirection) {\n            audioTransceiver.setDirection('inactive');\n          } else {\n            audioTransceiver.direction = 'inactive';\n          }\n        }\n      } else if (offerOptions.offerToReceiveAudio === true && !audioTransceiver) {\n        this.addTransceiver('audio');\n      }\n\n      if (typeof offerOptions.offerToReceiveVideo !== 'undefined') {\n        // support bit values\n        offerOptions.offerToReceiveVideo = !!offerOptions.offerToReceiveVideo;\n      }\n      var videoTransceiver = this.getTransceivers().find(function (transceiver) {\n        return transceiver.receiver.track.kind === 'video';\n      });\n      if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\n        if (videoTransceiver.direction === 'sendrecv') {\n          if (videoTransceiver.setDirection) {\n            videoTransceiver.setDirection('sendonly');\n          } else {\n            videoTransceiver.direction = 'sendonly';\n          }\n        } else if (videoTransceiver.direction === 'recvonly') {\n          if (videoTransceiver.setDirection) {\n            videoTransceiver.setDirection('inactive');\n          } else {\n            videoTransceiver.direction = 'inactive';\n          }\n        }\n      } else if (offerOptions.offerToReceiveVideo === true && !videoTransceiver) {\n        this.addTransceiver('video');\n      }\n    }\n    return origCreateOffer.apply(this, arguments);\n  };\n}\n\n},{\"../utils\":15}],15:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.extractVersion = extractVersion;\nexports.wrapPeerConnectionEvent = wrapPeerConnectionEvent;\nexports.disableLog = disableLog;\nexports.disableWarnings = disableWarnings;\nexports.log = log;\nexports.deprecated = deprecated;\nexports.detectBrowser = detectBrowser;\nexports.compactObject = compactObject;\nexports.walkStats = walkStats;\nexports.filterStats = filterStats;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar logDisabled_ = true;\nvar deprecationWarnings_ = true;\n\n/**\n * Extract browser version out of the provided user agent string.\n *\n * @param {!string} uastring userAgent string.\n * @param {!string} expr Regular expression used as match criteria.\n * @param {!number} pos position in the version string to be returned.\n * @return {!number} browser version.\n */\nfunction extractVersion(uastring, expr, pos) {\n  var match = uastring.match(expr);\n  return match && match.length >= pos && parseInt(match[pos], 10);\n}\n\n// Wraps the peerconnection event eventNameToWrap in a function\n// which returns the modified event object (or false to prevent\n// the event).\nfunction wrapPeerConnectionEvent(window, eventNameToWrap, wrapper) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  var proto = window.RTCPeerConnection.prototype;\n  var nativeAddEventListener = proto.addEventListener;\n  proto.addEventListener = function (nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap) {\n      return nativeAddEventListener.apply(this, arguments);\n    }\n    var wrappedCallback = function wrappedCallback(e) {\n      var modifiedEvent = wrapper(e);\n      if (modifiedEvent) {\n        cb(modifiedEvent);\n      }\n    };\n    this._eventMap = this._eventMap || {};\n    this._eventMap[cb] = wrappedCallback;\n    return nativeAddEventListener.apply(this, [nativeEventName, wrappedCallback]);\n  };\n\n  var nativeRemoveEventListener = proto.removeEventListener;\n  proto.removeEventListener = function (nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap || !this._eventMap || !this._eventMap[cb]) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n    var unwrappedCb = this._eventMap[cb];\n    delete this._eventMap[cb];\n    return nativeRemoveEventListener.apply(this, [nativeEventName, unwrappedCb]);\n  };\n\n  Object.defineProperty(proto, 'on' + eventNameToWrap, {\n    get: function get() {\n      return this['_on' + eventNameToWrap];\n    },\n    set: function set(cb) {\n      if (this['_on' + eventNameToWrap]) {\n        this.removeEventListener(eventNameToWrap, this['_on' + eventNameToWrap]);\n        delete this['_on' + eventNameToWrap];\n      }\n      if (cb) {\n        this.addEventListener(eventNameToWrap, this['_on' + eventNameToWrap] = cb);\n      }\n    },\n\n    enumerable: true,\n    configurable: true\n  });\n}\n\nfunction disableLog(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + (typeof bool === 'undefined' ? 'undefined' : _typeof(bool)) + '. Please use a boolean.');\n  }\n  logDisabled_ = bool;\n  return bool ? 'adapter.js logging disabled' : 'adapter.js logging enabled';\n}\n\n/**\n * Disable or enable deprecation warnings\n * @param {!boolean} bool set to true to disable warnings.\n */\nfunction disableWarnings(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + (typeof bool === 'undefined' ? 'undefined' : _typeof(bool)) + '. Please use a boolean.');\n  }\n  deprecationWarnings_ = !bool;\n  return 'adapter.js deprecation warnings ' + (bool ? 'disabled' : 'enabled');\n}\n\nfunction log() {\n  if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object') {\n    if (logDisabled_) {\n      return;\n    }\n    if (typeof console !== 'undefined' && typeof console.log === 'function') {\n      console.log.apply(console, arguments);\n    }\n  }\n}\n\n/**\n * Shows a deprecation warning suggesting the modern and spec-compatible API.\n */\nfunction deprecated(oldMethod, newMethod) {\n  if (!deprecationWarnings_) {\n    return;\n  }\n  console.warn(oldMethod + ' is deprecated, please use ' + newMethod + ' instead.');\n}\n\n/**\n * Browser detector.\n *\n * @return {object} result containing browser and version\n *     properties.\n */\nfunction detectBrowser(window) {\n  var navigator = window.navigator;\n\n  // Returned result object.\n\n  var result = { browser: null, version: null };\n\n  // Fail early if it's not a browser\n  if (typeof window === 'undefined' || !window.navigator) {\n    result.browser = 'Not a browser.';\n    return result;\n  }\n\n  if (navigator.mozGetUserMedia) {\n    // Firefox.\n    result.browser = 'firefox';\n    result.version = extractVersion(navigator.userAgent, /Firefox\\/(\\d+)\\./, 1);\n  } else if (navigator.webkitGetUserMedia || window.isSecureContext === false && window.webkitRTCPeerConnection && !window.RTCIceGatherer) {\n    // Chrome, Chromium, Webview, Opera.\n    // Version matches Chrome/WebRTC version.\n    // Chrome 74 removed webkitGetUserMedia on http as well so we need the\n    // more complicated fallback to webkitRTCPeerConnection.\n    result.browser = 'chrome';\n    result.version = extractVersion(navigator.userAgent, /Chrom(e|ium)\\/(\\d+)\\./, 2);\n  } else if (navigator.mediaDevices && navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) {\n    // Edge.\n    result.browser = 'edge';\n    result.version = extractVersion(navigator.userAgent, /Edge\\/(\\d+).(\\d+)$/, 2);\n  } else if (window.RTCPeerConnection && navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) {\n    // Safari.\n    result.browser = 'safari';\n    result.version = extractVersion(navigator.userAgent, /AppleWebKit\\/(\\d+)\\./, 1);\n    result.supportsUnifiedPlan = window.RTCRtpTransceiver && 'currentDirection' in window.RTCRtpTransceiver.prototype;\n  } else {\n    // Default fallthrough: not supported.\n    result.browser = 'Not a supported browser.';\n    return result;\n  }\n\n  return result;\n}\n\n/**\n * Checks if something is an object.\n *\n * @param {*} val The something you want to check.\n * @return true if val is an object, false otherwise.\n */\nfunction isObject(val) {\n  return Object.prototype.toString.call(val) === '[object Object]';\n}\n\n/**\n * Remove all empty objects and undefined values\n * from a nested object -- an enhanced and vanilla version\n * of Lodash's `compact`.\n */\nfunction compactObject(data) {\n  if (!isObject(data)) {\n    return data;\n  }\n\n  return Object.keys(data).reduce(function (accumulator, key) {\n    var isObj = isObject(data[key]);\n    var value = isObj ? compactObject(data[key]) : data[key];\n    var isEmptyObject = isObj && !Object.keys(value).length;\n    if (value === undefined || isEmptyObject) {\n      return accumulator;\n    }\n    return Object.assign(accumulator, _defineProperty({}, key, value));\n  }, {});\n}\n\n/* iterates the stats graph recursively. */\nfunction walkStats(stats, base, resultSet) {\n  if (!base || resultSet.has(base.id)) {\n    return;\n  }\n  resultSet.set(base.id, base);\n  Object.keys(base).forEach(function (name) {\n    if (name.endsWith('Id')) {\n      walkStats(stats, stats.get(base[name]), resultSet);\n    } else if (name.endsWith('Ids')) {\n      base[name].forEach(function (id) {\n        walkStats(stats, stats.get(id), resultSet);\n      });\n    }\n  });\n}\n\n/* filter getStats for a sender/receiver track. */\nfunction filterStats(result, track, outbound) {\n  var streamStatsType = outbound ? 'outbound-rtp' : 'inbound-rtp';\n  var filteredResult = new Map();\n  if (track === null) {\n    return filteredResult;\n  }\n  var trackStats = [];\n  result.forEach(function (value) {\n    if (value.type === 'track' && value.trackIdentifier === track.id) {\n      trackStats.push(value);\n    }\n  });\n  trackStats.forEach(function (trackStat) {\n    result.forEach(function (stats) {\n      if (stats.type === streamStatsType && stats.trackId === trackStat.id) {\n        walkStats(result, stats, filteredResult);\n      }\n    });\n  });\n  return filteredResult;\n}\n\n},{}],16:[function(require,module,exports){\n/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar SDPUtils = require('sdp');\n\nfunction fixStatsType(stat) {\n  return {\n    inboundrtp: 'inbound-rtp',\n    outboundrtp: 'outbound-rtp',\n    candidatepair: 'candidate-pair',\n    localcandidate: 'local-candidate',\n    remotecandidate: 'remote-candidate'\n  }[stat.type] || stat.type;\n}\n\nfunction writeMediaSection(transceiver, caps, type, stream, dtlsRole) {\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n  // Map ICE parameters (ufrag, pwd) to SDP.\n  sdp += SDPUtils.writeIceParameters(\n      transceiver.iceGatherer.getLocalParameters());\n\n  // Map DTLS parameters to SDP.\n  sdp += SDPUtils.writeDtlsParameters(\n      transceiver.dtlsTransport.getLocalParameters(),\n      type === 'offer' ? 'actpass' : dtlsRole || 'active');\n\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n  if (transceiver.rtpSender && transceiver.rtpReceiver) {\n    sdp += 'a=sendrecv\\r\\n';\n  } else if (transceiver.rtpSender) {\n    sdp += 'a=sendonly\\r\\n';\n  } else if (transceiver.rtpReceiver) {\n    sdp += 'a=recvonly\\r\\n';\n  } else {\n    sdp += 'a=inactive\\r\\n';\n  }\n\n  if (transceiver.rtpSender) {\n    var trackId = transceiver.rtpSender._initialTrackId ||\n        transceiver.rtpSender.track.id;\n    transceiver.rtpSender._initialTrackId = trackId;\n    // spec.\n    var msid = 'msid:' + (stream ? stream.id : '-') + ' ' +\n        trackId + '\\r\\n';\n    sdp += 'a=' + msid;\n    // for Chrome. Legacy should no longer be required.\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' ' + msid;\n\n    // RTX\n    if (transceiver.sendEncodingParameters[0].rtx) {\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n          ' ' + msid;\n      sdp += 'a=ssrc-group:FID ' +\n          transceiver.sendEncodingParameters[0].ssrc + ' ' +\n          transceiver.sendEncodingParameters[0].rtx.ssrc +\n          '\\r\\n';\n    }\n  }\n  // FIXME: this should be written by writeRtpDescription.\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n      ' cname:' + SDPUtils.localCName + '\\r\\n';\n  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\n  }\n  return sdp;\n}\n\n// Edge does not like\n// 1) stun: filtered after 14393 unless ?transport=udp is present\n// 2) turn: that does not have all of turn:host:port?transport=udp\n// 3) turn: with ipv6 addresses\n// 4) turn: occurring muliple times\nfunction filterIceServers(iceServers, edgeVersion) {\n  var hasTurn = false;\n  iceServers = JSON.parse(JSON.stringify(iceServers));\n  return iceServers.filter(function(server) {\n    if (server && (server.urls || server.url)) {\n      var urls = server.urls || server.url;\n      if (server.url && !server.urls) {\n        console.warn('RTCIceServer.url is deprecated! Use urls instead.');\n      }\n      var isString = typeof urls === 'string';\n      if (isString) {\n        urls = [urls];\n      }\n      urls = urls.filter(function(url) {\n        var validTurn = url.indexOf('turn:') === 0 &&\n            url.indexOf('transport=udp') !== -1 &&\n            url.indexOf('turn:[') === -1 &&\n            !hasTurn;\n\n        if (validTurn) {\n          hasTurn = true;\n          return true;\n        }\n        return url.indexOf('stun:') === 0 && edgeVersion >= 14393 &&\n            url.indexOf('?transport=udp') === -1;\n      });\n\n      delete server.url;\n      server.urls = isString ? urls[0] : urls;\n      return !!urls.length;\n    }\n  });\n}\n\n// Determines the intersection of local and remote capabilities.\nfunction getCommonCapabilities(localCapabilities, remoteCapabilities) {\n  var commonCapabilities = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: []\n  };\n\n  var findCodecByPayloadType = function(pt, codecs) {\n    pt = parseInt(pt, 10);\n    for (var i = 0; i < codecs.length; i++) {\n      if (codecs[i].payloadType === pt ||\n          codecs[i].preferredPayloadType === pt) {\n        return codecs[i];\n      }\n    }\n  };\n\n  var rtxCapabilityMatches = function(lRtx, rRtx, lCodecs, rCodecs) {\n    var lCodec = findCodecByPayloadType(lRtx.parameters.apt, lCodecs);\n    var rCodec = findCodecByPayloadType(rRtx.parameters.apt, rCodecs);\n    return lCodec && rCodec &&\n        lCodec.name.toLowerCase() === rCodec.name.toLowerCase();\n  };\n\n  localCapabilities.codecs.forEach(function(lCodec) {\n    for (var i = 0; i < remoteCapabilities.codecs.length; i++) {\n      var rCodec = remoteCapabilities.codecs[i];\n      if (lCodec.name.toLowerCase() === rCodec.name.toLowerCase() &&\n          lCodec.clockRate === rCodec.clockRate) {\n        if (lCodec.name.toLowerCase() === 'rtx' &&\n            lCodec.parameters && rCodec.parameters.apt) {\n          // for RTX we need to find the local rtx that has a apt\n          // which points to the same local codec as the remote one.\n          if (!rtxCapabilityMatches(lCodec, rCodec,\n              localCapabilities.codecs, remoteCapabilities.codecs)) {\n            continue;\n          }\n        }\n        rCodec = JSON.parse(JSON.stringify(rCodec)); // deepcopy\n        // number of channels is the highest common number of channels\n        rCodec.numChannels = Math.min(lCodec.numChannels,\n            rCodec.numChannels);\n        // push rCodec so we reply with offerer payload type\n        commonCapabilities.codecs.push(rCodec);\n\n        // determine common feedback mechanisms\n        rCodec.rtcpFeedback = rCodec.rtcpFeedback.filter(function(fb) {\n          for (var j = 0; j < lCodec.rtcpFeedback.length; j++) {\n            if (lCodec.rtcpFeedback[j].type === fb.type &&\n                lCodec.rtcpFeedback[j].parameter === fb.parameter) {\n              return true;\n            }\n          }\n          return false;\n        });\n        // FIXME: also need to determine .parameters\n        //  see https://github.com/openpeer/ortc/issues/569\n        break;\n      }\n    }\n  });\n\n  localCapabilities.headerExtensions.forEach(function(lHeaderExtension) {\n    for (var i = 0; i < remoteCapabilities.headerExtensions.length;\n         i++) {\n      var rHeaderExtension = remoteCapabilities.headerExtensions[i];\n      if (lHeaderExtension.uri === rHeaderExtension.uri) {\n        commonCapabilities.headerExtensions.push(rHeaderExtension);\n        break;\n      }\n    }\n  });\n\n  // FIXME: fecMechanisms\n  return commonCapabilities;\n}\n\n// is action=setLocalDescription with type allowed in signalingState\nfunction isActionAllowedInSignalingState(action, type, signalingState) {\n  return {\n    offer: {\n      setLocalDescription: ['stable', 'have-local-offer'],\n      setRemoteDescription: ['stable', 'have-remote-offer']\n    },\n    answer: {\n      setLocalDescription: ['have-remote-offer', 'have-local-pranswer'],\n      setRemoteDescription: ['have-local-offer', 'have-remote-pranswer']\n    }\n  }[type][action].indexOf(signalingState) !== -1;\n}\n\nfunction maybeAddCandidate(iceTransport, candidate) {\n  // Edge's internal representation adds some fields therefore\n  // not all field are taken into account.\n  var alreadyAdded = iceTransport.getRemoteCandidates()\n      .find(function(remoteCandidate) {\n        return candidate.foundation === remoteCandidate.foundation &&\n            candidate.ip === remoteCandidate.ip &&\n            candidate.port === remoteCandidate.port &&\n            candidate.priority === remoteCandidate.priority &&\n            candidate.protocol === remoteCandidate.protocol &&\n            candidate.type === remoteCandidate.type;\n      });\n  if (!alreadyAdded) {\n    iceTransport.addRemoteCandidate(candidate);\n  }\n  return !alreadyAdded;\n}\n\n\nfunction makeError(name, description) {\n  var e = new Error(description);\n  e.name = name;\n  // legacy error codes from https://heycam.github.io/webidl/#idl-DOMException-error-names\n  e.code = {\n    NotSupportedError: 9,\n    InvalidStateError: 11,\n    InvalidAccessError: 15,\n    TypeError: undefined,\n    OperationError: undefined\n  }[name];\n  return e;\n}\n\nmodule.exports = function(window, edgeVersion) {\n  // https://w3c.github.io/mediacapture-main/#mediastream\n  // Helper function to add the track to the stream and\n  // dispatch the event ourselves.\n  function addTrackToStreamAndFireEvent(track, stream) {\n    stream.addTrack(track);\n    stream.dispatchEvent(new window.MediaStreamTrackEvent('addtrack',\n        {track: track}));\n  }\n\n  function removeTrackFromStreamAndFireEvent(track, stream) {\n    stream.removeTrack(track);\n    stream.dispatchEvent(new window.MediaStreamTrackEvent('removetrack',\n        {track: track}));\n  }\n\n  function fireAddTrack(pc, track, receiver, streams) {\n    var trackEvent = new Event('track');\n    trackEvent.track = track;\n    trackEvent.receiver = receiver;\n    trackEvent.transceiver = {receiver: receiver};\n    trackEvent.streams = streams;\n    window.setTimeout(function() {\n      pc._dispatchEvent('track', trackEvent);\n    });\n  }\n\n  var RTCPeerConnection = function(config) {\n    var pc = this;\n\n    var _eventTarget = document.createDocumentFragment();\n    ['addEventListener', 'removeEventListener', 'dispatchEvent']\n        .forEach(function(method) {\n          pc[method] = _eventTarget[method].bind(_eventTarget);\n        });\n\n    this.canTrickleIceCandidates = null;\n\n    this.needNegotiation = false;\n\n    this.localStreams = [];\n    this.remoteStreams = [];\n\n    this._localDescription = null;\n    this._remoteDescription = null;\n\n    this.signalingState = 'stable';\n    this.iceConnectionState = 'new';\n    this.connectionState = 'new';\n    this.iceGatheringState = 'new';\n\n    config = JSON.parse(JSON.stringify(config || {}));\n\n    this.usingBundle = config.bundlePolicy === 'max-bundle';\n    if (config.rtcpMuxPolicy === 'negotiate') {\n      throw(makeError('NotSupportedError',\n          'rtcpMuxPolicy \\'negotiate\\' is not supported'));\n    } else if (!config.rtcpMuxPolicy) {\n      config.rtcpMuxPolicy = 'require';\n    }\n\n    switch (config.iceTransportPolicy) {\n      case 'all':\n      case 'relay':\n        break;\n      default:\n        config.iceTransportPolicy = 'all';\n        break;\n    }\n\n    switch (config.bundlePolicy) {\n      case 'balanced':\n      case 'max-compat':\n      case 'max-bundle':\n        break;\n      default:\n        config.bundlePolicy = 'balanced';\n        break;\n    }\n\n    config.iceServers = filterIceServers(config.iceServers || [], edgeVersion);\n\n    this._iceGatherers = [];\n    if (config.iceCandidatePoolSize) {\n      for (var i = config.iceCandidatePoolSize; i > 0; i--) {\n        this._iceGatherers.push(new window.RTCIceGatherer({\n          iceServers: config.iceServers,\n          gatherPolicy: config.iceTransportPolicy\n        }));\n      }\n    } else {\n      config.iceCandidatePoolSize = 0;\n    }\n\n    this._config = config;\n\n    // per-track iceGathers, iceTransports, dtlsTransports, rtpSenders, ...\n    // everything that is needed to describe a SDP m-line.\n    this.transceivers = [];\n\n    this._sdpSessionId = SDPUtils.generateSessionId();\n    this._sdpSessionVersion = 0;\n\n    this._dtlsRole = undefined; // role for a=setup to use in answers.\n\n    this._isClosed = false;\n  };\n\n  Object.defineProperty(RTCPeerConnection.prototype, 'localDescription', {\n    configurable: true,\n    get: function() {\n      return this._localDescription;\n    }\n  });\n  Object.defineProperty(RTCPeerConnection.prototype, 'remoteDescription', {\n    configurable: true,\n    get: function() {\n      return this._remoteDescription;\n    }\n  });\n\n  // set up event handlers on prototype\n  RTCPeerConnection.prototype.onicecandidate = null;\n  RTCPeerConnection.prototype.onaddstream = null;\n  RTCPeerConnection.prototype.ontrack = null;\n  RTCPeerConnection.prototype.onremovestream = null;\n  RTCPeerConnection.prototype.onsignalingstatechange = null;\n  RTCPeerConnection.prototype.oniceconnectionstatechange = null;\n  RTCPeerConnection.prototype.onconnectionstatechange = null;\n  RTCPeerConnection.prototype.onicegatheringstatechange = null;\n  RTCPeerConnection.prototype.onnegotiationneeded = null;\n  RTCPeerConnection.prototype.ondatachannel = null;\n\n  RTCPeerConnection.prototype._dispatchEvent = function(name, event) {\n    if (this._isClosed) {\n      return;\n    }\n    this.dispatchEvent(event);\n    if (typeof this['on' + name] === 'function') {\n      this['on' + name](event);\n    }\n  };\n\n  RTCPeerConnection.prototype._emitGatheringStateChange = function() {\n    var event = new Event('icegatheringstatechange');\n    this._dispatchEvent('icegatheringstatechange', event);\n  };\n\n  RTCPeerConnection.prototype.getConfiguration = function() {\n    return this._config;\n  };\n\n  RTCPeerConnection.prototype.getLocalStreams = function() {\n    return this.localStreams;\n  };\n\n  RTCPeerConnection.prototype.getRemoteStreams = function() {\n    return this.remoteStreams;\n  };\n\n  // internal helper to create a transceiver object.\n  // (which is not yet the same as the WebRTC 1.0 transceiver)\n  RTCPeerConnection.prototype._createTransceiver = function(kind, doNotAdd) {\n    var hasBundleTransport = this.transceivers.length > 0;\n    var transceiver = {\n      track: null,\n      iceGatherer: null,\n      iceTransport: null,\n      dtlsTransport: null,\n      localCapabilities: null,\n      remoteCapabilities: null,\n      rtpSender: null,\n      rtpReceiver: null,\n      kind: kind,\n      mid: null,\n      sendEncodingParameters: null,\n      recvEncodingParameters: null,\n      stream: null,\n      associatedRemoteMediaStreams: [],\n      wantReceive: true\n    };\n    if (this.usingBundle && hasBundleTransport) {\n      transceiver.iceTransport = this.transceivers[0].iceTransport;\n      transceiver.dtlsTransport = this.transceivers[0].dtlsTransport;\n    } else {\n      var transports = this._createIceAndDtlsTransports();\n      transceiver.iceTransport = transports.iceTransport;\n      transceiver.dtlsTransport = transports.dtlsTransport;\n    }\n    if (!doNotAdd) {\n      this.transceivers.push(transceiver);\n    }\n    return transceiver;\n  };\n\n  RTCPeerConnection.prototype.addTrack = function(track, stream) {\n    if (this._isClosed) {\n      throw makeError('InvalidStateError',\n          'Attempted to call addTrack on a closed peerconnection.');\n    }\n\n    var alreadyExists = this.transceivers.find(function(s) {\n      return s.track === track;\n    });\n\n    if (alreadyExists) {\n      throw makeError('InvalidAccessError', 'Track already exists.');\n    }\n\n    var transceiver;\n    for (var i = 0; i < this.transceivers.length; i++) {\n      if (!this.transceivers[i].track &&\n          this.transceivers[i].kind === track.kind) {\n        transceiver = this.transceivers[i];\n      }\n    }\n    if (!transceiver) {\n      transceiver = this._createTransceiver(track.kind);\n    }\n\n    this._maybeFireNegotiationNeeded();\n\n    if (this.localStreams.indexOf(stream) === -1) {\n      this.localStreams.push(stream);\n    }\n\n    transceiver.track = track;\n    transceiver.stream = stream;\n    transceiver.rtpSender = new window.RTCRtpSender(track,\n        transceiver.dtlsTransport);\n    return transceiver.rtpSender;\n  };\n\n  RTCPeerConnection.prototype.addStream = function(stream) {\n    var pc = this;\n    if (edgeVersion >= 15025) {\n      stream.getTracks().forEach(function(track) {\n        pc.addTrack(track, stream);\n      });\n    } else {\n      // Clone is necessary for local demos mostly, attaching directly\n      // to two different senders does not work (build 10547).\n      // Fixed in 15025 (or earlier)\n      var clonedStream = stream.clone();\n      stream.getTracks().forEach(function(track, idx) {\n        var clonedTrack = clonedStream.getTracks()[idx];\n        track.addEventListener('enabled', function(event) {\n          clonedTrack.enabled = event.enabled;\n        });\n      });\n      clonedStream.getTracks().forEach(function(track) {\n        pc.addTrack(track, clonedStream);\n      });\n    }\n  };\n\n  RTCPeerConnection.prototype.removeTrack = function(sender) {\n    if (this._isClosed) {\n      throw makeError('InvalidStateError',\n          'Attempted to call removeTrack on a closed peerconnection.');\n    }\n\n    if (!(sender instanceof window.RTCRtpSender)) {\n      throw new TypeError('Argument 1 of RTCPeerConnection.removeTrack ' +\n          'does not implement interface RTCRtpSender.');\n    }\n\n    var transceiver = this.transceivers.find(function(t) {\n      return t.rtpSender === sender;\n    });\n\n    if (!transceiver) {\n      throw makeError('InvalidAccessError',\n          'Sender was not created by this connection.');\n    }\n    var stream = transceiver.stream;\n\n    transceiver.rtpSender.stop();\n    transceiver.rtpSender = null;\n    transceiver.track = null;\n    transceiver.stream = null;\n\n    // remove the stream from the set of local streams\n    var localStreams = this.transceivers.map(function(t) {\n      return t.stream;\n    });\n    if (localStreams.indexOf(stream) === -1 &&\n        this.localStreams.indexOf(stream) > -1) {\n      this.localStreams.splice(this.localStreams.indexOf(stream), 1);\n    }\n\n    this._maybeFireNegotiationNeeded();\n  };\n\n  RTCPeerConnection.prototype.removeStream = function(stream) {\n    var pc = this;\n    stream.getTracks().forEach(function(track) {\n      var sender = pc.getSenders().find(function(s) {\n        return s.track === track;\n      });\n      if (sender) {\n        pc.removeTrack(sender);\n      }\n    });\n  };\n\n  RTCPeerConnection.prototype.getSenders = function() {\n    return this.transceivers.filter(function(transceiver) {\n      return !!transceiver.rtpSender;\n    })\n    .map(function(transceiver) {\n      return transceiver.rtpSender;\n    });\n  };\n\n  RTCPeerConnection.prototype.getReceivers = function() {\n    return this.transceivers.filter(function(transceiver) {\n      return !!transceiver.rtpReceiver;\n    })\n    .map(function(transceiver) {\n      return transceiver.rtpReceiver;\n    });\n  };\n\n\n  RTCPeerConnection.prototype._createIceGatherer = function(sdpMLineIndex,\n      usingBundle) {\n    var pc = this;\n    if (usingBundle && sdpMLineIndex > 0) {\n      return this.transceivers[0].iceGatherer;\n    } else if (this._iceGatherers.length) {\n      return this._iceGatherers.shift();\n    }\n    var iceGatherer = new window.RTCIceGatherer({\n      iceServers: this._config.iceServers,\n      gatherPolicy: this._config.iceTransportPolicy\n    });\n    Object.defineProperty(iceGatherer, 'state',\n        {value: 'new', writable: true}\n    );\n\n    this.transceivers[sdpMLineIndex].bufferedCandidateEvents = [];\n    this.transceivers[sdpMLineIndex].bufferCandidates = function(event) {\n      var end = !event.candidate || Object.keys(event.candidate).length === 0;\n      // polyfill since RTCIceGatherer.state is not implemented in\n      // Edge 10547 yet.\n      iceGatherer.state = end ? 'completed' : 'gathering';\n      if (pc.transceivers[sdpMLineIndex].bufferedCandidateEvents !== null) {\n        pc.transceivers[sdpMLineIndex].bufferedCandidateEvents.push(event);\n      }\n    };\n    iceGatherer.addEventListener('localcandidate',\n      this.transceivers[sdpMLineIndex].bufferCandidates);\n    return iceGatherer;\n  };\n\n  // start gathering from an RTCIceGatherer.\n  RTCPeerConnection.prototype._gather = function(mid, sdpMLineIndex) {\n    var pc = this;\n    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n    if (iceGatherer.onlocalcandidate) {\n      return;\n    }\n    var bufferedCandidateEvents =\n      this.transceivers[sdpMLineIndex].bufferedCandidateEvents;\n    this.transceivers[sdpMLineIndex].bufferedCandidateEvents = null;\n    iceGatherer.removeEventListener('localcandidate',\n      this.transceivers[sdpMLineIndex].bufferCandidates);\n    iceGatherer.onlocalcandidate = function(evt) {\n      if (pc.usingBundle && sdpMLineIndex > 0) {\n        // if we know that we use bundle we can drop candidates with\n        // dpMLineIndex > 0. If we don't do this then our state gets\n        // confused since we dispose the extra ice gatherer.\n        return;\n      }\n      var event = new Event('icecandidate');\n      event.candidate = {sdpMid: mid, sdpMLineIndex: sdpMLineIndex};\n\n      var cand = evt.candidate;\n      // Edge emits an empty object for RTCIceCandidateComplete\n      var end = !cand || Object.keys(cand).length === 0;\n      if (end) {\n        // polyfill since RTCIceGatherer.state is not implemented in\n        // Edge 10547 yet.\n        if (iceGatherer.state === 'new' || iceGatherer.state === 'gathering') {\n          iceGatherer.state = 'completed';\n        }\n      } else {\n        if (iceGatherer.state === 'new') {\n          iceGatherer.state = 'gathering';\n        }\n        // RTCIceCandidate doesn't have a component, needs to be added\n        cand.component = 1;\n        // also the usernameFragment. TODO: update SDP to take both variants.\n        cand.ufrag = iceGatherer.getLocalParameters().usernameFragment;\n\n        var serializedCandidate = SDPUtils.writeCandidate(cand);\n        event.candidate = Object.assign(event.candidate,\n            SDPUtils.parseCandidate(serializedCandidate));\n\n        event.candidate.candidate = serializedCandidate;\n        event.candidate.toJSON = function() {\n          return {\n            candidate: event.candidate.candidate,\n            sdpMid: event.candidate.sdpMid,\n            sdpMLineIndex: event.candidate.sdpMLineIndex,\n            usernameFragment: event.candidate.usernameFragment\n          };\n        };\n      }\n\n      // update local description.\n      var sections = SDPUtils.getMediaSections(pc._localDescription.sdp);\n      if (!end) {\n        sections[event.candidate.sdpMLineIndex] +=\n            'a=' + event.candidate.candidate + '\\r\\n';\n      } else {\n        sections[event.candidate.sdpMLineIndex] +=\n            'a=end-of-candidates\\r\\n';\n      }\n      pc._localDescription.sdp =\n          SDPUtils.getDescription(pc._localDescription.sdp) +\n          sections.join('');\n      var complete = pc.transceivers.every(function(transceiver) {\n        return transceiver.iceGatherer &&\n            transceiver.iceGatherer.state === 'completed';\n      });\n\n      if (pc.iceGatheringState !== 'gathering') {\n        pc.iceGatheringState = 'gathering';\n        pc._emitGatheringStateChange();\n      }\n\n      // Emit candidate. Also emit null candidate when all gatherers are\n      // complete.\n      if (!end) {\n        pc._dispatchEvent('icecandidate', event);\n      }\n      if (complete) {\n        pc._dispatchEvent('icecandidate', new Event('icecandidate'));\n        pc.iceGatheringState = 'complete';\n        pc._emitGatheringStateChange();\n      }\n    };\n\n    // emit already gathered candidates.\n    window.setTimeout(function() {\n      bufferedCandidateEvents.forEach(function(e) {\n        iceGatherer.onlocalcandidate(e);\n      });\n    }, 0);\n  };\n\n  // Create ICE transport and DTLS transport.\n  RTCPeerConnection.prototype._createIceAndDtlsTransports = function() {\n    var pc = this;\n    var iceTransport = new window.RTCIceTransport(null);\n    iceTransport.onicestatechange = function() {\n      pc._updateIceConnectionState();\n      pc._updateConnectionState();\n    };\n\n    var dtlsTransport = new window.RTCDtlsTransport(iceTransport);\n    dtlsTransport.ondtlsstatechange = function() {\n      pc._updateConnectionState();\n    };\n    dtlsTransport.onerror = function() {\n      // onerror does not set state to failed by itself.\n      Object.defineProperty(dtlsTransport, 'state',\n          {value: 'failed', writable: true});\n      pc._updateConnectionState();\n    };\n\n    return {\n      iceTransport: iceTransport,\n      dtlsTransport: dtlsTransport\n    };\n  };\n\n  // Destroy ICE gatherer, ICE transport and DTLS transport.\n  // Without triggering the callbacks.\n  RTCPeerConnection.prototype._disposeIceAndDtlsTransports = function(\n      sdpMLineIndex) {\n    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n    if (iceGatherer) {\n      delete iceGatherer.onlocalcandidate;\n      delete this.transceivers[sdpMLineIndex].iceGatherer;\n    }\n    var iceTransport = this.transceivers[sdpMLineIndex].iceTransport;\n    if (iceTransport) {\n      delete iceTransport.onicestatechange;\n      delete this.transceivers[sdpMLineIndex].iceTransport;\n    }\n    var dtlsTransport = this.transceivers[sdpMLineIndex].dtlsTransport;\n    if (dtlsTransport) {\n      delete dtlsTransport.ondtlsstatechange;\n      delete dtlsTransport.onerror;\n      delete this.transceivers[sdpMLineIndex].dtlsTransport;\n    }\n  };\n\n  // Start the RTP Sender and Receiver for a transceiver.\n  RTCPeerConnection.prototype._transceive = function(transceiver,\n      send, recv) {\n    var params = getCommonCapabilities(transceiver.localCapabilities,\n        transceiver.remoteCapabilities);\n    if (send && transceiver.rtpSender) {\n      params.encodings = transceiver.sendEncodingParameters;\n      params.rtcp = {\n        cname: SDPUtils.localCName,\n        compound: transceiver.rtcpParameters.compound\n      };\n      if (transceiver.recvEncodingParameters.length) {\n        params.rtcp.ssrc = transceiver.recvEncodingParameters[0].ssrc;\n      }\n      transceiver.rtpSender.send(params);\n    }\n    if (recv && transceiver.rtpReceiver && params.codecs.length > 0) {\n      // remove RTX field in Edge 14942\n      if (transceiver.kind === 'video'\n          && transceiver.recvEncodingParameters\n          && edgeVersion < 15019) {\n        transceiver.recvEncodingParameters.forEach(function(p) {\n          delete p.rtx;\n        });\n      }\n      if (transceiver.recvEncodingParameters.length) {\n        params.encodings = transceiver.recvEncodingParameters;\n      } else {\n        params.encodings = [{}];\n      }\n      params.rtcp = {\n        compound: transceiver.rtcpParameters.compound\n      };\n      if (transceiver.rtcpParameters.cname) {\n        params.rtcp.cname = transceiver.rtcpParameters.cname;\n      }\n      if (transceiver.sendEncodingParameters.length) {\n        params.rtcp.ssrc = transceiver.sendEncodingParameters[0].ssrc;\n      }\n      transceiver.rtpReceiver.receive(params);\n    }\n  };\n\n  RTCPeerConnection.prototype.setLocalDescription = function(description) {\n    var pc = this;\n\n    // Note: pranswer is not supported.\n    if (['offer', 'answer'].indexOf(description.type) === -1) {\n      return Promise.reject(makeError('TypeError',\n          'Unsupported type \"' + description.type + '\"'));\n    }\n\n    if (!isActionAllowedInSignalingState('setLocalDescription',\n        description.type, pc.signalingState) || pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not set local ' + description.type +\n          ' in state ' + pc.signalingState));\n    }\n\n    var sections;\n    var sessionpart;\n    if (description.type === 'offer') {\n      // VERY limited support for SDP munging. Limited to:\n      // * changing the order of codecs\n      sections = SDPUtils.splitSections(description.sdp);\n      sessionpart = sections.shift();\n      sections.forEach(function(mediaSection, sdpMLineIndex) {\n        var caps = SDPUtils.parseRtpParameters(mediaSection);\n        pc.transceivers[sdpMLineIndex].localCapabilities = caps;\n      });\n\n      pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n        pc._gather(transceiver.mid, sdpMLineIndex);\n      });\n    } else if (description.type === 'answer') {\n      sections = SDPUtils.splitSections(pc._remoteDescription.sdp);\n      sessionpart = sections.shift();\n      var isIceLite = SDPUtils.matchPrefix(sessionpart,\n          'a=ice-lite').length > 0;\n      sections.forEach(function(mediaSection, sdpMLineIndex) {\n        var transceiver = pc.transceivers[sdpMLineIndex];\n        var iceGatherer = transceiver.iceGatherer;\n        var iceTransport = transceiver.iceTransport;\n        var dtlsTransport = transceiver.dtlsTransport;\n        var localCapabilities = transceiver.localCapabilities;\n        var remoteCapabilities = transceiver.remoteCapabilities;\n\n        // treat bundle-only as not-rejected.\n        var rejected = SDPUtils.isRejected(mediaSection) &&\n            SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\n\n        if (!rejected && !transceiver.rejected) {\n          var remoteIceParameters = SDPUtils.getIceParameters(\n              mediaSection, sessionpart);\n          var remoteDtlsParameters = SDPUtils.getDtlsParameters(\n              mediaSection, sessionpart);\n          if (isIceLite) {\n            remoteDtlsParameters.role = 'server';\n          }\n\n          if (!pc.usingBundle || sdpMLineIndex === 0) {\n            pc._gather(transceiver.mid, sdpMLineIndex);\n            if (iceTransport.state === 'new') {\n              iceTransport.start(iceGatherer, remoteIceParameters,\n                  isIceLite ? 'controlling' : 'controlled');\n            }\n            if (dtlsTransport.state === 'new') {\n              dtlsTransport.start(remoteDtlsParameters);\n            }\n          }\n\n          // Calculate intersection of capabilities.\n          var params = getCommonCapabilities(localCapabilities,\n              remoteCapabilities);\n\n          // Start the RTCRtpSender. The RTCRtpReceiver for this\n          // transceiver has already been started in setRemoteDescription.\n          pc._transceive(transceiver,\n              params.codecs.length > 0,\n              false);\n        }\n      });\n    }\n\n    pc._localDescription = {\n      type: description.type,\n      sdp: description.sdp\n    };\n    if (description.type === 'offer') {\n      pc._updateSignalingState('have-local-offer');\n    } else {\n      pc._updateSignalingState('stable');\n    }\n\n    return Promise.resolve();\n  };\n\n  RTCPeerConnection.prototype.setRemoteDescription = function(description) {\n    var pc = this;\n\n    // Note: pranswer is not supported.\n    if (['offer', 'answer'].indexOf(description.type) === -1) {\n      return Promise.reject(makeError('TypeError',\n          'Unsupported type \"' + description.type + '\"'));\n    }\n\n    if (!isActionAllowedInSignalingState('setRemoteDescription',\n        description.type, pc.signalingState) || pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not set remote ' + description.type +\n          ' in state ' + pc.signalingState));\n    }\n\n    var streams = {};\n    pc.remoteStreams.forEach(function(stream) {\n      streams[stream.id] = stream;\n    });\n    var receiverList = [];\n    var sections = SDPUtils.splitSections(description.sdp);\n    var sessionpart = sections.shift();\n    var isIceLite = SDPUtils.matchPrefix(sessionpart,\n        'a=ice-lite').length > 0;\n    var usingBundle = SDPUtils.matchPrefix(sessionpart,\n        'a=group:BUNDLE ').length > 0;\n    pc.usingBundle = usingBundle;\n    var iceOptions = SDPUtils.matchPrefix(sessionpart,\n        'a=ice-options:')[0];\n    if (iceOptions) {\n      pc.canTrickleIceCandidates = iceOptions.substr(14).split(' ')\n          .indexOf('trickle') >= 0;\n    } else {\n      pc.canTrickleIceCandidates = false;\n    }\n\n    sections.forEach(function(mediaSection, sdpMLineIndex) {\n      var lines = SDPUtils.splitLines(mediaSection);\n      var kind = SDPUtils.getKind(mediaSection);\n      // treat bundle-only as not-rejected.\n      var rejected = SDPUtils.isRejected(mediaSection) &&\n          SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\n      var protocol = lines[0].substr(2).split(' ')[2];\n\n      var direction = SDPUtils.getDirection(mediaSection, sessionpart);\n      var remoteMsid = SDPUtils.parseMsid(mediaSection);\n\n      var mid = SDPUtils.getMid(mediaSection) || SDPUtils.generateIdentifier();\n\n      // Reject datachannels which are not implemented yet.\n      if (rejected || (kind === 'application' && (protocol === 'DTLS/SCTP' ||\n          protocol === 'UDP/DTLS/SCTP'))) {\n        // TODO: this is dangerous in the case where a non-rejected m-line\n        //     becomes rejected.\n        pc.transceivers[sdpMLineIndex] = {\n          mid: mid,\n          kind: kind,\n          protocol: protocol,\n          rejected: true\n        };\n        return;\n      }\n\n      if (!rejected && pc.transceivers[sdpMLineIndex] &&\n          pc.transceivers[sdpMLineIndex].rejected) {\n        // recycle a rejected transceiver.\n        pc.transceivers[sdpMLineIndex] = pc._createTransceiver(kind, true);\n      }\n\n      var transceiver;\n      var iceGatherer;\n      var iceTransport;\n      var dtlsTransport;\n      var rtpReceiver;\n      var sendEncodingParameters;\n      var recvEncodingParameters;\n      var localCapabilities;\n\n      var track;\n      // FIXME: ensure the mediaSection has rtcp-mux set.\n      var remoteCapabilities = SDPUtils.parseRtpParameters(mediaSection);\n      var remoteIceParameters;\n      var remoteDtlsParameters;\n      if (!rejected) {\n        remoteIceParameters = SDPUtils.getIceParameters(mediaSection,\n            sessionpart);\n        remoteDtlsParameters = SDPUtils.getDtlsParameters(mediaSection,\n            sessionpart);\n        remoteDtlsParameters.role = 'client';\n      }\n      recvEncodingParameters =\n          SDPUtils.parseRtpEncodingParameters(mediaSection);\n\n      var rtcpParameters = SDPUtils.parseRtcpParameters(mediaSection);\n\n      var isComplete = SDPUtils.matchPrefix(mediaSection,\n          'a=end-of-candidates', sessionpart).length > 0;\n      var cands = SDPUtils.matchPrefix(mediaSection, 'a=candidate:')\n          .map(function(cand) {\n            return SDPUtils.parseCandidate(cand);\n          })\n          .filter(function(cand) {\n            return cand.component === 1;\n          });\n\n      // Check if we can use BUNDLE and dispose transports.\n      if ((description.type === 'offer' || description.type === 'answer') &&\n          !rejected && usingBundle && sdpMLineIndex > 0 &&\n          pc.transceivers[sdpMLineIndex]) {\n        pc._disposeIceAndDtlsTransports(sdpMLineIndex);\n        pc.transceivers[sdpMLineIndex].iceGatherer =\n            pc.transceivers[0].iceGatherer;\n        pc.transceivers[sdpMLineIndex].iceTransport =\n            pc.transceivers[0].iceTransport;\n        pc.transceivers[sdpMLineIndex].dtlsTransport =\n            pc.transceivers[0].dtlsTransport;\n        if (pc.transceivers[sdpMLineIndex].rtpSender) {\n          pc.transceivers[sdpMLineIndex].rtpSender.setTransport(\n              pc.transceivers[0].dtlsTransport);\n        }\n        if (pc.transceivers[sdpMLineIndex].rtpReceiver) {\n          pc.transceivers[sdpMLineIndex].rtpReceiver.setTransport(\n              pc.transceivers[0].dtlsTransport);\n        }\n      }\n      if (description.type === 'offer' && !rejected) {\n        transceiver = pc.transceivers[sdpMLineIndex] ||\n            pc._createTransceiver(kind);\n        transceiver.mid = mid;\n\n        if (!transceiver.iceGatherer) {\n          transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex,\n              usingBundle);\n        }\n\n        if (cands.length && transceiver.iceTransport.state === 'new') {\n          if (isComplete && (!usingBundle || sdpMLineIndex === 0)) {\n            transceiver.iceTransport.setRemoteCandidates(cands);\n          } else {\n            cands.forEach(function(candidate) {\n              maybeAddCandidate(transceiver.iceTransport, candidate);\n            });\n          }\n        }\n\n        localCapabilities = window.RTCRtpReceiver.getCapabilities(kind);\n\n        // filter RTX until additional stuff needed for RTX is implemented\n        // in adapter.js\n        if (edgeVersion < 15019) {\n          localCapabilities.codecs = localCapabilities.codecs.filter(\n              function(codec) {\n                return codec.name !== 'rtx';\n              });\n        }\n\n        sendEncodingParameters = transceiver.sendEncodingParameters || [{\n          ssrc: (2 * sdpMLineIndex + 2) * 1001\n        }];\n\n        // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n        var isNewTrack = false;\n        if (direction === 'sendrecv' || direction === 'sendonly') {\n          isNewTrack = !transceiver.rtpReceiver;\n          rtpReceiver = transceiver.rtpReceiver ||\n              new window.RTCRtpReceiver(transceiver.dtlsTransport, kind);\n\n          if (isNewTrack) {\n            var stream;\n            track = rtpReceiver.track;\n            // FIXME: does not work with Plan B.\n            if (remoteMsid && remoteMsid.stream === '-') {\n              // no-op. a stream id of '-' means: no associated stream.\n            } else if (remoteMsid) {\n              if (!streams[remoteMsid.stream]) {\n                streams[remoteMsid.stream] = new window.MediaStream();\n                Object.defineProperty(streams[remoteMsid.stream], 'id', {\n                  get: function() {\n                    return remoteMsid.stream;\n                  }\n                });\n              }\n              Object.defineProperty(track, 'id', {\n                get: function() {\n                  return remoteMsid.track;\n                }\n              });\n              stream = streams[remoteMsid.stream];\n            } else {\n              if (!streams.default) {\n                streams.default = new window.MediaStream();\n              }\n              stream = streams.default;\n            }\n            if (stream) {\n              addTrackToStreamAndFireEvent(track, stream);\n              transceiver.associatedRemoteMediaStreams.push(stream);\n            }\n            receiverList.push([track, rtpReceiver, stream]);\n          }\n        } else if (transceiver.rtpReceiver && transceiver.rtpReceiver.track) {\n          transceiver.associatedRemoteMediaStreams.forEach(function(s) {\n            var nativeTrack = s.getTracks().find(function(t) {\n              return t.id === transceiver.rtpReceiver.track.id;\n            });\n            if (nativeTrack) {\n              removeTrackFromStreamAndFireEvent(nativeTrack, s);\n            }\n          });\n          transceiver.associatedRemoteMediaStreams = [];\n        }\n\n        transceiver.localCapabilities = localCapabilities;\n        transceiver.remoteCapabilities = remoteCapabilities;\n        transceiver.rtpReceiver = rtpReceiver;\n        transceiver.rtcpParameters = rtcpParameters;\n        transceiver.sendEncodingParameters = sendEncodingParameters;\n        transceiver.recvEncodingParameters = recvEncodingParameters;\n\n        // Start the RTCRtpReceiver now. The RTPSender is started in\n        // setLocalDescription.\n        pc._transceive(pc.transceivers[sdpMLineIndex],\n            false,\n            isNewTrack);\n      } else if (description.type === 'answer' && !rejected) {\n        transceiver = pc.transceivers[sdpMLineIndex];\n        iceGatherer = transceiver.iceGatherer;\n        iceTransport = transceiver.iceTransport;\n        dtlsTransport = transceiver.dtlsTransport;\n        rtpReceiver = transceiver.rtpReceiver;\n        sendEncodingParameters = transceiver.sendEncodingParameters;\n        localCapabilities = transceiver.localCapabilities;\n\n        pc.transceivers[sdpMLineIndex].recvEncodingParameters =\n            recvEncodingParameters;\n        pc.transceivers[sdpMLineIndex].remoteCapabilities =\n            remoteCapabilities;\n        pc.transceivers[sdpMLineIndex].rtcpParameters = rtcpParameters;\n\n        if (cands.length && iceTransport.state === 'new') {\n          if ((isIceLite || isComplete) &&\n              (!usingBundle || sdpMLineIndex === 0)) {\n            iceTransport.setRemoteCandidates(cands);\n          } else {\n            cands.forEach(function(candidate) {\n              maybeAddCandidate(transceiver.iceTransport, candidate);\n            });\n          }\n        }\n\n        if (!usingBundle || sdpMLineIndex === 0) {\n          if (iceTransport.state === 'new') {\n            iceTransport.start(iceGatherer, remoteIceParameters,\n                'controlling');\n          }\n          if (dtlsTransport.state === 'new') {\n            dtlsTransport.start(remoteDtlsParameters);\n          }\n        }\n\n        // If the offer contained RTX but the answer did not,\n        // remove RTX from sendEncodingParameters.\n        var commonCapabilities = getCommonCapabilities(\n          transceiver.localCapabilities,\n          transceiver.remoteCapabilities);\n\n        var hasRtx = commonCapabilities.codecs.filter(function(c) {\n          return c.name.toLowerCase() === 'rtx';\n        }).length;\n        if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\n          delete transceiver.sendEncodingParameters[0].rtx;\n        }\n\n        pc._transceive(transceiver,\n            direction === 'sendrecv' || direction === 'recvonly',\n            direction === 'sendrecv' || direction === 'sendonly');\n\n        // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n        if (rtpReceiver &&\n            (direction === 'sendrecv' || direction === 'sendonly')) {\n          track = rtpReceiver.track;\n          if (remoteMsid) {\n            if (!streams[remoteMsid.stream]) {\n              streams[remoteMsid.stream] = new window.MediaStream();\n            }\n            addTrackToStreamAndFireEvent(track, streams[remoteMsid.stream]);\n            receiverList.push([track, rtpReceiver, streams[remoteMsid.stream]]);\n          } else {\n            if (!streams.default) {\n              streams.default = new window.MediaStream();\n            }\n            addTrackToStreamAndFireEvent(track, streams.default);\n            receiverList.push([track, rtpReceiver, streams.default]);\n          }\n        } else {\n          // FIXME: actually the receiver should be created later.\n          delete transceiver.rtpReceiver;\n        }\n      }\n    });\n\n    if (pc._dtlsRole === undefined) {\n      pc._dtlsRole = description.type === 'offer' ? 'active' : 'passive';\n    }\n\n    pc._remoteDescription = {\n      type: description.type,\n      sdp: description.sdp\n    };\n    if (description.type === 'offer') {\n      pc._updateSignalingState('have-remote-offer');\n    } else {\n      pc._updateSignalingState('stable');\n    }\n    Object.keys(streams).forEach(function(sid) {\n      var stream = streams[sid];\n      if (stream.getTracks().length) {\n        if (pc.remoteStreams.indexOf(stream) === -1) {\n          pc.remoteStreams.push(stream);\n          var event = new Event('addstream');\n          event.stream = stream;\n          window.setTimeout(function() {\n            pc._dispatchEvent('addstream', event);\n          });\n        }\n\n        receiverList.forEach(function(item) {\n          var track = item[0];\n          var receiver = item[1];\n          if (stream.id !== item[2].id) {\n            return;\n          }\n          fireAddTrack(pc, track, receiver, [stream]);\n        });\n      }\n    });\n    receiverList.forEach(function(item) {\n      if (item[2]) {\n        return;\n      }\n      fireAddTrack(pc, item[0], item[1], []);\n    });\n\n    // check whether addIceCandidate({}) was called within four seconds after\n    // setRemoteDescription.\n    window.setTimeout(function() {\n      if (!(pc && pc.transceivers)) {\n        return;\n      }\n      pc.transceivers.forEach(function(transceiver) {\n        if (transceiver.iceTransport &&\n            transceiver.iceTransport.state === 'new' &&\n            transceiver.iceTransport.getRemoteCandidates().length > 0) {\n          console.warn('Timeout for addRemoteCandidate. Consider sending ' +\n              'an end-of-candidates notification');\n          transceiver.iceTransport.addRemoteCandidate({});\n        }\n      });\n    }, 4000);\n\n    return Promise.resolve();\n  };\n\n  RTCPeerConnection.prototype.close = function() {\n    this.transceivers.forEach(function(transceiver) {\n      /* not yet\n      if (transceiver.iceGatherer) {\n        transceiver.iceGatherer.close();\n      }\n      */\n      if (transceiver.iceTransport) {\n        transceiver.iceTransport.stop();\n      }\n      if (transceiver.dtlsTransport) {\n        transceiver.dtlsTransport.stop();\n      }\n      if (transceiver.rtpSender) {\n        transceiver.rtpSender.stop();\n      }\n      if (transceiver.rtpReceiver) {\n        transceiver.rtpReceiver.stop();\n      }\n    });\n    // FIXME: clean up tracks, local streams, remote streams, etc\n    this._isClosed = true;\n    this._updateSignalingState('closed');\n  };\n\n  // Update the signaling state.\n  RTCPeerConnection.prototype._updateSignalingState = function(newState) {\n    this.signalingState = newState;\n    var event = new Event('signalingstatechange');\n    this._dispatchEvent('signalingstatechange', event);\n  };\n\n  // Determine whether to fire the negotiationneeded event.\n  RTCPeerConnection.prototype._maybeFireNegotiationNeeded = function() {\n    var pc = this;\n    if (this.signalingState !== 'stable' || this.needNegotiation === true) {\n      return;\n    }\n    this.needNegotiation = true;\n    window.setTimeout(function() {\n      if (pc.needNegotiation) {\n        pc.needNegotiation = false;\n        var event = new Event('negotiationneeded');\n        pc._dispatchEvent('negotiationneeded', event);\n      }\n    }, 0);\n  };\n\n  // Update the ice connection state.\n  RTCPeerConnection.prototype._updateIceConnectionState = function() {\n    var newState;\n    var states = {\n      'new': 0,\n      closed: 0,\n      checking: 0,\n      connected: 0,\n      completed: 0,\n      disconnected: 0,\n      failed: 0\n    };\n    this.transceivers.forEach(function(transceiver) {\n      if (transceiver.iceTransport && !transceiver.rejected) {\n        states[transceiver.iceTransport.state]++;\n      }\n    });\n\n    newState = 'new';\n    if (states.failed > 0) {\n      newState = 'failed';\n    } else if (states.checking > 0) {\n      newState = 'checking';\n    } else if (states.disconnected > 0) {\n      newState = 'disconnected';\n    } else if (states.new > 0) {\n      newState = 'new';\n    } else if (states.connected > 0) {\n      newState = 'connected';\n    } else if (states.completed > 0) {\n      newState = 'completed';\n    }\n\n    if (newState !== this.iceConnectionState) {\n      this.iceConnectionState = newState;\n      var event = new Event('iceconnectionstatechange');\n      this._dispatchEvent('iceconnectionstatechange', event);\n    }\n  };\n\n  // Update the connection state.\n  RTCPeerConnection.prototype._updateConnectionState = function() {\n    var newState;\n    var states = {\n      'new': 0,\n      closed: 0,\n      connecting: 0,\n      connected: 0,\n      completed: 0,\n      disconnected: 0,\n      failed: 0\n    };\n    this.transceivers.forEach(function(transceiver) {\n      if (transceiver.iceTransport && transceiver.dtlsTransport &&\n          !transceiver.rejected) {\n        states[transceiver.iceTransport.state]++;\n        states[transceiver.dtlsTransport.state]++;\n      }\n    });\n    // ICETransport.completed and connected are the same for this purpose.\n    states.connected += states.completed;\n\n    newState = 'new';\n    if (states.failed > 0) {\n      newState = 'failed';\n    } else if (states.connecting > 0) {\n      newState = 'connecting';\n    } else if (states.disconnected > 0) {\n      newState = 'disconnected';\n    } else if (states.new > 0) {\n      newState = 'new';\n    } else if (states.connected > 0) {\n      newState = 'connected';\n    }\n\n    if (newState !== this.connectionState) {\n      this.connectionState = newState;\n      var event = new Event('connectionstatechange');\n      this._dispatchEvent('connectionstatechange', event);\n    }\n  };\n\n  RTCPeerConnection.prototype.createOffer = function() {\n    var pc = this;\n\n    if (pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not call createOffer after close'));\n    }\n\n    var numAudioTracks = pc.transceivers.filter(function(t) {\n      return t.kind === 'audio';\n    }).length;\n    var numVideoTracks = pc.transceivers.filter(function(t) {\n      return t.kind === 'video';\n    }).length;\n\n    // Determine number of audio and video tracks we need to send/recv.\n    var offerOptions = arguments[0];\n    if (offerOptions) {\n      // Reject Chrome legacy constraints.\n      if (offerOptions.mandatory || offerOptions.optional) {\n        throw new TypeError(\n            'Legacy mandatory/optional constraints not supported.');\n      }\n      if (offerOptions.offerToReceiveAudio !== undefined) {\n        if (offerOptions.offerToReceiveAudio === true) {\n          numAudioTracks = 1;\n        } else if (offerOptions.offerToReceiveAudio === false) {\n          numAudioTracks = 0;\n        } else {\n          numAudioTracks = offerOptions.offerToReceiveAudio;\n        }\n      }\n      if (offerOptions.offerToReceiveVideo !== undefined) {\n        if (offerOptions.offerToReceiveVideo === true) {\n          numVideoTracks = 1;\n        } else if (offerOptions.offerToReceiveVideo === false) {\n          numVideoTracks = 0;\n        } else {\n          numVideoTracks = offerOptions.offerToReceiveVideo;\n        }\n      }\n    }\n\n    pc.transceivers.forEach(function(transceiver) {\n      if (transceiver.kind === 'audio') {\n        numAudioTracks--;\n        if (numAudioTracks < 0) {\n          transceiver.wantReceive = false;\n        }\n      } else if (transceiver.kind === 'video') {\n        numVideoTracks--;\n        if (numVideoTracks < 0) {\n          transceiver.wantReceive = false;\n        }\n      }\n    });\n\n    // Create M-lines for recvonly streams.\n    while (numAudioTracks > 0 || numVideoTracks > 0) {\n      if (numAudioTracks > 0) {\n        pc._createTransceiver('audio');\n        numAudioTracks--;\n      }\n      if (numVideoTracks > 0) {\n        pc._createTransceiver('video');\n        numVideoTracks--;\n      }\n    }\n\n    var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,\n        pc._sdpSessionVersion++);\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      // For each track, create an ice gatherer, ice transport,\n      // dtls transport, potentially rtpsender and rtpreceiver.\n      var track = transceiver.track;\n      var kind = transceiver.kind;\n      var mid = transceiver.mid || SDPUtils.generateIdentifier();\n      transceiver.mid = mid;\n\n      if (!transceiver.iceGatherer) {\n        transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex,\n            pc.usingBundle);\n      }\n\n      var localCapabilities = window.RTCRtpSender.getCapabilities(kind);\n      // filter RTX until additional stuff needed for RTX is implemented\n      // in adapter.js\n      if (edgeVersion < 15019) {\n        localCapabilities.codecs = localCapabilities.codecs.filter(\n            function(codec) {\n              return codec.name !== 'rtx';\n            });\n      }\n      localCapabilities.codecs.forEach(function(codec) {\n        // work around https://bugs.chromium.org/p/webrtc/issues/detail?id=6552\n        // by adding level-asymmetry-allowed=1\n        if (codec.name === 'H264' &&\n            codec.parameters['level-asymmetry-allowed'] === undefined) {\n          codec.parameters['level-asymmetry-allowed'] = '1';\n        }\n\n        // for subsequent offers, we might have to re-use the payload\n        // type of the last offer.\n        if (transceiver.remoteCapabilities &&\n            transceiver.remoteCapabilities.codecs) {\n          transceiver.remoteCapabilities.codecs.forEach(function(remoteCodec) {\n            if (codec.name.toLowerCase() === remoteCodec.name.toLowerCase() &&\n                codec.clockRate === remoteCodec.clockRate) {\n              codec.preferredPayloadType = remoteCodec.payloadType;\n            }\n          });\n        }\n      });\n      localCapabilities.headerExtensions.forEach(function(hdrExt) {\n        var remoteExtensions = transceiver.remoteCapabilities &&\n            transceiver.remoteCapabilities.headerExtensions || [];\n        remoteExtensions.forEach(function(rHdrExt) {\n          if (hdrExt.uri === rHdrExt.uri) {\n            hdrExt.id = rHdrExt.id;\n          }\n        });\n      });\n\n      // generate an ssrc now, to be used later in rtpSender.send\n      var sendEncodingParameters = transceiver.sendEncodingParameters || [{\n        ssrc: (2 * sdpMLineIndex + 1) * 1001\n      }];\n      if (track) {\n        // add RTX\n        if (edgeVersion >= 15019 && kind === 'video' &&\n            !sendEncodingParameters[0].rtx) {\n          sendEncodingParameters[0].rtx = {\n            ssrc: sendEncodingParameters[0].ssrc + 1\n          };\n        }\n      }\n\n      if (transceiver.wantReceive) {\n        transceiver.rtpReceiver = new window.RTCRtpReceiver(\n            transceiver.dtlsTransport, kind);\n      }\n\n      transceiver.localCapabilities = localCapabilities;\n      transceiver.sendEncodingParameters = sendEncodingParameters;\n    });\n\n    // always offer BUNDLE and dispose on return if not supported.\n    if (pc._config.bundlePolicy !== 'max-compat') {\n      sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function(t) {\n        return t.mid;\n      }).join(' ') + '\\r\\n';\n    }\n    sdp += 'a=ice-options:trickle\\r\\n';\n\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      sdp += writeMediaSection(transceiver, transceiver.localCapabilities,\n          'offer', transceiver.stream, pc._dtlsRole);\n      sdp += 'a=rtcp-rsize\\r\\n';\n\n      if (transceiver.iceGatherer && pc.iceGatheringState !== 'new' &&\n          (sdpMLineIndex === 0 || !pc.usingBundle)) {\n        transceiver.iceGatherer.getLocalCandidates().forEach(function(cand) {\n          cand.component = 1;\n          sdp += 'a=' + SDPUtils.writeCandidate(cand) + '\\r\\n';\n        });\n\n        if (transceiver.iceGatherer.state === 'completed') {\n          sdp += 'a=end-of-candidates\\r\\n';\n        }\n      }\n    });\n\n    var desc = new window.RTCSessionDescription({\n      type: 'offer',\n      sdp: sdp\n    });\n    return Promise.resolve(desc);\n  };\n\n  RTCPeerConnection.prototype.createAnswer = function() {\n    var pc = this;\n\n    if (pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not call createAnswer after close'));\n    }\n\n    if (!(pc.signalingState === 'have-remote-offer' ||\n        pc.signalingState === 'have-local-pranswer')) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not call createAnswer in signalingState ' + pc.signalingState));\n    }\n\n    var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,\n        pc._sdpSessionVersion++);\n    if (pc.usingBundle) {\n      sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function(t) {\n        return t.mid;\n      }).join(' ') + '\\r\\n';\n    }\n    sdp += 'a=ice-options:trickle\\r\\n';\n\n    var mediaSectionsInOffer = SDPUtils.getMediaSections(\n        pc._remoteDescription.sdp).length;\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      if (sdpMLineIndex + 1 > mediaSectionsInOffer) {\n        return;\n      }\n      if (transceiver.rejected) {\n        if (transceiver.kind === 'application') {\n          if (transceiver.protocol === 'DTLS/SCTP') { // legacy fmt\n            sdp += 'm=application 0 DTLS/SCTP 5000\\r\\n';\n          } else {\n            sdp += 'm=application 0 ' + transceiver.protocol +\n                ' webrtc-datachannel\\r\\n';\n          }\n        } else if (transceiver.kind === 'audio') {\n          sdp += 'm=audio 0 UDP/TLS/RTP/SAVPF 0\\r\\n' +\n              'a=rtpmap:0 PCMU/8000\\r\\n';\n        } else if (transceiver.kind === 'video') {\n          sdp += 'm=video 0 UDP/TLS/RTP/SAVPF 120\\r\\n' +\n              'a=rtpmap:120 VP8/90000\\r\\n';\n        }\n        sdp += 'c=IN IP4 0.0.0.0\\r\\n' +\n            'a=inactive\\r\\n' +\n            'a=mid:' + transceiver.mid + '\\r\\n';\n        return;\n      }\n\n      // FIXME: look at direction.\n      if (transceiver.stream) {\n        var localTrack;\n        if (transceiver.kind === 'audio') {\n          localTrack = transceiver.stream.getAudioTracks()[0];\n        } else if (transceiver.kind === 'video') {\n          localTrack = transceiver.stream.getVideoTracks()[0];\n        }\n        if (localTrack) {\n          // add RTX\n          if (edgeVersion >= 15019 && transceiver.kind === 'video' &&\n              !transceiver.sendEncodingParameters[0].rtx) {\n            transceiver.sendEncodingParameters[0].rtx = {\n              ssrc: transceiver.sendEncodingParameters[0].ssrc + 1\n            };\n          }\n        }\n      }\n\n      // Calculate intersection of capabilities.\n      var commonCapabilities = getCommonCapabilities(\n          transceiver.localCapabilities,\n          transceiver.remoteCapabilities);\n\n      var hasRtx = commonCapabilities.codecs.filter(function(c) {\n        return c.name.toLowerCase() === 'rtx';\n      }).length;\n      if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\n        delete transceiver.sendEncodingParameters[0].rtx;\n      }\n\n      sdp += writeMediaSection(transceiver, commonCapabilities,\n          'answer', transceiver.stream, pc._dtlsRole);\n      if (transceiver.rtcpParameters &&\n          transceiver.rtcpParameters.reducedSize) {\n        sdp += 'a=rtcp-rsize\\r\\n';\n      }\n    });\n\n    var desc = new window.RTCSessionDescription({\n      type: 'answer',\n      sdp: sdp\n    });\n    return Promise.resolve(desc);\n  };\n\n  RTCPeerConnection.prototype.addIceCandidate = function(candidate) {\n    var pc = this;\n    var sections;\n    if (candidate && !(candidate.sdpMLineIndex !== undefined ||\n        candidate.sdpMid)) {\n      return Promise.reject(new TypeError('sdpMLineIndex or sdpMid required'));\n    }\n\n    // TODO: needs to go into ops queue.\n    return new Promise(function(resolve, reject) {\n      if (!pc._remoteDescription) {\n        return reject(makeError('InvalidStateError',\n            'Can not add ICE candidate without a remote description'));\n      } else if (!candidate || candidate.candidate === '') {\n        for (var j = 0; j < pc.transceivers.length; j++) {\n          if (pc.transceivers[j].rejected) {\n            continue;\n          }\n          pc.transceivers[j].iceTransport.addRemoteCandidate({});\n          sections = SDPUtils.getMediaSections(pc._remoteDescription.sdp);\n          sections[j] += 'a=end-of-candidates\\r\\n';\n          pc._remoteDescription.sdp =\n              SDPUtils.getDescription(pc._remoteDescription.sdp) +\n              sections.join('');\n          if (pc.usingBundle) {\n            break;\n          }\n        }\n      } else {\n        var sdpMLineIndex = candidate.sdpMLineIndex;\n        if (candidate.sdpMid) {\n          for (var i = 0; i < pc.transceivers.length; i++) {\n            if (pc.transceivers[i].mid === candidate.sdpMid) {\n              sdpMLineIndex = i;\n              break;\n            }\n          }\n        }\n        var transceiver = pc.transceivers[sdpMLineIndex];\n        if (transceiver) {\n          if (transceiver.rejected) {\n            return resolve();\n          }\n          var cand = Object.keys(candidate.candidate).length > 0 ?\n              SDPUtils.parseCandidate(candidate.candidate) : {};\n          // Ignore Chrome's invalid candidates since Edge does not like them.\n          if (cand.protocol === 'tcp' && (cand.port === 0 || cand.port === 9)) {\n            return resolve();\n          }\n          // Ignore RTCP candidates, we assume RTCP-MUX.\n          if (cand.component && cand.component !== 1) {\n            return resolve();\n          }\n          // when using bundle, avoid adding candidates to the wrong\n          // ice transport. And avoid adding candidates added in the SDP.\n          if (sdpMLineIndex === 0 || (sdpMLineIndex > 0 &&\n              transceiver.iceTransport !== pc.transceivers[0].iceTransport)) {\n            if (!maybeAddCandidate(transceiver.iceTransport, cand)) {\n              return reject(makeError('OperationError',\n                  'Can not add ICE candidate'));\n            }\n          }\n\n          // update the remoteDescription.\n          var candidateString = candidate.candidate.trim();\n          if (candidateString.indexOf('a=') === 0) {\n            candidateString = candidateString.substr(2);\n          }\n          sections = SDPUtils.getMediaSections(pc._remoteDescription.sdp);\n          sections[sdpMLineIndex] += 'a=' +\n              (cand.type ? candidateString : 'end-of-candidates')\n              + '\\r\\n';\n          pc._remoteDescription.sdp =\n              SDPUtils.getDescription(pc._remoteDescription.sdp) +\n              sections.join('');\n        } else {\n          return reject(makeError('OperationError',\n              'Can not add ICE candidate'));\n        }\n      }\n      resolve();\n    });\n  };\n\n  RTCPeerConnection.prototype.getStats = function(selector) {\n    if (selector && selector instanceof window.MediaStreamTrack) {\n      var senderOrReceiver = null;\n      this.transceivers.forEach(function(transceiver) {\n        if (transceiver.rtpSender &&\n            transceiver.rtpSender.track === selector) {\n          senderOrReceiver = transceiver.rtpSender;\n        } else if (transceiver.rtpReceiver &&\n            transceiver.rtpReceiver.track === selector) {\n          senderOrReceiver = transceiver.rtpReceiver;\n        }\n      });\n      if (!senderOrReceiver) {\n        throw makeError('InvalidAccessError', 'Invalid selector.');\n      }\n      return senderOrReceiver.getStats();\n    }\n\n    var promises = [];\n    this.transceivers.forEach(function(transceiver) {\n      ['rtpSender', 'rtpReceiver', 'iceGatherer', 'iceTransport',\n          'dtlsTransport'].forEach(function(method) {\n            if (transceiver[method]) {\n              promises.push(transceiver[method].getStats());\n            }\n          });\n    });\n    return Promise.all(promises).then(function(allStats) {\n      var results = new Map();\n      allStats.forEach(function(stats) {\n        stats.forEach(function(stat) {\n          results.set(stat.id, stat);\n        });\n      });\n      return results;\n    });\n  };\n\n  // fix low-level stat names and return Map instead of object.\n  var ortcObjects = ['RTCRtpSender', 'RTCRtpReceiver', 'RTCIceGatherer',\n    'RTCIceTransport', 'RTCDtlsTransport'];\n  ortcObjects.forEach(function(ortcObjectName) {\n    var obj = window[ortcObjectName];\n    if (obj && obj.prototype && obj.prototype.getStats) {\n      var nativeGetstats = obj.prototype.getStats;\n      obj.prototype.getStats = function() {\n        return nativeGetstats.apply(this)\n        .then(function(nativeStats) {\n          var mapStats = new Map();\n          Object.keys(nativeStats).forEach(function(id) {\n            nativeStats[id].type = fixStatsType(nativeStats[id]);\n            mapStats.set(id, nativeStats[id]);\n          });\n          return mapStats;\n        });\n      };\n    }\n  });\n\n  // legacy callback shims. Should be moved to adapter.js some days.\n  var methods = ['createOffer', 'createAnswer'];\n  methods.forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[0] === 'function' ||\n          typeof args[1] === 'function') { // legacy\n        return nativeMethod.apply(this, [arguments[2]])\n        .then(function(description) {\n          if (typeof args[0] === 'function') {\n            args[0].apply(null, [description]);\n          }\n        }, function(error) {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null, [error]);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  methods = ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate'];\n  methods.forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[1] === 'function' ||\n          typeof args[2] === 'function') { // legacy\n        return nativeMethod.apply(this, arguments)\n        .then(function() {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null);\n          }\n        }, function(error) {\n          if (typeof args[2] === 'function') {\n            args[2].apply(null, [error]);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  // getStats is special. It doesn't have a spec legacy method yet we support\n  // getStats(something, cb) without error callbacks.\n  ['getStats'].forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[1] === 'function') {\n        return nativeMethod.apply(this, arguments)\n        .then(function() {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  return RTCPeerConnection;\n};\n\n},{\"sdp\":17}],17:[function(require,module,exports){\n/* eslint-env node */\n'use strict';\n\n// SDP helpers.\nvar SDPUtils = {};\n\n// Generate an alphanumeric identifier for cname or mids.\n// TODO: use UUIDs instead? https://gist.github.com/jed/982883\nSDPUtils.generateIdentifier = function() {\n  return Math.random().toString(36).substr(2, 10);\n};\n\n// The RTCP CNAME used by all peerconnections from the same JS.\nSDPUtils.localCName = SDPUtils.generateIdentifier();\n\n// Splits SDP into lines, dealing with both CRLF and LF.\nSDPUtils.splitLines = function(blob) {\n  return blob.trim().split('\\n').map(function(line) {\n    return line.trim();\n  });\n};\n// Splits SDP into sessionpart and mediasections. Ensures CRLF.\nSDPUtils.splitSections = function(blob) {\n  var parts = blob.split('\\nm=');\n  return parts.map(function(part, index) {\n    return (index > 0 ? 'm=' + part : part).trim() + '\\r\\n';\n  });\n};\n\n// returns the session description.\nSDPUtils.getDescription = function(blob) {\n  var sections = SDPUtils.splitSections(blob);\n  return sections && sections[0];\n};\n\n// returns the individual media sections.\nSDPUtils.getMediaSections = function(blob) {\n  var sections = SDPUtils.splitSections(blob);\n  sections.shift();\n  return sections;\n};\n\n// Returns lines that start with a certain prefix.\nSDPUtils.matchPrefix = function(blob, prefix) {\n  return SDPUtils.splitLines(blob).filter(function(line) {\n    return line.indexOf(prefix) === 0;\n  });\n};\n\n// Parses an ICE candidate line. Sample input:\n// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n// rport 55996\"\nSDPUtils.parseCandidate = function(line) {\n  var parts;\n  // Parse both variants.\n  if (line.indexOf('a=candidate:') === 0) {\n    parts = line.substring(12).split(' ');\n  } else {\n    parts = line.substring(10).split(' ');\n  }\n\n  var candidate = {\n    foundation: parts[0],\n    component: parseInt(parts[1], 10),\n    protocol: parts[2].toLowerCase(),\n    priority: parseInt(parts[3], 10),\n    ip: parts[4],\n    address: parts[4], // address is an alias for ip.\n    port: parseInt(parts[5], 10),\n    // skip parts[6] == 'typ'\n    type: parts[7]\n  };\n\n  for (var i = 8; i < parts.length; i += 2) {\n    switch (parts[i]) {\n      case 'raddr':\n        candidate.relatedAddress = parts[i + 1];\n        break;\n      case 'rport':\n        candidate.relatedPort = parseInt(parts[i + 1], 10);\n        break;\n      case 'tcptype':\n        candidate.tcpType = parts[i + 1];\n        break;\n      case 'ufrag':\n        candidate.ufrag = parts[i + 1]; // for backward compability.\n        candidate.usernameFragment = parts[i + 1];\n        break;\n      default: // extension handling, in particular ufrag\n        candidate[parts[i]] = parts[i + 1];\n        break;\n    }\n  }\n  return candidate;\n};\n\n// Translates a candidate object into SDP candidate attribute.\nSDPUtils.writeCandidate = function(candidate) {\n  var sdp = [];\n  sdp.push(candidate.foundation);\n  sdp.push(candidate.component);\n  sdp.push(candidate.protocol.toUpperCase());\n  sdp.push(candidate.priority);\n  sdp.push(candidate.address || candidate.ip);\n  sdp.push(candidate.port);\n\n  var type = candidate.type;\n  sdp.push('typ');\n  sdp.push(type);\n  if (type !== 'host' && candidate.relatedAddress &&\n      candidate.relatedPort) {\n    sdp.push('raddr');\n    sdp.push(candidate.relatedAddress);\n    sdp.push('rport');\n    sdp.push(candidate.relatedPort);\n  }\n  if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n    sdp.push('tcptype');\n    sdp.push(candidate.tcpType);\n  }\n  if (candidate.usernameFragment || candidate.ufrag) {\n    sdp.push('ufrag');\n    sdp.push(candidate.usernameFragment || candidate.ufrag);\n  }\n  return 'candidate:' + sdp.join(' ');\n};\n\n// Parses an ice-options line, returns an array of option tags.\n// a=ice-options:foo bar\nSDPUtils.parseIceOptions = function(line) {\n  return line.substr(14).split(' ');\n};\n\n// Parses an rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n// a=rtpmap:111 opus/48000/2\nSDPUtils.parseRtpMap = function(line) {\n  var parts = line.substr(9).split(' ');\n  var parsed = {\n    payloadType: parseInt(parts.shift(), 10) // was: id\n  };\n\n  parts = parts[0].split('/');\n\n  parsed.name = parts[0];\n  parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n  parsed.channels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n  // legacy alias, got renamed back to channels in ORTC.\n  parsed.numChannels = parsed.channels;\n  return parsed;\n};\n\n// Generate an a=rtpmap line from RTCRtpCodecCapability or\n// RTCRtpCodecParameters.\nSDPUtils.writeRtpMap = function(codec) {\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  var channels = codec.channels || codec.numChannels || 1;\n  return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\n      (channels !== 1 ? '/' + channels : '') + '\\r\\n';\n};\n\n// Parses an a=extmap line (headerextension from RFC 5285). Sample input:\n// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n// a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset\nSDPUtils.parseExtmap = function(line) {\n  var parts = line.substr(9).split(' ');\n  return {\n    id: parseInt(parts[0], 10),\n    direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',\n    uri: parts[1]\n  };\n};\n\n// Generates a=extmap line from RTCRtpHeaderExtensionParameters or\n// RTCRtpHeaderExtension.\nSDPUtils.writeExtmap = function(headerExtension) {\n  return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\n      (headerExtension.direction && headerExtension.direction !== 'sendrecv'\n        ? '/' + headerExtension.direction\n        : '') +\n      ' ' + headerExtension.uri + '\\r\\n';\n};\n\n// Parses an ftmp line, returns dictionary. Sample input:\n// a=fmtp:96 vbr=on;cng=on\n// Also deals with vbr=on; cng=on\nSDPUtils.parseFmtp = function(line) {\n  var parsed = {};\n  var kv;\n  var parts = line.substr(line.indexOf(' ') + 1).split(';');\n  for (var j = 0; j < parts.length; j++) {\n    kv = parts[j].trim().split('=');\n    parsed[kv[0].trim()] = kv[1];\n  }\n  return parsed;\n};\n\n// Generates an a=ftmp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeFmtp = function(codec) {\n  var line = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.parameters && Object.keys(codec.parameters).length) {\n    var params = [];\n    Object.keys(codec.parameters).forEach(function(param) {\n      if (codec.parameters[param]) {\n        params.push(param + '=' + codec.parameters[param]);\n      } else {\n        params.push(param);\n      }\n    });\n    line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n  }\n  return line;\n};\n\n// Parses an rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n// a=rtcp-fb:98 nack rpsi\nSDPUtils.parseRtcpFb = function(line) {\n  var parts = line.substr(line.indexOf(' ') + 1).split(' ');\n  return {\n    type: parts.shift(),\n    parameter: parts.join(' ')\n  };\n};\n// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeRtcpFb = function(codec) {\n  var lines = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n    // FIXME: special handling for trr-int?\n    codec.rtcpFeedback.forEach(function(fb) {\n      lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +\n      (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +\n          '\\r\\n';\n    });\n  }\n  return lines;\n};\n\n// Parses an RFC 5576 ssrc media attribute. Sample input:\n// a=ssrc:3735928559 cname:something\nSDPUtils.parseSsrcMedia = function(line) {\n  var sp = line.indexOf(' ');\n  var parts = {\n    ssrc: parseInt(line.substr(7, sp - 7), 10)\n  };\n  var colon = line.indexOf(':', sp);\n  if (colon > -1) {\n    parts.attribute = line.substr(sp + 1, colon - sp - 1);\n    parts.value = line.substr(colon + 1);\n  } else {\n    parts.attribute = line.substr(sp + 1);\n  }\n  return parts;\n};\n\nSDPUtils.parseSsrcGroup = function(line) {\n  var parts = line.substr(13).split(' ');\n  return {\n    semantics: parts.shift(),\n    ssrcs: parts.map(function(ssrc) {\n      return parseInt(ssrc, 10);\n    })\n  };\n};\n\n// Extracts the MID (RFC 5888) from a media section.\n// returns the MID or undefined if no mid line was found.\nSDPUtils.getMid = function(mediaSection) {\n  var mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];\n  if (mid) {\n    return mid.substr(6);\n  }\n};\n\nSDPUtils.parseFingerprint = function(line) {\n  var parts = line.substr(14).split(' ');\n  return {\n    algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.\n    value: parts[1]\n  };\n};\n\n// Extracts DTLS parameters from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the fingerprint line as input. See also getIceParameters.\nSDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=fingerprint:');\n  // Note: a=setup line is ignored since we use the 'auto' role.\n  // Note2: 'algorithm' is not case sensitive except in Edge.\n  return {\n    role: 'auto',\n    fingerprints: lines.map(SDPUtils.parseFingerprint)\n  };\n};\n\n// Serializes DTLS parameters to SDP.\nSDPUtils.writeDtlsParameters = function(params, setupType) {\n  var sdp = 'a=setup:' + setupType + '\\r\\n';\n  params.fingerprints.forEach(function(fp) {\n    sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n  });\n  return sdp;\n};\n// Parses ICE information from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the ice-ufrag and ice-pwd lines as input.\nSDPUtils.getIceParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  // Search in session part, too.\n  lines = lines.concat(SDPUtils.splitLines(sessionpart));\n  var iceParameters = {\n    usernameFragment: lines.filter(function(line) {\n      return line.indexOf('a=ice-ufrag:') === 0;\n    })[0].substr(12),\n    password: lines.filter(function(line) {\n      return line.indexOf('a=ice-pwd:') === 0;\n    })[0].substr(10)\n  };\n  return iceParameters;\n};\n\n// Serializes ICE parameters to SDP.\nSDPUtils.writeIceParameters = function(params) {\n  return 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\n      'a=ice-pwd:' + params.password + '\\r\\n';\n};\n\n// Parses the SDP media section and returns RTCRtpParameters.\nSDPUtils.parseRtpParameters = function(mediaSection) {\n  var description = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: [],\n    rtcp: []\n  };\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  for (var i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\n    var pt = mline[i];\n    var rtpmapline = SDPUtils.matchPrefix(\n      mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n    if (rtpmapline) {\n      var codec = SDPUtils.parseRtpMap(rtpmapline);\n      var fmtps = SDPUtils.matchPrefix(\n        mediaSection, 'a=fmtp:' + pt + ' ');\n      // Only the first a=fmtp:<pt> is considered.\n      codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n      codec.rtcpFeedback = SDPUtils.matchPrefix(\n        mediaSection, 'a=rtcp-fb:' + pt + ' ')\n        .map(SDPUtils.parseRtcpFb);\n      description.codecs.push(codec);\n      // parse FEC mechanisms from rtpmap lines.\n      switch (codec.name.toUpperCase()) {\n        case 'RED':\n        case 'ULPFEC':\n          description.fecMechanisms.push(codec.name.toUpperCase());\n          break;\n        default: // only RED and ULPFEC are recognized as FEC mechanisms.\n          break;\n      }\n    }\n  }\n  SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(function(line) {\n    description.headerExtensions.push(SDPUtils.parseExtmap(line));\n  });\n  // FIXME: parse rtcp.\n  return description;\n};\n\n// Generates parts of the SDP media section describing the capabilities /\n// parameters.\nSDPUtils.writeRtpDescription = function(kind, caps) {\n  var sdp = '';\n\n  // Build the mline.\n  sdp += 'm=' + kind + ' ';\n  sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n  sdp += ' UDP/TLS/RTP/SAVPF ';\n  sdp += caps.codecs.map(function(codec) {\n    if (codec.preferredPayloadType !== undefined) {\n      return codec.preferredPayloadType;\n    }\n    return codec.payloadType;\n  }).join(' ') + '\\r\\n';\n\n  sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n  sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n  // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n  caps.codecs.forEach(function(codec) {\n    sdp += SDPUtils.writeRtpMap(codec);\n    sdp += SDPUtils.writeFmtp(codec);\n    sdp += SDPUtils.writeRtcpFb(codec);\n  });\n  var maxptime = 0;\n  caps.codecs.forEach(function(codec) {\n    if (codec.maxptime > maxptime) {\n      maxptime = codec.maxptime;\n    }\n  });\n  if (maxptime > 0) {\n    sdp += 'a=maxptime:' + maxptime + '\\r\\n';\n  }\n  sdp += 'a=rtcp-mux\\r\\n';\n\n  if (caps.headerExtensions) {\n    caps.headerExtensions.forEach(function(extension) {\n      sdp += SDPUtils.writeExtmap(extension);\n    });\n  }\n  // FIXME: write fecMechanisms.\n  return sdp;\n};\n\n// Parses the SDP media section and returns an array of\n// RTCRtpEncodingParameters.\nSDPUtils.parseRtpEncodingParameters = function(mediaSection) {\n  var encodingParameters = [];\n  var description = SDPUtils.parseRtpParameters(mediaSection);\n  var hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n  var hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n  // filter a=ssrc:... cname:, ignore PlanB-msid\n  var ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(function(line) {\n      return SDPUtils.parseSsrcMedia(line);\n    })\n    .filter(function(parts) {\n      return parts.attribute === 'cname';\n    });\n  var primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n  var secondarySsrc;\n\n  var flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\n    .map(function(line) {\n      var parts = line.substr(17).split(' ');\n      return parts.map(function(part) {\n        return parseInt(part, 10);\n      });\n    });\n  if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n    secondarySsrc = flows[0][1];\n  }\n\n  description.codecs.forEach(function(codec) {\n    if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n      var encParam = {\n        ssrc: primarySsrc,\n        codecPayloadType: parseInt(codec.parameters.apt, 10)\n      };\n      if (primarySsrc && secondarySsrc) {\n        encParam.rtx = {ssrc: secondarySsrc};\n      }\n      encodingParameters.push(encParam);\n      if (hasRed) {\n        encParam = JSON.parse(JSON.stringify(encParam));\n        encParam.fec = {\n          ssrc: primarySsrc,\n          mechanism: hasUlpfec ? 'red+ulpfec' : 'red'\n        };\n        encodingParameters.push(encParam);\n      }\n    }\n  });\n  if (encodingParameters.length === 0 && primarySsrc) {\n    encodingParameters.push({\n      ssrc: primarySsrc\n    });\n  }\n\n  // we support both b=AS and b=TIAS but interpret AS as TIAS.\n  var bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n  if (bandwidth.length) {\n    if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n      bandwidth = parseInt(bandwidth[0].substr(7), 10);\n    } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n      // use formula from JSEP to convert b=AS to TIAS value.\n      bandwidth = parseInt(bandwidth[0].substr(5), 10) * 1000 * 0.95\n          - (50 * 40 * 8);\n    } else {\n      bandwidth = undefined;\n    }\n    encodingParameters.forEach(function(params) {\n      params.maxBitrate = bandwidth;\n    });\n  }\n  return encodingParameters;\n};\n\n// parses http://draft.ortc.org/#rtcrtcpparameters*\nSDPUtils.parseRtcpParameters = function(mediaSection) {\n  var rtcpParameters = {};\n\n  // Gets the first SSRC. Note tha with RTX there might be multiple\n  // SSRCs.\n  var remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(function(line) {\n      return SDPUtils.parseSsrcMedia(line);\n    })\n    .filter(function(obj) {\n      return obj.attribute === 'cname';\n    })[0];\n  if (remoteSsrc) {\n    rtcpParameters.cname = remoteSsrc.value;\n    rtcpParameters.ssrc = remoteSsrc.ssrc;\n  }\n\n  // Edge uses the compound attribute instead of reducedSize\n  // compound is !reducedSize\n  var rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');\n  rtcpParameters.reducedSize = rsize.length > 0;\n  rtcpParameters.compound = rsize.length === 0;\n\n  // parses the rtcp-mux attrbute.\n  // Note that Edge does not support unmuxed RTCP.\n  var mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');\n  rtcpParameters.mux = mux.length > 0;\n\n  return rtcpParameters;\n};\n\n// parses either a=msid: or a=ssrc:... msid lines and returns\n// the id of the MediaStream and MediaStreamTrack.\nSDPUtils.parseMsid = function(mediaSection) {\n  var parts;\n  var spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');\n  if (spec.length === 1) {\n    parts = spec[0].substr(7).split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n  var planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(function(line) {\n      return SDPUtils.parseSsrcMedia(line);\n    })\n    .filter(function(msidParts) {\n      return msidParts.attribute === 'msid';\n    });\n  if (planB.length > 0) {\n    parts = planB[0].value.split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n};\n\n// SCTP\n// parses draft-ietf-mmusic-sctp-sdp-26 first and falls back\n// to draft-ietf-mmusic-sctp-sdp-05\nSDPUtils.parseSctpDescription = function(mediaSection) {\n  var mline = SDPUtils.parseMLine(mediaSection);\n  var maxSizeLine = SDPUtils.matchPrefix(mediaSection, 'a=max-message-size:');\n  var maxMessageSize;\n  if (maxSizeLine.length > 0) {\n    maxMessageSize = parseInt(maxSizeLine[0].substr(19), 10);\n  }\n  if (isNaN(maxMessageSize)) {\n    maxMessageSize = 65536;\n  }\n  var sctpPort = SDPUtils.matchPrefix(mediaSection, 'a=sctp-port:');\n  if (sctpPort.length > 0) {\n    return {\n      port: parseInt(sctpPort[0].substr(12), 10),\n      protocol: mline.fmt,\n      maxMessageSize: maxMessageSize\n    };\n  }\n  var sctpMapLines = SDPUtils.matchPrefix(mediaSection, 'a=sctpmap:');\n  if (sctpMapLines.length > 0) {\n    var parts = SDPUtils.matchPrefix(mediaSection, 'a=sctpmap:')[0]\n      .substr(10)\n      .split(' ');\n    return {\n      port: parseInt(parts[0], 10),\n      protocol: parts[1],\n      maxMessageSize: maxMessageSize\n    };\n  }\n};\n\n// SCTP\n// outputs the draft-ietf-mmusic-sctp-sdp-26 version that all browsers\n// support by now receiving in this format, unless we originally parsed\n// as the draft-ietf-mmusic-sctp-sdp-05 format (indicated by the m-line\n// protocol of DTLS/SCTP -- without UDP/ or TCP/)\nSDPUtils.writeSctpDescription = function(media, sctp) {\n  var output = [];\n  if (media.protocol !== 'DTLS/SCTP') {\n    output = [\n      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.protocol + '\\r\\n',\n      'c=IN IP4 0.0.0.0\\r\\n',\n      'a=sctp-port:' + sctp.port + '\\r\\n'\n    ];\n  } else {\n    output = [\n      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.port + '\\r\\n',\n      'c=IN IP4 0.0.0.0\\r\\n',\n      'a=sctpmap:' + sctp.port + ' ' + sctp.protocol + ' 65535\\r\\n'\n    ];\n  }\n  if (sctp.maxMessageSize !== undefined) {\n    output.push('a=max-message-size:' + sctp.maxMessageSize + '\\r\\n');\n  }\n  return output.join('');\n};\n\n// Generate a session ID for SDP.\n// https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-20#section-5.2.1\n// recommends using a cryptographically random +ve 64-bit value\n// but right now this should be acceptable and within the right range\nSDPUtils.generateSessionId = function() {\n  return Math.random().toString().substr(2, 21);\n};\n\n// Write boilder plate for start of SDP\n// sessId argument is optional - if not supplied it will\n// be generated randomly\n// sessVersion is optional and defaults to 2\n// sessUser is optional and defaults to 'thisisadapterortc'\nSDPUtils.writeSessionBoilerplate = function(sessId, sessVer, sessUser) {\n  var sessionId;\n  var version = sessVer !== undefined ? sessVer : 2;\n  if (sessId) {\n    sessionId = sessId;\n  } else {\n    sessionId = SDPUtils.generateSessionId();\n  }\n  var user = sessUser || 'thisisadapterortc';\n  // FIXME: sess-id should be an NTP timestamp.\n  return 'v=0\\r\\n' +\n      'o=' + user + ' ' + sessionId + ' ' + version +\n        ' IN IP4 127.0.0.1\\r\\n' +\n      's=-\\r\\n' +\n      't=0 0\\r\\n';\n};\n\nSDPUtils.writeMediaSection = function(transceiver, caps, type, stream) {\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n  // Map ICE parameters (ufrag, pwd) to SDP.\n  sdp += SDPUtils.writeIceParameters(\n    transceiver.iceGatherer.getLocalParameters());\n\n  // Map DTLS parameters to SDP.\n  sdp += SDPUtils.writeDtlsParameters(\n    transceiver.dtlsTransport.getLocalParameters(),\n    type === 'offer' ? 'actpass' : 'active');\n\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n  if (transceiver.direction) {\n    sdp += 'a=' + transceiver.direction + '\\r\\n';\n  } else if (transceiver.rtpSender && transceiver.rtpReceiver) {\n    sdp += 'a=sendrecv\\r\\n';\n  } else if (transceiver.rtpSender) {\n    sdp += 'a=sendonly\\r\\n';\n  } else if (transceiver.rtpReceiver) {\n    sdp += 'a=recvonly\\r\\n';\n  } else {\n    sdp += 'a=inactive\\r\\n';\n  }\n\n  if (transceiver.rtpSender) {\n    // spec.\n    var msid = 'msid:' + stream.id + ' ' +\n        transceiver.rtpSender.track.id + '\\r\\n';\n    sdp += 'a=' + msid;\n\n    // for Chrome.\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' ' + msid;\n    if (transceiver.sendEncodingParameters[0].rtx) {\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n          ' ' + msid;\n      sdp += 'a=ssrc-group:FID ' +\n          transceiver.sendEncodingParameters[0].ssrc + ' ' +\n          transceiver.sendEncodingParameters[0].rtx.ssrc +\n          '\\r\\n';\n    }\n  }\n  // FIXME: this should be written by writeRtpDescription.\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n      ' cname:' + SDPUtils.localCName + '\\r\\n';\n  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\n  }\n  return sdp;\n};\n\n// Gets the direction from the mediaSection or the sessionpart.\nSDPUtils.getDirection = function(mediaSection, sessionpart) {\n  // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n  var lines = SDPUtils.splitLines(mediaSection);\n  for (var i = 0; i < lines.length; i++) {\n    switch (lines[i]) {\n      case 'a=sendrecv':\n      case 'a=sendonly':\n      case 'a=recvonly':\n      case 'a=inactive':\n        return lines[i].substr(2);\n      default:\n        // FIXME: What should happen here?\n    }\n  }\n  if (sessionpart) {\n    return SDPUtils.getDirection(sessionpart);\n  }\n  return 'sendrecv';\n};\n\nSDPUtils.getKind = function(mediaSection) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  return mline[0].substr(2);\n};\n\nSDPUtils.isRejected = function(mediaSection) {\n  return mediaSection.split(' ', 2)[1] === '0';\n};\n\nSDPUtils.parseMLine = function(mediaSection) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  var parts = lines[0].substr(2).split(' ');\n  return {\n    kind: parts[0],\n    port: parseInt(parts[1], 10),\n    protocol: parts[2],\n    fmt: parts.slice(3).join(' ')\n  };\n};\n\nSDPUtils.parseOLine = function(mediaSection) {\n  var line = SDPUtils.matchPrefix(mediaSection, 'o=')[0];\n  var parts = line.substr(2).split(' ');\n  return {\n    username: parts[0],\n    sessionId: parts[1],\n    sessionVersion: parseInt(parts[2], 10),\n    netType: parts[3],\n    addressType: parts[4],\n    address: parts[5]\n  };\n};\n\n// a very naive interpretation of a valid SDP.\nSDPUtils.isValidSDP = function(blob) {\n  if (typeof blob !== 'string' || blob.length === 0) {\n    return false;\n  }\n  var lines = SDPUtils.splitLines(blob);\n  for (var i = 0; i < lines.length; i++) {\n    if (lines[i].length < 2 || lines[i].charAt(1) !== '=') {\n      return false;\n    }\n    // TODO: check the modifier a bit more.\n  }\n  return true;\n};\n\n// Expose public methods.\nif (typeof module === 'object') {\n  module.exports = SDPUtils;\n}\n\n},{}]},{},[1])(1)\n});"],"file":"adapter.min.js"}