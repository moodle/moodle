define(["jquery"],function(a){var b=/(\s*\S+|\s)$/,c=/^(\S*)/;return a.truncate=function(b,c){return a("<div></div>").append(b).truncate(c).html()},a.fn.truncate=function(d){a.isNumeric(d)&&(d={length:d});var e=a.extend({},a.truncate.defaults,d);return this.each(function(){var d=a(this);e.noBreaks&&d.find("br").replaceWith(" ");var f=d.text(),g=f.length-e.length;if(e.stripTags&&d.text(f),e.words&&g>0){var h=f.slice(0,e.length).replace(b,"").length;g=e.keepFirstWord&&0===h?f.length-c.exec(f)[0].length-1:f.length-h-1}g<0||!g&&!e.truncated||a.each(d.contents().get().reverse(),function(b,c){var d=a(c),f=d.text(),h=f.length;return h<=g?(e.truncated=!0,g-=h,void d.remove()):3===c.nodeType?(a(c.splitText(h-g-1)).replaceWith(e.ellipsis),!1):(d.truncate(a.extend(e,{length:h-g})),!1)})})},a.truncate.defaults={stripTags:!1,words:!1,keepFirstWord:!1,noBreaks:!1,length:1/0,ellipsis:"â€¦"},{truncate:a.truncate}});