{"version":3,"sources":["../src/expand_contract.js"],"names":["define","$","url","str","expandedImage","imageUrl","collapsedImage","CLASSES","EXPAND","COLLAPSE","expandCollapse","targetnode","thisnode","hasClass","removeClass","addClass","attr","find","expandCollapseAll","nextstate","currentstate","ariaexpandedstate","iconclassnow","iconclassnext","imagenow","each","data","get_string","then","langString","html","catch","Notification","exception"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Potential user selector module.\n *\n * @module     tool_dataprivacy/expand_contract\n * @copyright  2018 Adrian Greeve\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery', 'core/url', 'core/str'], function($, url, str) {\n\n    var expandedImage = $('<img alt=\"\" src=\"' + url.imageUrl('t/expanded') + '\"/>');\n    var collapsedImage = $('<img alt=\"\" src=\"' + url.imageUrl('t/collapsed') + '\"/>');\n\n    /*\n     * Class names to apply when expanding/collapsing nodes.\n     */\n    var CLASSES = {\n        EXPAND: 'fa-caret-right',\n        COLLAPSE: 'fa-caret-down'\n    };\n\n    return /** @alias module:tool_dataprivacy/expand-collapse */ {\n        /**\n         * Expand or collapse a selected node.\n         *\n         * @param  {object} targetnode The node that we want to expand / collapse\n         * @param  {object} thisnode The node that was clicked.\n         */\n        expandCollapse: function(targetnode, thisnode) {\n            if (targetnode.hasClass('hide')) {\n                targetnode.removeClass('hide');\n                targetnode.addClass('visible');\n                targetnode.attr('aria-expanded', true);\n                thisnode.find(':header i.fa').removeClass(CLASSES.EXPAND);\n                thisnode.find(':header i.fa').addClass(CLASSES.COLLAPSE);\n                thisnode.find(':header img.icon').attr('src', expandedImage.attr('src'));\n            } else {\n                targetnode.removeClass('visible');\n                targetnode.addClass('hide');\n                targetnode.attr('aria-expanded', false);\n                thisnode.find(':header i.fa').removeClass(CLASSES.COLLAPSE);\n                thisnode.find(':header i.fa').addClass(CLASSES.EXPAND);\n                thisnode.find(':header img.icon').attr('src', collapsedImage.attr('src'));\n            }\n        },\n\n        /**\n         * Expand or collapse all nodes on this page.\n         *\n         * @param  {string} nextstate The next state to change to.\n         */\n        expandCollapseAll: function(nextstate) {\n            var currentstate = (nextstate == 'visible') ? 'hide' : 'visible';\n            var ariaexpandedstate = (nextstate == 'visible') ? true : false;\n            var iconclassnow = (nextstate == 'visible') ? CLASSES.EXPAND : CLASSES.COLLAPSE;\n            var iconclassnext = (nextstate == 'visible') ? CLASSES.COLLAPSE : CLASSES.EXPAND;\n            var imagenow = (nextstate == 'visible') ? expandedImage.attr('src') : collapsedImage.attr('src');\n            $('.' + currentstate).each(function() {\n                $(this).removeClass(currentstate);\n                $(this).addClass(nextstate);\n                $(this).attr('aria-expanded', ariaexpandedstate);\n            });\n            $('.tool_dataprivacy-expand-all').data('visibilityState', currentstate);\n\n            str.get_string(currentstate, 'tool_dataprivacy').then(function(langString) {\n                $('.tool_dataprivacy-expand-all').html(langString);\n                return;\n            }).catch(Notification.exception);\n\n            $(':header i.fa').each(function() {\n                $(this).removeClass(iconclassnow);\n                $(this).addClass(iconclassnext);\n            });\n            $(':header img.icon').each(function() {\n                $(this).attr('src', imagenow);\n            });\n        }\n    };\n});\n"],"file":"expand_contract.min.js"}