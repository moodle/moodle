define("core_question/questioncount",["exports","core/str","core/fetch","core/notification","core/loadingicon"],(function(_exports,_str,_fetch,_notification,_loadingicon){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Question count badge with asynchronous loading.
   *
   * @module     core_question/questioncount
   * @copyright  2024 Catalyst IT Europe Ltd.
   * @author     Mark Johnson <mark.johnson@catalyst-eu.net>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.fetchCounts=void 0,_fetch=_interopRequireDefault(_fetch),_notification=_interopRequireDefault(_notification),_loadingicon=_interopRequireDefault(_loadingicon);const SELECTORS_COUNT_CONTAINER=".questioncount",SELECTORS_COUNT_BADGE=cmid=>".questioncount[data-cmid='".concat(cmid,"'] .badge");_exports.fetchCounts=async courseId=>{const countContainer=document.querySelector(SELECTORS_COUNT_CONTAINER),endpoint=["bank",courseId,"question_counts"],loadingPromise=_loadingicon.default.addIconToContainerWithPromise(countContainer);try{const response=await _fetch.default.performGet("core_question",endpoint.join("/")),questionCounts=await response.json();for(const[cmid,count]of Object.entries(questionCounts.counts)){const countBadge=document.querySelector(SELECTORS_COUNT_BADGE(cmid));countBadge&&(countBadge.innerText=await(0,_str.getString)("questioncount","question",count),countBadge.classList.remove("d-none"))}}catch(ex){"string"==typeof ex?_notification.default.alert((0,_str.getString)("error","error"),ex):_notification.default.exception(ex)}finally{loadingPromise.resolve()}}}));

//# sourceMappingURL=questioncount.min.js.map