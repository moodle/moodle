{"version":3,"file":"quick_grading.min.js","sources":["../src/quick_grading.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\r\n//\r\n// Moodle is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Moodle is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\nimport * as formSubmit from 'core_form/submit';\r\n\r\n/**\r\n * Module for the quick grading functionality on the submissions page.\r\n *\r\n * @module     mod_assign/quick_grading\r\n * @copyright  2024 Mihail Geshoski <mihail@moodle.com>\r\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\n\r\n/** @constant {Object} The object containing the relevant selectors. */\r\nconst Selectors = {\r\n    quickGradingSaveRegion: '[data-region=\"quick-grading-save\"]',\r\n    notifyStudentsCheckbox: 'input[type=\"checkbox\"][name=\"sendstudentnotifications\"]',\r\n    notifyStudentsHidden: 'input[type=\"hidden\"][name=\"sendstudentnotifications\"]',\r\n    saveButton: 'button[type=\"submit\"]'\r\n};\r\n\r\n/**\r\n * Initialize module.\r\n */\r\nexport const init = () => {\r\n    const quickGradingSaveRegion = document.querySelector(Selectors.quickGradingSaveRegion);\r\n    if (quickGradingSaveRegion) {\r\n        const quickGradingSaveButton = quickGradingSaveRegion.querySelector(Selectors.saveButton);\r\n        // Initialize the submit button.\r\n        formSubmit.init(quickGradingSaveButton);\r\n        // Add 'change' event listener to the quick grading save region.\r\n        quickGradingSaveRegion.addEventListener('change', e => {\r\n            const notifyStudentsCheckbox = e.target.closest(Selectors.notifyStudentsCheckbox);\r\n            // The target is the 'Notify student' checkbox.\r\n            if (notifyStudentsCheckbox) {\r\n                // The 'Notify student' option uses a hidden input and a checkbox. The hidden input is used to submit '0'\r\n                // as a workaround when the checkbox is unchecked since unchecked checkboxes are not submitted with the\r\n                // form. Therefore, we need to enable or disable the hidden input based on the checkbox state.\r\n                const notifyStudentsHidden = notifyStudentsCheckbox.parentNode.querySelector(Selectors.notifyStudentsHidden);\r\n                notifyStudentsHidden.disabled = notifyStudentsCheckbox.checked;\r\n            }\r\n        });\r\n    }\r\n};\r\n"],"names":["Selectors","quickGradingSaveRegion","document","querySelector","quickGradingSaveButton","formSubmit","init","addEventListener","e","notifyStudentsCheckbox","target","closest","parentNode","disabled","checked"],"mappings":";;;;;;;wBA0BMA,iCACsB,qCADtBA,iCAEsB,0DAFtBA,+BAGoB,wDAHpBA,qBAIU,sCAMI,WACVC,uBAAyBC,SAASC,cAAcH,qCAClDC,uBAAwB,OAClBG,uBAAyBH,uBAAuBE,cAAcH,sBAEpEK,WAAWC,KAAKF,wBAEhBH,uBAAuBM,iBAAiB,UAAUC,UACxCC,uBAAyBD,EAAEE,OAAOC,QAAQX,qCAE5CS,uBAAwB,CAIKA,uBAAuBG,WAAWT,cAAcH,gCACxDa,SAAWJ,uBAAuBK"}