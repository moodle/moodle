{"version":3,"file":"data_request_modal.min.js","sources":["../src/data_request_modal.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\r\n//\r\n// Moodle is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Moodle is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * Request actions.\r\n *\r\n * @module     tool_dataprivacy/data_request_modal\r\n * @copyright  2018 Jun Pataleta\r\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\n\r\nimport $ from 'jquery';\r\nimport * as CustomEvents from 'core/custom_interaction_events';\r\nimport Modal from 'core/modal';\r\nimport DataPrivacyEvents from './events';\r\n\r\nconst SELECTORS = {\r\n    APPROVE_BUTTON: '[data-action=\"approve\"]',\r\n    DENY_BUTTON: '[data-action=\"deny\"]',\r\n    COMPLETE_BUTTON: '[data-action=\"complete\"]',\r\n    APPROVE_REQUEST_SELECT_COURSE: '[data-action=\"approve-selected-courses\"]',\r\n};\r\n\r\nexport default class ModalDataRequest extends Modal {\r\n    static TYPE = 'tool_dataprivacy-data_request';\r\n    static TEMPLATE = 'tool_dataprivacy/data_request_modal';\r\n\r\n    /**\r\n     * Set up all of the event handling for the modal.\r\n     */\r\n    registerEventListeners() {\r\n        // Apply parent event listeners.\r\n        super.registerEventListeners(this);\r\n\r\n        this.getModal().on(CustomEvents.events.activate, SELECTORS.APPROVE_BUTTON, (e, data) => {\r\n            const approveEvent = $.Event(DataPrivacyEvents.approve);\r\n            this.getRoot().trigger(approveEvent, this);\r\n\r\n            if (!approveEvent.isDefaultPrevented()) {\r\n                this.hide();\r\n                data.originalEvent.preventDefault();\r\n            }\r\n        });\r\n\r\n        this.getModal().on(CustomEvents.events.activate, SELECTORS.DENY_BUTTON, (e, data) => {\r\n            const denyEvent = $.Event(DataPrivacyEvents.deny);\r\n            this.getRoot().trigger(denyEvent, this);\r\n\r\n            if (!denyEvent.isDefaultPrevented()) {\r\n                this.hide();\r\n                data.originalEvent.preventDefault();\r\n            }\r\n        });\r\n\r\n        this.getModal().on(CustomEvents.events.activate, SELECTORS.COMPLETE_BUTTON, (e, data) => {\r\n            const completeEvent = $.Event(DataPrivacyEvents.complete);\r\n            this.getRoot().trigger(completeEvent, this);\r\n\r\n            if (!completeEvent.isDefaultPrevented()) {\r\n                this.hide();\r\n                data.originalEvent.preventDefault();\r\n            }\r\n        });\r\n\r\n        this.getModal().on(CustomEvents.events.activate, SELECTORS.APPROVE_REQUEST_SELECT_COURSE, (e, data) => {\r\n            let approveSelectCoursesEvent = $.Event(DataPrivacyEvents.approveSelectCourses);\r\n            this.getRoot().trigger(approveSelectCoursesEvent, this);\r\n\r\n            if (!approveSelectCoursesEvent.isDefaultPrevented()) {\r\n                this.hide();\r\n                data.originalEvent.preventDefault();\r\n            }\r\n        });\r\n\r\n    }\r\n}\r\n\r\nModalDataRequest.registerModalType();\r\n"],"names":["SELECTORS","ModalDataRequest","Modal","registerEventListeners","this","getModal","on","CustomEvents","events","activate","e","data","approveEvent","$","Event","DataPrivacyEvents","approve","getRoot","trigger","isDefaultPrevented","hide","originalEvent","preventDefault","denyEvent","deny","completeEvent","complete","approveSelectCoursesEvent","approveSelectCourses","registerModalType"],"mappings":"gjDA4BMA,yBACc,0BADdA,sBAEW,uBAFXA,0BAGe,2BAHfA,wCAI6B,iDAGdC,yBAAyBC,eAO1CC,+BAEUA,uBAAuBC,WAExBC,WAAWC,GAAGC,aAAaC,OAAOC,SAAUT,0BAA0B,CAACU,EAAGC,cACrEC,aAAeC,gBAAEC,MAAMC,gBAAkBC,cAC1CC,UAAUC,QAAQN,aAAcR,MAEhCQ,aAAaO,4BACTC,OACLT,KAAKU,cAAcC,0BAItBjB,WAAWC,GAAGC,aAAaC,OAAOC,SAAUT,uBAAuB,CAACU,EAAGC,cAClEY,UAAYV,gBAAEC,MAAMC,gBAAkBS,WACvCP,UAAUC,QAAQK,UAAWnB,MAE7BmB,UAAUJ,4BACNC,OACLT,KAAKU,cAAcC,0BAItBjB,WAAWC,GAAGC,aAAaC,OAAOC,SAAUT,2BAA2B,CAACU,EAAGC,cACtEc,cAAgBZ,gBAAEC,MAAMC,gBAAkBW,eAC3CT,UAAUC,QAAQO,cAAerB,MAEjCqB,cAAcN,4BACVC,OACLT,KAAKU,cAAcC,0BAItBjB,WAAWC,GAAGC,aAAaC,OAAOC,SAAUT,yCAAyC,CAACU,EAAGC,YACtFgB,0BAA4Bd,gBAAEC,MAAMC,gBAAkBa,2BACrDX,UAAUC,QAAQS,0BAA2BvB,MAE7CuB,0BAA0BR,4BACtBC,OACLT,KAAKU,cAAcC,+EA/CdrB,wBACH,iDADGA,4BAEC,uCAoDtBA,iBAAiB4B"}