// AuST Branding Colors
$aust-blue: #003366;
$aust-gold: #FDB913;

// --- GLOBAL OVERRIDES (Applies to Light Mode & Base) ---

.bg-primary {
    background-color: $aust-blue !important;
}

.text-primary {
    color: $aust-blue !important;
}

a {
    color: $aust-blue;

    &:hover {
        color: darken($aust-blue, 15%);
    }
}

.btn-primary {
    background-color: $aust-blue;
    border-color: $aust-blue;

    &:hover,
    &:focus,
    &:active {
        background-color: darken($aust-blue, 10%);
        border-color: darken($aust-blue, 10%);
    }
}

// Top Navbar (Unified Style - AuST Blue for both Light & Dark)
nav.navbar,
nav.navbar-light,
.navbar.navbar-light,
.navbar-light.bg-white,
nav.navbar.navbar-light.bg-white,
nav.fixed-top.navbar.navbar-light.bg-white,
.fixed-top.navbar-light.bg-white {
    background-color: $aust-blue !important;
    border-bottom: 4px solid $aust-gold !important;

    // Logo styling
    .navbar-brand {
        background-image: url([[pix:theme|logo_small]]);
        background-repeat: no-repeat;
        background-size: contain;
        background-position: left center;
        padding-left: 50px;
        height: 40px;
        width: auto;
        // FIX: Set color to White directly so text is visible
        color: #fff !important;
        font-weight: bold;
        font-size: 1.25rem;
        display: flex; // Ensure proper alignment if needed
        align-items: center;

        &:hover {
            color: #fff !important; // Keep white on hover
        }

        // Keep this just in case, but the main text is likely direct child
        .site-name {
            color: #fff !important;
        }
    }

    // Reset backgrounds for children to transparent
    .navbar-nav,
    .more-nav,
    ul.navbar-nav,
    ul.more-nav,
    .nav,
    .nav-item,
    li.nav-item,
    .navbar-nav .nav-item,
    .more-nav .nav-item,
    ul .nav-item {
        background-color: transparent !important;
    }

    // Links - White text
    .nav-link,
    a,
    .nav-item .nav-link,
    .nav-item a {
        color: rgba(255, 255, 255, 0.9) !important;
        background-color: transparent !important;
    }

    // Hover
    .nav-item:hover,
    .nav-link:hover,
    a:hover {
        color: $aust-gold !important;
        background-color: rgba(255, 255, 255, 0.1) !important;
    }

    // Active
    .nav-item.active,
    .nav-link.active {
        background-color: rgba(255, 255, 255, 0.15) !important;
        color: #fff !important;
    }

    .btn {
        color: white !important;
    }
}

// Secondary Navigation (Global - Active State)
.secondary-navigation,
.secondary-navigation .moremenu,
.secondary-navigation .navigation,
.secondary-navigation .navbar-nav,
.secondary-navigation .nav-tabs,
nav.moremenu {
    .nav-link {
        &.active {
            border-bottom: 2px solid $aust-gold !important;
            color: $aust-gold !important;
        }

        &:hover {
            color: $aust-gold !important;
        }
    }
}

// Login Logo
.login-container img.img-fluid,
.login-wrapper img.img-fluid {
    content: url([[pix:theme|logo]]);
    max-height: 120px;
    width: auto;
}

// User Action Menu Dropdown - Force Black Text
#user-action-menu {

    .dropdown-item,
    .dropdown-toggle,
    a {
        color: #000 !important;

        &:hover {
            color: #000 !important;
            background-color: #f8f9fa !important; // Light hover background
        }
    }
}

// --- DARK MODE ---
@media (prefers-color-scheme: dark) {

    // Page backgrounds
    body,
    html,
    #page,
    #page-wrapper,
    #page-content,
    #region-main-box,
    #region-main,
    .region-main-content,
    .region-main-content-inner,
    .pagelayout-admin #page,
    .pagelayout-standard #page,
    .pagelayout-incourse #page,
    #page.drawers {
        background-color: #121212 !important;
        color: #e0e0e0 !important;
    }

    // Login Page Specifics
    // 1. Wrapper/Container should be DARK
    .login-wrapper,
    .login-container {
        background-color: #121212 !important;
        color: #e0e0e0 !important;
    }

    // 2. The Card itself (.loginform) should be AuST Blue (Flipped)
    .loginform {
        background-color: $aust-blue !important; // AuST Blue Card
        color: #fff !important; // White text on Blue
        border-radius: 8px;
        padding: 20px;

        .login-heading {
            color: #fff !important;
        }

        // Inputs: Dark background, White text
        .form-control,
        input {
            background-color: #2c2c2c !important; // Dark input
            border: 1px solid #555 !important;
            color: #fff !important; // White text

            &::placeholder {
                color: #aaa !important;
            }
        }

        // Buttons: All buttons Orange
        .btn,
        .btn-primary,
        .btn-secondary,
        button {
            background-color: $aust-gold !important;
            border-color: $aust-gold !important;
            color: #000 !important; // Black text on Orange

            &:hover {
                background-color: darken($aust-gold, 10%) !important;
            }
        }

        .d-flex {
            color: #fff !important;
        }

        a {
            color: $aust-gold !important; // Gold links on Blue for visibility

            nav.navbar,
            header.navbar,
            .fixed-top {
                background-color: $aust-blue !important;
                border-bottom: 4px solid $aust-gold !important;

                // Ensure text is white in the blue header
                .navbar-brand {
                    color: #fff !important;
                }
            }
        }
    }

    // Secondary Navbar (Dark Mode Specifics)
    .secondary-navigation,
    .secondary-navigation .moremenu,
    .secondary-navigation .navigation,
    .secondary-navigation .navbar-nav,
    .secondary-navigation .nav-tabs,
    .secondary-navigation .bg-white,
    nav.moremenu {
        background-color: transparent !important;
        border-bottom: 1px solid #333 !important;

        .nav-link {
            color: #e0e0e0 !important;

            &.active {
                background-color: transparent !important;
                border-bottom: 2px solid $aust-gold !important;
                color: $aust-gold !important;
            }

            &:hover {
                background-color: transparent !important;
                color: $aust-gold !important;
            }
        }
    }

    // Cards & Containers (General)
    .card,
    .card-body,
    .well,
    .userprofile .profile_tree,
    .groupinfobox,
    .adminwarning,
    .main-inner,
    .tab-content {
        background-color: #1e1e1e !important;
        border-color: #333 !important;
        color: #e0e0e0 !important;
    }

    // Override Card for Login specifically again to be safe
    .pagelayout-login .card,
    .pagelayout-login .card-body {
        background-color: $aust-blue !important;
        color: #fff !important;
    }

    // Form Controls (General Dark Mode)
    .form-control,
    .custom-select,
    input,
    textarea,
    select {
        background-color: #2c2c2c !important;
        border: 1px solid #444 !important;
        color: #fff !important;

        &:focus {
            background-color: #333 !important;
            border-color: $aust-blue !important;
            color: #fff !important;
        }
    }

    // Search
    .simplesearchform .btn {
        background-color: #333 !important;
        border-color: #444 !important;
        color: #fff !important;
    }

    // Tables
    .table,
    .generaltable {
        color: #e0e0e0 !important;
        background-color: transparent !important;

        th,
        td,
        .cell {
            border-color: #333 !important;
            background-color: transparent !important;
        }

        &.table-striped tbody tr:nth-of-type(odd),
        tbody tr:nth-child(odd) {
            background-color: rgba(255, 255, 255, 0.05) !important;
        }

        &:hover tbody tr:hover {
            background-color: rgba(255, 255, 255, 0.1) !important;
        }
    }

    // Drawers & Lists
    .list-group-item,
    .drawer,
    .drawer-content,
    .drawerheader {
        background-color: #1e1e1e !important;
        border-color: #333 !important;
        color: #e0e0e0 !important;
    }

    // Alerts
    .alert {
        background-color: #252525 !important;
        border-color: #333 !important;
        color: #e0e0e0 !important;

        &.alert-info {
            background-color: rgba(0, 75, 135, 0.3) !important;
            border-color: $aust-blue !important;
            color: #b3e5fc !important;
        }

        &.alert-success {
            background-color: rgba(40, 167, 69, 0.3) !important;
            border-color: #28a745 !important;
            color: #d4edda !important;
        }

        &.alert-warning {
            background-color: rgba(253, 185, 19, 0.2) !important;
            border-color: $aust-gold !important;
            color: #fff3cd !important;
        }

        .close {
            color: #fff !important;
            opacity: 0.8 !important;
            text-shadow: none !important;
        }
    }

    // Buttons
    .btn-secondary {
        background-color: #333 !important;
        border-color: #444 !important;
        color: #e0e0e0 !important;

        &:hover {
            background-color: #444 !important;
        }
    }

    // Footer
    #page-footer {
        background-color: #000 !important;
        color: #888 !important;
    }

    // Generic White Background Overrides
    .bg-white,
    .bg-light {
        background-color: #1e1e1e !important;
    }

    // Activity Icons
    .activityiconcontainer,
    .activityicon {
        background-color: transparent !important;
    }

    // Links
    a {
        color: #64b5f6 !important;

        &:hover {
            color: $aust-gold !important;
        }
    }

    // Headers
    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
        color: #f0f0f0 !important;
    }

    // Course Activity Header
    .activity-header {
        background-color: #1e1e1e !important;
        color: #e0e0e0 !important;

        .activity-information,
        .completion-info {
            color: #e0e0e0 !important;
        }
    }

    // Quiz Styles
    .que {
        .info {
            background-color: #1e1e1e !important;
            color: #fff !important;
            border-color: #333 !important;

            // Fix for edit button in quiz info
            .questionflag.editable {
                color: #fff !important;
            }
        }

        .formulation {
            background-color: #1e1e1e !important;
            color: #fff !important;
            border-color: #333 !important;

            &.active {
                background-color: transparent !important;
                border-bottom: 2px solid $aust-gold !important;
                color: $aust-gold !important;
            }

            &:hover {
                background-color: transparent !important;
                color: $aust-gold !important;
            }
        }

        .qtext,
        .ablock,
        .prompt,
        .answer,
        label {
            color: #fff !important;
        }
    }

    // Global Paragraph Text
    p {
        color: #fff !important;
    }

    // Fixes for specific text classes in Dark Mode
    .text-muted,
    .form-defaultinfo,
    .text-dark,
    small.text-dark {
        color: #fff !important;
    }
}