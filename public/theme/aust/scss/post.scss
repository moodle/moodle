/* stylelint-disable declaration-no-important */
// AuST Branding Colors
$aust-blue: #036;
$aust-gold: #fdb913;

// --- COMMON STYLES (Applies to ALL Modes) ---

.bg-primary {
    background-color: $aust-blue !important;
}

.text-primary {
    color: $aust-blue !important;
}

a {
    color: $aust-blue;

    &:hover {
        color: darken($aust-blue, 15%);
    }
}

.btn-primary {
    background-color: $aust-blue;
    border-color: $aust-blue;

    &:hover,
    &:focus,
    &:active {
        background-color: darken($aust-blue, 10%);
        border-color: darken($aust-blue, 10%);
    }
}

// Navbar Base Styles
nav.navbar {
    background-color: $aust-blue !important;
    border-bottom: 4px solid $aust-gold !important;

    .navbar-brand {
        color: #fff !important;
        font-weight: bold;
        font-size: 1.25rem;
        display: flex;
        align-items: center;

        &:hover {
            color: #fff !important;
        }

        // Hide site name text if we want only logo, but user fixed this earlier by removing bg image
        // Keeping text visible for now unless specifically hidden
    }

    .nav-link,
    .nav-item .nav-link,
    a {
        color: rgba(255, 255, 255, 0.9) !important;

        &:hover {
            color: $aust-gold !important;
            background-color: rgba(255, 255, 255, 0.1) !important;
        }
    }

    // Always white icons in navbar
    .icon,
    .fa {
        color: #fff !important;
    }
}

// Login Logo (Shared)
.login-container img.img-fluid,
.login-wrapper img.img-fluid {
    content: url([[pix:theme|logo]]);
    max-height: 120px;
    width: auto;
}

// Hide default site name text next to logo on login page only
.pagelayout-login .navbar-brand .site-name {
    display: none !important;
}


// --- LIGHT MODE SPECIFIC ---
// Only apply these "Force White" styles when proper light mode is active
@media (prefers-color-scheme: light) {

    // Body Background (Standard)
    body {
        background-color: #fce4ec; // Fallback or standard light bg
    }

    // Dropdown Menus - FORCE WHITE
    .dropdown-menu,
    nav .dropdown-menu,
    .navbar .dropdown-menu,
    .moremenu .dropdown-menu,
    [data-region="moredropdown"] {
        background-color: #fff !important;
        border: 1px solid #dee2e6 !important;
        color: #000 !important;

        .dropdown-item,
        a.dropdown-item,
        li a {
            color: #000 !important;
            background-color: #fff !important;

            &:hover,
            &:focus {
                background-color: #f8f9fa !important;
                color: #000 !important;
            }
        }
    }

    // Notification Popovers - FORCE WHITE
    .popover-region-container,
    .popover-region-content,
    .popover-region-notifications .popover-region-content,
    .popover-region-header-container,
    .content-item-container,
    .popover-region-footer-container {
        background-color: #fff !important;
        color: #000 !important;
        border-color: #dee2e6 !important;

        .popover-region-header-text,
        .notification-message,
        .content-item-body,
        div {
            color: #000 !important;
        }

        .content-item-container:hover {
            background-color: #f8f9fa !important;
        }
    }

    // Login Page - Light Mode Base
    body.pagelayout-login,
    #page-login-index {
        background-image: url([[pix:theme|login_background]]) !important;
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        background-attachment: fixed;
        background-color: transparent !important;
    }

    // Login Card - Light Mode
    body.pagelayout-login .login-container {
        background-color: #fff !important;
        padding: 2rem;
        border-radius: 10px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        max-width: 500px;
        margin: 0 auto;
        color: #000 !important;
    }

    // Transparent Wrappers to show background
    body.pagelayout-login #page-wrapper,
    body.pagelayout-login #page,
    body.pagelayout-login #page-content {
        background-color: transparent !important;
        background: transparent !important;
    }
}


// --- DARK MODE SPECIFIC ---
// Apply these when system prefers dark mode
@media (prefers-color-scheme: dark) {

    // Global Reset for Dark Mode
    body,
    html,
    #page,
    #page-wrapper,
    #page-content,
    .card,
    .userprofile .profile_tree,
    .groupinfobox {
        background-color: #121212 !important;
        color: #e0e0e0 !important;
    }

    // EXCEPTION: Login Page Background
    // Do NOT apply background-image: none here.
    // Instead, define the image specifically for the login page.

    body.pagelayout-login,
    html body.pagelayout-login,
    #page-login-index {
        background-color: transparent !important;
        background-image: url([[pix:theme|login_background]]) !important;
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        background-attachment: fixed;
    }

    // Login Page Containers must be transparent
    body.pagelayout-login #page-wrapper,
    body.pagelayout-login #page,
    body.pagelayout-login #page-content {
        background-color: transparent !important;
        background: transparent !important;
    }

    // Login Card - Dark Mode (Semi-transparent dark or AuST Blue)
    body.pagelayout-login .login-container {
        background-color: rgba(0, 0, 0, 0.85) !important;
        border: 1px solid rgba(255, 255, 255, 0.15);
        border-radius: 10px;
        box-shadow: none !important;
        color: #fff !important;

        .loginform {
            background-color: transparent !important;
        }

        .form-control {
            background-color: #2c333b !important;
            border-color: #444 !important;
            color: #fff !important;
        }

        img.img-fluid {
            // Ensure logo is visible (it should be since it's an image)
        }
    }

    // Dropdown Menus - FORCE DARK
    .dropdown-menu,
    #user-action-menu.dropdown-menu,
    .dropdown-menu.show,
    nav .dropdown-menu {
        background-color: #1d2125 !important;
        border-color: #444 !important;
        color: #e6edf3 !important;

        .dropdown-item,
        a,
        .dropdown-toggle {
            color: #e6edf3 !important;

            &:hover,
            &:focus {
                background-color: $aust-blue !important;
                color: #fff !important;
            }
        }

        .dropdown-divider {
            border-top-color: #444 !important;
        }
    }

    // Notification Popovers - FORCE DARK
    .popover-region-container,
    .popover-region-content-container,
    .popover-region-content,
    .popover-region-header-container,
    .popover-region-footer-container {
        background-color: #1d2125 !important;
        border-color: #444 !important;
        color: #e6edf3 !important;
    }

    .popover-region-header-text {
        color: #fff !important;
    }

    .content-item-container {
        background-color: #1d2125 !important;
        border-bottom: 1px solid #444 !important;

        .notification-message {
            color: #e6edf3 !important;
        }

        &:hover {
            background-color: #2c333b !important;
        }

        &.unread {
            background-color: #2a2f35 !important;
        }
    }

    // Report Builder & Filter Sidebars
    .reportbuilder-filters-sidebar,
    .filter-group {
        background-color: #1e1e1e !important;
        color: #e0e0e0 !important;

        .filter-header,
        label {
            color: #fff !important;
        }
    }

    // Modals
    .modal-content {
        background-color: #1e1e1e !important;
        border-color: #333 !important;
        color: #e0e0e0 !important;

        .modal-header,
        .modal-footer {
            border-color: #333 !important;
        }

        .close,
        .btn-close {
            filter: invert(1);
        }
    }

    // Form Controls (General)
    input,
    textarea,
    select,
    .form-control,
    .custom-select {
        background-color: #2c2c2c !important;
        border: 1px solid #444 !important;
        color: #fff !important;
    }

    // Block Drawers (Right side)
    .drawer,
    .drawer-content {
        background-color: #1e1e1e !important;
        color: #e0e0e0 !important;
    }
}

// --- EXPLICIT DARK MODE ATTRIBUTE (For Toggles) ---
// Mirrors the media query for [data-bs-theme="dark"]
[data-bs-theme="dark"] {
    // Re-apply the crucial dark mode styles here

    // Dropdowns
    .dropdown-menu {
        background-color: #1d2125 !important;
        border-color: #444 !important;
        color: #e6edf3 !important;

        .dropdown-item {
            color: #e6edf3 !important;

            &:hover {
                background-color: $aust-blue !important;
                color: #fff !important;
            }
        }
    }

    // Notifications
    .popover-region-container,
    .popover-region-content {
        background-color: #1d2125 !important;
        color: #e6edf3 !important;
    }

    // Login Page
    &.pagelayout-login body,
    body.pagelayout-login {
        background-image: url([[pix:theme|login_background]]) !important;
        background-size: cover;
    }

    .login-container {
        background-color: rgba(0, 0, 0, 0.85) !important;
        color: #fff !important;
    }
}