<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Doicim&eacute;id Moodle: Treoirl&iacute;nte C&oacute;d&uacute;ch&aacute;in</title>
<link rel="stylesheet" href="docstyles.css" type="TEXT/CSS" />
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
</head>
<body>

<h1>Treoirl&iacute;nte C&oacute;d&uacute;ch&aacute;in Moodle</h1>
<p class="normaltext">T&aacute; comhsheasmhacht agus forastacht riachtanach le go mbeadh aon thionscadal
  comhoibritheach l&aacute;idir.</p>
<p class="normaltext">Cuireann na treoirl&iacute;nte seo sprioc ar f&aacute;il d'&uacute;s&aacute;ideoir&iacute; c&oacute;id Moodle.
  Is f&iacute;or go bhfuil cuid den ch&oacute;d at&aacute; ann faoi l&aacute;thair neamhimleor i roinnt
  r&eacute;ims&iacute;, ach deiseofar &eacute; ar fad ar deireadh. N&iacute; m&oacute;r do gach c&oacute;d&uacute; nua
  clo&iacute; leis na caighde&aacute;in seo chomh fada agus is f&eacute;idir &eacute;.</p>
<h2>Rialacha Ginear&aacute;lta</h2>
<ol class="normaltext">
  <li class="spaced">Ba cheart do gach comhad c&oacute;id leas a bhaint as an iarmh&iacute;r .php.</li>
  <li class="spaced">Ba cheart do gach comhad teimpl&eacute;id leas a bhaint as an iarmh&iacute;r .html.</li>
  <li class="spaced">Ba cheart do gach t&eacute;acschomhad leas a bhaint as form&aacute;id t&eacute;acs de st&iacute;l Unix (t&aacute; an rogha
    seo ar f&aacute;il le formh&oacute;r eagarth&oacute;ir&iacute; t&eacute;acs).</li>
  <li class="spaced">N&iacute; m&oacute;r do gach clib php a bheith 'ioml&aacute;n' ar n&oacute;s <font color="#339900">&lt;?php
    ?&gt;</font> ... seachas clibeanna 'gearra' ar n&oacute;s <font color="#339900">&lt;? ?&gt;</font>.
  </li>
  <li class="spaced">N&iacute; m&oacute;r gach f&oacute;gra c&oacute;ipchirt a choinne&aacute;il. F&eacute;adfaidh t&uacute; do chuid f&eacute;in
    a chur leo m&aacute;s g&aacute;.</li>
  <li class="spaced">Ba cheart do gach comhad an pr&iacute;omhchomhad config.php a bheith mar chuid de.</li>
  <li class="spaced">Ba cheart do gach comhad a sheice&aacute;il go f&iacute;ordheimhn&iacute;tear an t-&uacute;s&aacute;ideoir i gceart,
    tr&iacute; leas a bhaint as require_login() agus isadmin(), isteacher(), iscreator() n&oacute; isstudent().</li>
  <li class="spaced">Ba cheart do gach rochtain ar bhunachair sonra&iacute; leas a bhaint as na feidhmeanna at&aacute; i lib/datalib.php
    nuair is f&eacute;idir - ceada&iacute;onn s&eacute; seo comhoiri&uacute;nach thar r&eacute;imse leathan bunachar sonra&iacute;.
    Ba cheart go bhfeicfe&aacute; gur f&eacute;idir beagnach gach rud a dh&eacute;anamh leis na feidhmeanna seo. M&aacute; t&aacute; ort c&oacute;d SQL a scr&iacute;obh cinntigh: go bhfuil s&eacute; trasard&aacute;in; srianta go feidhmeanna sonr&uacute;la
    laistigh de do ch&oacute;d (de ghn&aacute;th comhad lib.php); agus go bhfuil s&eacute; marc&aacute;ilte go soil&eacute;ir.</li>
  <li class="spaced">N&aacute; cruthaigh agus n&aacute; h&uacute;s&aacute;id athr&oacute;ga domhanda seachas cinn caighde&aacute;nacha
    $CFG, $SESSION, $THEME agus $USER.</li>
  <li class="spaced">Ba cheart gach athr&oacute;g a th&uacute;s&uacute;, n&oacute; ar a laghad t&aacute;st&aacute;il gur ann d&oacute;ibh
    tr&iacute; leas a bhaint as isset() n&oacute; empty() sula n-&uacute;s&aacute;idtear iad.</li>
  <li class="spaced">Ba cheart do gach teaghr&aacute;n a bheith inaistrithe - cruthaigh t&eacute;acsanna nua sna comhaid
    &quot;lang/en&quot; agus glao orthu tr&iacute; leas a bhaint as get_string() n&oacute; print_string().</li>
  <li class="spaced">Ba cheart do gachcomhad cabhrach a bheith inaistrithe - cruthaigh t&eacute;acsanna nua sa chomhadlann
    &quot;en/help&quot; agus glao orthu tr&iacute; leas a bhaint as helpbutton().</li>
  <li class="spaced">Cuirtear magic_quotes le sonra&iacute; a thagann isteach &oacute;n mbrabhs&aacute;la&iacute; (seolta tr&iacute; GET n&oacute; POST) go huathoibr&iacute;och
    (aineoinn na socruithe PHP) le gur f&eacute;idir leat &eacute; a chur d&iacute;reach isteach
    sa bhunachar sonra&iacute; go s&aacute;bh&aacute;ilte.  N&iacute; m&oacute;r gach amhshonra eile (&oacute; chomhaid, n&oacute; &oacute; bhunachair sonra&iacute;)
    a &eacute;al&uacute; le <font color="#339900">addslashes()</font> sula gcuirtear isteach sa bhunachar sonra&iacute; &eacute;.</li>
</ol>
<p>&nbsp;</p>
<h2>St&iacute;l C&oacute;d&uacute;ch&aacute;in</h2>
<p class="normaltext">T&aacute; a fhios agam go bhfuil s&eacute; beag&aacute;n achrannach do st&iacute;l a athr&uacute;
  m&aacute; t&aacute; cleachtadh agat ar rud ar leith, ach cuir i gcompar&aacute;id an t-achrann sin leis an achrann a bheadh
  i gceist d&aacute; mbeadh daoine ag iarraidh bun n&oacute; barr a bhaint as c&oacute;d Moodle d&aacute; mbeadh measc&aacute;n st&iacute;leanna ann.
  Is l&eacute;ir go bhfuil neart bunt&aacute;ist&iacute; n&oacute; m&iacute;bhunt&aacute;ist&iacute; le st&iacute;leanna a &uacute;s&aacute;ideann daoine &eacute;ags&uacute;la,
  ach t&aacute; an st&iacute;l reatha <strong>ann</strong>, agus iarraimid ort clo&iacute; leis. </p>
<ol class="normaltext">
  <li class="spaced"><strong>Eang&uacute;:</strong> ba cheart 4 sp&aacute;s a bheith ann go seasmhach.
    N&aacute; bain leas as t&aacute;banna AR CHOR AR BITH. </li>
  <li class="spaced"><strong>Ainmneacha athr&oacute;ige:</strong> ba cheart gur focail Bh&eacute;arla iad at&aacute; &eacute;asca le l&eacute;amh,
    agus br&iacute; leo. M&aacute; t&aacute; s&eacute; ioml&aacute;n riachtanach go mbeadh n&iacute;os m&oacute; n&aacute; focal amh&aacute;in agat
    rith le ch&eacute;ile iad, ach coinnigh chomh gairid agus is f&eacute;idir iad. &Uacute;s&aacute;id
ainmneacha iolra le haghaidh eagair d'oibiachta&iacute;.
    <p class="examplecode"><font color="#006600">GO MAITH: $quiz<br />
      GO MAITH: $errorstring<br />
GO MAITH: $assignments (le haghaidh eagar d'oibiachta&iacute;)<br />
      GO MAITH: $i (ach i l&uacute;ba beaga amh&aacute;in)<br />
      <br />
      GO DONA: $Quiz <br />
      GO DONA: $aReallyLongVariableNameWithoutAGoodReason<br />
      GO DONA: $error_string</font></p>
  </li>
  <li class="spaced"><strong>Tairisigh:</strong> ba cheart iad a bheith i gceannlitreacha i gc&oacute;na&iacute;,
    agus tos&uacute; i gc&oacute;na&iacute; le hainm an mhod&uacute;il. Ba cheart na focail a roinnt
    le fostr&iacute;oc.
    <p class="examplecode"><font color="#006600">define(&quot;FORUM_MODE_FLATOLDEST&quot;,
      1);</font></p>
  </li>
  <li class="spaced"><strong>Ainmneacha feidhme:</strong> ba cheart gur focail simpl&iacute; B&eacute;arla a bheadh iontu,
    agus go dtos&oacute;idis le hainm an mhod&uacute;il le coinbhleacht a sheachaint idir na mod&uacute;il.
    Ba cheart focail a roinnt le fostr&iacute;ocanna. Ba cheart r&eacute;amhshocr&uacute; ciallmhar a bheith ag paraim&eacute;adair i gc&oacute;na&iacute;
    m&aacute;s f&eacute;idir. Tabhair faoi deara nach bhfuil sp&aacute;s ar bith idir ainm na feidhme agus na
    (l&uacute;ib&iacute;n&iacute;) a leanann &eacute;. <br />
    <p class="examplecode"> <font color="#007700">function </font><font color="#0000BB">forum_set_display_mode</font><font color="#007700">(</font><font color="#0000BB">$mode</font><font color="#007700">=</font><font color="#0000BB">0</font><font color="#007700">)
      {<br />
      &nbsp;&nbsp;&nbsp;&nbsp;global </font><font color="#0000BB">$USER</font><font color="#007700">,
      </font><font color="#0000BB">$CFG</font><font color="#007700">;<br />
      <br />
      &nbsp;&nbsp;&nbsp;&nbsp;if (</font><font color="#0000BB">$mode</font><font color="#007700">)
      {<br />
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$USER</font><font color="#007700">-&gt;</font><font color="#0000BB">mode
      </font><font color="#007700">= </font><font color="#0000BB">$mode</font><font color="#007700">;<br />
      &nbsp;&nbsp;&nbsp;&nbsp;} else if (empty(</font><font color="#0000BB">$USER</font><font color="#007700">-&gt;</font><font color="#0000BB">mode</font><font color="#007700">))
      {<br />
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$USER</font><font color="#007700">-&gt;</font><font color="#0000BB">mode
      </font><font color="#007700">= </font><font color="#0000BB">$CFG</font><font color="#007700">-&gt;</font><font color="#0000BB">forum_displaymode</font><font color="#007700">;<br />
      &nbsp;&nbsp;&nbsp;&nbsp;}<br />
      }</font></p>
  </li>
  <li class="spaced"><strong>Blocanna:</strong> n&iacute; m&oacute;r iad a chur idir l&uacute;ib&iacute;n&iacute; 'catacha'
    (fi&uacute; muna bhfuil ann ach l&iacute;ne amh&aacute;in). &Uacute;s&aacute;ideann Moodle an st&iacute;l seo:
    <p class="examplecode"> <font color="#006600">if (</font><font color="#0000CC">$quiz</font><font color="#006600">-&gt;</font><font color="#0000CC">attempts</font><font color="#006600">)
      {<br />
      &nbsp;&nbsp;&nbsp;&nbsp;if (</font><font color="#0000CC">$numattempts </font><font color="#006600">&gt;
      </font><font color="#0000CC">$quiz</font><font color="#006600">-&gt;</font><font color="#0000CC">attempts</font><font color="#006600">)
      {<br />
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000CC">error</font><font color="#006600">(</font><font color="#0000BB">$strtoomanyattempts</font><font color="#006600">,
      </font><font color="#CC0000">&quot;view.php?id=$cm</font><font color="#006600">-&gt;</font><font color="#CC0000">id&quot;</font><font color="#006600">);<br />
      &nbsp;&nbsp;&nbsp;&nbsp;}<br />
      }</font></p>
  </li>
  <li class="spaced"><strong>Teaghr&aacute;in:</strong> ba cheart iad a shainmh&iacute;ni&uacute; laistigh de uascham&oacute;ga singil
    nuair is f&eacute;idir &eacute;, ar mhaithe le luas.<br />
    <p class="examplecode"> <font color="#006600">$var = 'some text without any
      variables';<br />
      $var = &quot;with special characters like a new line \n&quot;;<br />
      $var = 'a very, very long string with a '.$single.' variable in it';<br />
      $var = &quot;some $text with $many variables $within it&quot;; </font></p>
  </li>
  <li class="spaced"><strong>N&oacute;ta&iacute; tr&aacute;chta:</strong> ba cheart d&oacute;ibh dh&aacute; slais n&oacute; tr&iacute; a &uacute;s&aacute;id
    agus teacht le ch&eacute;ile go n&eacute;ata leis an gc&oacute;d.
    <p class="examplecode"><font color="#006600">function </font><font color="#0000BB">forum_get_ratings_mean</font><font color="#007700">(</font><font color="#0000BB">$postid</font><font color="#007700">,
      </font><font color="#0000BB">$scale</font><font color="#007700">, </font><font color="#0000BB">$ratings</font><font color="#007700">=</font><font color="#0000BB">NULL</font><font color="#007700">)
      {<br />
      </font><font color="#FF8000">/// Return the mean rating of a post given
      to the current user by others.<br />
      /// Scale is an array of possible ratings in the scale<br />
      /// Ratings is an optional simple array of actual ratings (just integers)<br />
      <br />
      &nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">if (!</font><font color="#0000BB">$ratings</font><font color="#007700">)
      {<br />
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$ratings
      </font><font color="#007700">= array(); &nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">//
      Initialize the empty array</font><font color="#007700"><br />
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (</font><font color="#0000BB">$rates
      </font><font color="#007700">= </font><font color="#0000BB">get_records</font><font color="#007700">(</font><font color="#DD0000">&quot;forum_ratings&quot;</font><font color="#007700">,
      </font><font color="#DD0000">&quot;post&quot;</font><font color="#007700">, </font><font color="#0000BB">$postid</font><font color="#007700">))
      {<br />
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">//
      Process each rating in turn</font><font color="#007700"><br />
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach
      (</font><font color="#0000BB">$rates </font><font color="#007700">as </font><font color="#0000BB">$rate</font><font color="#007700">)
      {</font> <br />
      ....srl </p>
  </li>
  <li class="spaced"><strong>Sp&aacute;s:</strong> ba cheart bheith flaithi&uacute;il leis - n&aacute; b&iacute;odh fait&iacute;os ort
    ruda&iacute; a scaipeadh amach roinnt &eacute;igin ar mhaithe le soil&eacute;ireacht. Go ginear&aacute;lta, ba cheart go mbeadh
    sp&aacute;s amh&aacute;in idir l&uacute;ib&iacute;n&iacute; agus gn&aacute;th r&aacute;itis, agus gan sp&aacute;s ar bith idir l&uacute;ib&iacute;n&iacute; agus
    athr&oacute;ga n&oacute; feidhmeanna:<br />
    <p class="examplecode"> <font color="#007700">foreach (</font><font color="#0000BB">$objects
      </font><font color="#007700">as </font><font color="#0000BB">$key </font><font color="#007700">=&gt;</font><font color="#0000BB">
      $thing</font><font color="#007700">)</font><font color="#006600"> {<br />
      </font><font color="#007700">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">process($thing);</font><font color="#006600">
      <br />
      } <br />
      <br />
      </font><font color="#007700">if (</font><font color="#0000BB">$x </font><font color="#007700">==
      </font><font color="#0000BB">$y</font><font color="#007700">)</font><font color="#006600">
      {<br />
      </font><font color="#007700">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$a
      </font><font color="#007700">= </font><font color="#0000BB">$b</font><font color="#007700">;</font><font color="#006600"><br />
      } else if (</font><font color="#0000BB">$x </font><font color="#007700">==
      </font><font color="#0000BB">$z</font><font color="#006600">) {<br />
      </font><font color="#007700">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$a
      </font><font color="#007700">= </font><font color="#0000BB">$c</font><font color="#007700">;</font><font color="#006600"><br />
      } else {<br />
      </font><font color="#007700">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$a
      </font><font color="#007700">= </font><font color="#0000BB">$d</font><font color="#007700">;</font><font color="#006600"><br />
      } </font></p>
  </li>
</ol>
<p>&nbsp;</p>
<h2>Strucht&uacute;r Bunachair Sonra&iacute;:</h2>
<ol class="normaltext">
  <li class="spaced">N&iacute; m&oacute;r do gach t&aacute;bla r&eacute;imse <strong>id</strong> (INT10) uath-incriminteach a bheith aige mar inn&eacute;acs pr&iacute;omh&uacute;il.</li>
  <li class="spaced">N&iacute; m&oacute;r don phr&iacute;omht&aacute;bla in dtarla&iacute;onn gach mod&uacute;l an t-ainm c&eacute;anna a bheith air is at&aacute; ar an mod&uacute;l (m.sh. <strong>widget</strong>) agus ar a laghad na r&eacute;ims&iacute; seo a leanas a bheith ann:
    <ul>
      <li><strong>id</strong> - mar a sonra&iacute;odh thuas</li>
      <li><strong>course</strong> - id an ch&uacute;rsa a mbaineann gach &aacute;sc leis</li>
      <li><strong>name</strong> - ainm ioml&aacute;n gach &aacute;sc den mhod&uacute;l</li>
    </ul>
  </li>
  <li class="spaced">Ba cheart t&aacute;bla&iacute; eile at&aacute; gaolmhar le mod&uacute;l, a bhfuil eolas iontu faoi 'things', ba cheart <strong>widget_things</strong> a thabhairt orthu (tabhair faoi deara an t-iolra).</li>
  <li class="spaced">Ba cheart ainmneacha na gcol&uacute;n a choinne&aacute;il gairid agus simpl&iacute;, agus na rialacha c&eacute;anna &aacute; lean&uacute;int is at&aacute; ann d'ainmneacha athr&oacute;ige.</li>
  <li class="spaced">Nuair is f&eacute;idir &eacute;, m&aacute; t&aacute; tagairt i gcol&uacute;n do r&eacute;imse id i dt&aacute;bla eile (m.sh. <strong>widget</strong>), ba cheart <strong>widgetid</strong> a ghlaoch air. (Tabhair faoi deara gur n&oacute;s r&eacute;as&uacute;nta nua &eacute; seo agus nach leantar &eacute; i roinnt sean-t&aacute;bla&iacute;)</li>
  <li class="spaced">Ba cheart r&eacute;ims&iacute; Boole a chur i bhfeidhm mar r&eacute;ims&iacute; beaga sl&aacute;nuimhreacha (m.sh. INT4) a bhfuil 0 n&oacute; 1 iontu, le leathn&uacute; ar luachanna a &eacute;asc&uacute; ar ball m&aacute;s g&aacute;.</li>
  <li class="spaced">Ba cheart do formh&oacute;r na dt&aacute;bla&iacute; r&eacute;imse <strong>timemodified</strong> (INT10) a bheith acu a nuashonra&iacute;tear le ham-stampa reatha tr&iacute; an bhfeidhm PHP <strong>time ()</strong> a &uacute;s&aacute;id.</li>
</ol>
<hr />
<p align="center"><font size="1"><a href="." target="_top">Doicim&eacute;id Moodle</a></font></p>
<p align="center"><font size="1">Leagan: $Id$</font></p>
</body>
</html>
