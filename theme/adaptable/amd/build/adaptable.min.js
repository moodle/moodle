define("theme_adaptable/adaptable",["exports","jquery","theme_adaptable/jqueryeasing","theme_adaptable/util","core/log"],(function(_exports,_jquery,_jqueryeasing,AdaptableUtil,_log){function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
// @license    https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later.
Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_jquery=_interopRequireDefault(_jquery),_jqueryeasing=_interopRequireDefault(_jqueryeasing),AdaptableUtil=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!=typeof obj&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(AdaptableUtil),_log=_interopRequireDefault(_log);const adaptable=()=>{_log.default.debug("Adaptable ES6 adaptable"),(0,_jquery.default)(".breadcrumb li:not(:last-child) span").not(".separator").addClass(""),(0,_jquery.default)(".breadcrumb li:last-child").addClass("lastli");try{(0,_jquery.default)('.context-header-settings-menu .dropdown-menu .dropdown-item a[href*="edit"], #editingbutton a').click((function(event){event.preventDefault();var to=(0,_jquery.default)(window).scrollTop();sessionStorage.setItem("scrollTo",to);var url=(0,_jquery.default)(this).prop("href");return window.location.replace(url),!1}));var scrollTo=sessionStorage.getItem("scrollTo");null!==scrollTo&&(window.scrollTo(0,scrollTo),sessionStorage.removeItem("scrollTo"))}catch(e){_log.default.debug("Adaptable: Session storage exception: "+e.name)}let bttOn;let st=(0,_jquery.default)("#page").scrollTop();bttOn=!(st>150);var bttScrollCheck=function(){st=(0,_jquery.default)("#page").scrollTop(),st>150?0==bttOn&&(bttOn=!0,(0,_jquery.default)("#back-to-top").fadeIn(500)):1==bttOn&&(bttOn=!1,(0,_jquery.default)("#back-to-top").fadeOut(500))};if(bttScrollCheck(),(0,_jquery.default)("#page").scroll((function(){bttScrollCheck()})),(0,_jquery.default)("#back-to-top").click((function(event){return event.preventDefault(),(0,_jquery.default)("#page").animate({scrollTop:0},500),!1})),window.location.hash&&(0,_jquery.default)("body").hasClass("pagelayout-course")){var anchorTop=(0,_jquery.default)(window.location.hash).offset().top;(0,_jquery.default)("html, body").animate({scrollTop:anchorTop-102},500)}"fixed"==(0,_jquery.default)("header").css("position")&&(0,_jquery.default)(".outercont").css("padding-top",(0,_jquery.default)("header").height())},options=data=>{_log.default.debug("Adaptable ES6 options");var body=(0,_jquery.default)("body"),navbar=document.getElementById("main-navbar");if(data.stickynavbar){const screenmd=992,screensm=768;var currentWindowSize,windowWidth=(0,_jquery.default)(window).width();currentWindowSize=windowWidth<screensm?1:windowWidth<screenmd?2:3;var header=document.getElementById("adaptable-page-header-wrapper"),aboveHeader=document.getElementById("header1");aboveHeader||(aboveHeader=document.getElementById("header2"));var courseIndex=document.getElementById("theme_adaptable-drawers-courseindex"),sidePost=document.getElementById("theme_adaptable-drawers-sidepost"),drawerTogglers=document.getElementsByClassName("drawer-toggler"),page=document.getElementById("page"),pageScrollTop=page.scrollTop,currentPageScrollTop=pageScrollTop,headerHeight=0,headerNoNavbar=0,navbarHeight=0;null!==navbar&&(navbarHeight=navbar.getBoundingClientRect().height);var aboveHeaderHeight=aboveHeader.getBoundingClientRect().height,drawerPaddingTop=0,newDrawerPaddingTop=0,pageMarginTop=0,newPageMarginTop=0,headerTop=0,newHeaderTop=0,isFixed=0;windowWidth<screenmd?(header.classList.remove("sticky"),body.addClass("page-header-margin"),isFixed=1):(header.classList.add("sticky"),body.removeClass("page-header-margin"));var makeNavbarSticky=function(){let update=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(pageScrollTop=page.scrollTop,windowWidth<screenmd){if(!update&&currentPageScrollTop==aboveHeaderHeight&&pageScrollTop>=aboveHeaderHeight)return;pageScrollTop=aboveHeaderHeight,newHeaderTop=0,newPageMarginTop=0}else{if(!update&&currentPageScrollTop==headerNoNavbar&&pageScrollTop>=headerNoNavbar)return;update&&(headerHeight=header.getBoundingClientRect().height,null!==navbar&&(navbarHeight=navbar.getBoundingClientRect().height),headerNoNavbar=headerHeight-navbarHeight),pageScrollTop>headerNoNavbar&&(pageScrollTop=headerNoNavbar),newHeaderTop=-pageScrollTop,newPageMarginTop=headerHeight-pageScrollTop}if(currentPageScrollTop=pageScrollTop,(update||newHeaderTop!=headerTop)&&(header.style.top=newHeaderTop+"px",headerTop=newHeaderTop),(update||newPageMarginTop!=pageMarginTop)&&(page.style.marginTop=newPageMarginTop+"px",pageMarginTop=newPageMarginTop),(courseIndex||sidePost)&&(newDrawerPaddingTop=windowWidth<screenmd?0:headerHeight-pageScrollTop,(update||newDrawerPaddingTop!=drawerPaddingTop)&&(drawerPaddingTop=newDrawerPaddingTop,courseIndex&&(courseIndex.style.paddingTop=drawerPaddingTop+"px"),sidePost&&(sidePost.style.paddingTop=drawerPaddingTop+"px"),courseIndex||sidePost)))if(windowWidth<screenmd)for(let dt=0;dt<drawerTogglers.length;dt++)drawerTogglers[dt].style.top=null;else for(let dt=0;dt<drawerTogglers.length;dt++)drawerTogglers[dt].style.top=drawerPaddingTop+22+"px"};makeNavbarSticky(!0),courseIndex&&courseIndex.classList.remove("d-none"),sidePost&&sidePost.classList.remove("d-none"),page.onscroll=function(){makeNavbarSticky()},(0,_jquery.default)(window).resize((function(){(windowWidth=(0,_jquery.default)(window).width())<screensm?1!=currentWindowSize&&(makeNavbarSticky(!0),currentWindowSize=1):windowWidth<screenmd?2!=currentWindowSize&&(makeNavbarSticky(!0),currentWindowSize=2):(3!=currentWindowSize&&(currentWindowSize=3),makeNavbarSticky(!0)),windowWidth<screenmd?0===isFixed&&(header.classList.remove("sticky"),body.addClass("page-header-margin"),isFixed=1):1===isFixed&&(header.classList.add("sticky"),body.removeClass("page-header-margin"),isFixed=0)}))}(0,_jquery.default)(".moodlewidth").click((function(){body.hasClass("fullin")?(body.removeClass("fullin"),AdaptableUtil.setUserPreference("theme_adaptable_full","nofull")):(body.addClass("fullin"),AdaptableUtil.setUserPreference("theme_adaptable_full","fullin"))})),(0,_jquery.default)("#openoverlaymenu").click((function(){(0,_jquery.default)("#conditionalmenu").toggleClass("open")})),(0,_jquery.default)("#overlaymenuclose").click((function(){(0,_jquery.default)("#conditionalmenu").toggleClass("open")})),(0,_jquery.default)(".dropdown-menu a.dropdown-toggle").on("click",(function(){var $el=(0,_jquery.default)(this),$parent=(0,_jquery.default)(this).offsetParent(".dropdown-menu");return(0,_jquery.default)(this).next().hasClass("show")||(0,_jquery.default)(this).parents(".dropdown-menu").first().find(".show").removeClass("show"),(0,_jquery.default)(this).next(".dropdown-menu").toggleClass("show"),(0,_jquery.default)(this).parent("li").toggleClass("show"),(0,_jquery.default)(this).parents("li.nav-item.dropdown.show").on("hidden.bs.dropdown",(function(){(0,_jquery.default)(".dropdown-menu .show").removeClass("show")})),$parent.parent().hasClass("navbar-nav")||$el.next().css({top:$el[0].offsetTop,left:$parent.outerWidth()-4}),!1}))};_exports.init=data=>{if(_log.default.debug("Adaptable ES6 init"),(0,_jqueryeasing.default)(),data.stickynavbar){var shiftWindow=function(){scrollBy(0,-50)};location.hash&&shiftWindow(),window.addEventListener("hashchange",shiftWindow)}"loading"!==document.readyState?(_log.default.debug("Adaptable ES6 init DOM content already loaded"),adaptable(),options(data)):(_log.default.debug("Adaptable ES6 init JS DOM content not loaded"),document.addEventListener("DOMContentLoaded",(function(){_log.default.debug("Adaptable ES6 init JS DOM content loaded"),adaptable(),options(data)})))}}));

//# sourceMappingURL=adaptable.min.js.map