{"version":3,"file":"ui-completion-rules-lazy.min.js","sources":["../src/ui-completion-rules-lazy.js"],"sourcesContent":["/* eslint-disable */\n/* Do not edit directly, refer to ui/ folder. */\ndefine([\"block_xp/ui-commons-lazy\"],() => { return /******/ (() => { // webpackBootstrap\n/******/ \t\"use strict\";\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ 913:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  App: () => (/* binding */ App),\n  dependencies: () => (/* binding */ dependencies),\n  startApp: () => (/* binding */ startApp)\n});\n\n// EXTERNAL MODULE: ./node_modules/@headlessui/react/dist/components/tabs/tabs.js + 2 modules\nvar tabs = __webpack_require__(848);\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(540);\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(961);\n// EXTERNAL MODULE: ./node_modules/react-query/es/index.js\nvar es = __webpack_require__(942);\n// EXTERNAL MODULE: ./node_modules/@headlessui/react/dist/components/menu/menu.js + 13 modules\nvar menu = __webpack_require__(929);\n;// CONCATENATED MODULE: ./ui/src/lib/utils.ts\nconst utils_classNames = (...args) => args.filter(Boolean).join(\" \");\nconst fifoCache = (maxItems = 128) => {\n    let items = {};\n    let keys = [];\n    const purge = () => {\n        if (keys.length > maxItems) {\n            const idx = Math.max(0, keys.length - maxItems);\n            keys.slice(0, idx).forEach((key) => {\n                delete items[key];\n            });\n            keys = keys.slice(idx);\n        }\n    };\n    return {\n        set: (key, value) => {\n            items[key] = value;\n            keys.push(key);\n            purge();\n        },\n        get: (key) => {\n            return items[key];\n        },\n    };\n};\nlet uniqueId = 0;\nconst getUniqueId = () => {\n    return `xp-${Date.now()}-${uniqueId++}`;\n};\nconst stripTags = (html) => {\n    var tmp = document.createElement(\"div\");\n    tmp.innerHTML = html;\n    return tmp.textContent || tmp.innerText || \"\";\n};\nconst escapeCharMap = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#039;'\n};\nconst escapeHtml = (text) => {\n    return text.replace(/[&<>\"']/g, function (m) { return escapeCharMap[m]; });\n};\n\n;// CONCATENATED MODULE: ./ui/src/components/Dropdown.tsx\n\n\n\nconst Dropdown = ({ buttonLabel, items }) => {\n    return (react.createElement(menu/* Menu */.W, { as: \"div\", className: \"dropdown\" },\n        react.createElement(menu/* Menu */.W.Button, { className: \"btn btn-link btn-icon icon-size-3 rounded-circle\" },\n            react.createElement(\"i\", { className: \"fa fa-ellipsis-v text-dark py-2\", \"aria-hidden\": \"true\" }),\n            react.createElement(\"span\", { className: \"xp-sr-only\" }, buttonLabel)),\n        react.createElement(menu/* Menu */.W.Items, { className: \"dropdown-menu dropdown-menu-right xp-block\" }, items.map((item) => {\n            if (\"divider\" in item) {\n                return react.createElement(\"div\", { key: item.id, className: \"dropdown-divider\" });\n            }\n            return (react.createElement(menu/* Menu */.W.Item, { key: item.id }, ({ active }) => (react.createElement(\"a\", { ...item.props, className: utils_classNames(\"dropdown-item\", item.danger ? \"text-danger\" : null) }, item.label))));\n        }))));\n};\n\n;// CONCATENATED MODULE: ./ui/src/components/Loading.tsx\n\nconst AppLoading = () => {\n    return (react.createElement(\"div\", { className: \"block_xp-react-loading\" },\n        react.createElement(\"div\", { className: \"xp-grid xp-grid-cols-2 xp-gap-4 xp-animate-pulse\" },\n            react.createElement(\"div\", { className: \"xp-col-span-2 xp-bg-gray-100 xp-rounded xp-h-4\" }),\n            react.createElement(\"div\", { className: \"xp-bg-gray-100 xp-rounded xp-h-4\" }),\n            react.createElement(\"div\", { className: \"xp-bg-gray-100 xp-rounded xp-h-4\" }))));\n};\n\n;// CONCATENATED MODULE: ./ui/src/lib/moodle.ts\n\nconst M = window.M;\nconst modules = {};\n/**\n * List of modules that we currently depend on statically.\n *\n * Preferrably, modules should be loaded with getModuleAsync, which\n * does not require their definition to be declared in our apps.\n */\nconst commonStaticModulesToDependOn = [\n    \"core/notification\",\n    \"core/aria\",\n    \"?core/toast\",\n    \"jquery\",\n];\nasync function ajaxRequest(method, args) {\n    const Ajax = await getModuleAsync(\"core/ajax\");\n    return Ajax.call([{\n            methodname: method,\n            args,\n        }])[0];\n}\nfunction getString(id, component, a) {\n    return M.util.get_string(id, component, a);\n}\nfunction getUrl(uri) {\n    if (uri[0] != \"/\") {\n        uri = \"/\" + uri;\n    }\n    return M.cfg.wwwroot + uri;\n}\nfunction hasString(id, component) {\n    return typeof M.str[component] !== \"undefined\" && typeof M.str[component][id] !== \"undefined\";\n}\nfunction getModule(name) {\n    return modules[name];\n}\nasync function getModuleAsync(amd) {\n    if (modules[amd]) {\n        return modules[amd];\n    }\n    return new Promise((resolve, reject) => {\n        // @ts-ignore\n        window.require([amd], (mod) => {\n            modules[amd] = mod;\n            resolve(mod);\n        }, reject);\n    });\n}\nfunction moodle_imageUrl(name, component) {\n    return M.util.image_url(name, component);\n}\nfunction moodle_isBehatRunning() {\n    return M.cfg.behatsiterunning;\n}\nlet loadStringCache = fifoCache(64);\nasync function loadString(id, component) {\n    const cacheKey = `${id}/${component}`;\n    let promise = loadStringCache.get(cacheKey);\n    if (!promise) {\n        const Str = await getModuleAsync(\"core/str\");\n        promise = Str.get_string(id, component);\n        loadStringCache.set(cacheKey, promise);\n    }\n    return await promise;\n}\nasync function loadStrings(ids, component) {\n    const cacheKey = `${ids.join(\",\")}/${component}`;\n    let promise = loadStringCache.get(cacheKey);\n    if (!promise) {\n        const Str = await getModuleAsync(\"core/str\");\n        promise = Str.get_strings(ids.map((id) => ({ key: id, component })));\n        loadStringCache.set(cacheKey, promise);\n    }\n    return await promise;\n}\nconst makeDependenciesDefinition = (names) => {\n    let optional = [];\n    const list = names.map((name) => {\n        const isOptional = name.charAt(0) === \"?\";\n        const module = isOptional ? name.substring(1) : name;\n        if (isOptional) {\n            optional.push(module);\n        }\n        return module;\n    });\n    return {\n        list,\n        optional,\n        loader: (mods) => {\n            mods.forEach((mod, i) => {\n                setModule(list[i], mod);\n            });\n        },\n    };\n};\nfunction setModule(name, mod) {\n    modules[name] = mod;\n}\n\n;// CONCATENATED MODULE: ./ui/src/lib/contexts.ts\n\nconst makeAddonContextValueFromAppProps = (props) => {\n    return {\n        activated: false,\n        enablepromo: true,\n        promourl: \"https://www.levelup.plus/xp/\",\n        ...(props?.addon ?? {}),\n    };\n};\nconst contexts_AddonContext = (0,react.createContext)({\n    activated: false,\n    enablepromo: true,\n    promourl: \"https://www.levelup.plus/xp/\", // Local promo page where possible.\n});\n\n;// CONCATENATED MODULE: ./ui/src/lib/hooks.ts\n\n\n\n\nconst useAddonActivated = () => {\n    return useContext(AddonContext).activated;\n};\nconst hooks_useAnchorButtonProps = (onClick) => {\n    const listeners = useRoleButtonListeners(onClick);\n    return {\n        href: \"#\",\n        role: \"button\",\n        ...listeners,\n    };\n};\n/**\n * Duplication check hook.\n *\n * Usage:\n *\n * const isActionPermitted = useDuplicatedActionPreventor();\n * useEffect(() => {\n *    if (!isActionPermitted()) return;\n * })\n */\nconst useDuplicatedActionPreventor = (msDelay = 100) => {\n    const ref = (0,react.useRef)();\n    return (0,react.useCallback)(() => {\n        if (ref.current && ref.current > Date.now() - msDelay) {\n            return false;\n        }\n        ref.current = Date.now();\n        return true;\n    }, []);\n};\nconst useModules = (modules) => {\n    const modulesPromise = (0,react.useRef)();\n    const modulesRef = (0,react.useRef)();\n    const [ready, setReady] = (0,react.useState)(false);\n    (0,react.useEffect)(() => {\n        if (modulesRef.current)\n            return;\n        if (!modulesPromise.current) {\n            modulesPromise.current = Promise.all(modules.map((module) => getModuleAsync(module)));\n        }\n        let cancelled = false;\n        modulesPromise.current.then((loadedModles) => {\n            if (cancelled)\n                return;\n            modulesRef.current = modules.reduce((acc, module, i) => {\n                acc[module] = loadedModles[i];\n                return acc;\n            }, {});\n            setReady(true);\n        });\n        return () => {\n            cancelled = true;\n        };\n    });\n    const getModule = (0,react.useCallback)((module) => {\n        if (!modulesRef.current)\n            return null;\n        return modulesRef.current[module] ?? null;\n    }, [ready, modulesRef.current]);\n    return {\n        getModule,\n    };\n};\nconst hooks_useNumericInputProps = (value, onChange) => {\n    const valueAsString = value.toString();\n    const [externalValue, setExternalValue] = (0,react.useState)(valueAsString);\n    const [internalValue, setInternalValue] = (0,react.useState)(externalValue);\n    (0,react.useEffect)(() => {\n        if (valueAsString !== externalValue) {\n            setExternalValue(valueAsString);\n            setInternalValue(valueAsString);\n        }\n    });\n    const handleBlur = (e) => {\n        const v = parseInt(internalValue, 10) || 0;\n        setExternalValue(v.toString());\n        onChange(v);\n    };\n    const handleChange = (e) => {\n        setInternalValue(e.target.value.replace(/[^0-9]/, \"\"));\n    };\n    return {\n        value: internalValue,\n        onChange: handleChange,\n        onBlur: handleBlur,\n    };\n};\nconst useRoleButtonListeners = (onClick) => {\n    const handleClick = (e) => {\n        e.preventDefault();\n        onClick();\n    };\n    const handleKeyDown = (e) => {\n        if (e.key !== \" \" && e.key !== \"Enter\") {\n            return;\n        }\n        e.preventDefault();\n        onClick();\n    };\n    return {\n        onClick: handleClick,\n        onKeyDown: handleKeyDown,\n    };\n};\nconst useUnloadCheck = (isDirty) => {\n    const str = hooks_useString(\"changesmadereallygoaway\", \"core\");\n    useEffect(() => {\n        const fn = (e) => {\n            if (!isDirty || isBehatRunning()) {\n                return;\n            }\n            e.preventDefault();\n            e.returnValue = str;\n            return str;\n        };\n        window.addEventListener(\"beforeunload\", fn);\n        return () => {\n            window.removeEventListener(\"beforeunload\", fn);\n        };\n    });\n};\nconst useUniqueId = () => {\n    const [id] = (0,react.useState)(getUniqueId());\n    return id;\n};\nconst hooks_useString = (id, component = \"block_xp\", a) => {\n    const wasKnownAtMount = (0,react.useMemo)(() => hasString(id, component), [id, component]);\n    const [isLoaded, setLoaded] = (0,react.useState)(false);\n    // When the string changes, remove the promise.\n    (0,react.useEffect)(() => {\n        setLoaded(false);\n    }, [id, component]);\n    // Load the string when it is unknown.\n    (0,react.useEffect)(() => {\n        if (wasKnownAtMount || isLoaded) {\n            return;\n        }\n        let cancelled = false;\n        (async () => {\n            try {\n                await loadString(id, component);\n                if (!cancelled) {\n                    setLoaded(true);\n                }\n            }\n            catch (err) { }\n        })();\n        return () => {\n            cancelled = true;\n        };\n    });\n    return hasString(id, component) ? getString(id, component, a) : \"​\";\n};\nconst hooks_useStrings = (ids, component = \"block_xp\") => {\n    const idsForKey = ids.join(\",\");\n    const allKnownAtMount = (0,react.useMemo)(() => ids.every((id) => hasString(id, component)), [idsForKey, component]);\n    const [isLoaded, setLoaded] = (0,react.useState)(false);\n    // When the string changes, remove the promise.\n    (0,react.useEffect)(() => {\n        setLoaded(false);\n    }, [idsForKey, component]);\n    // Load the string when it is unknown.\n    (0,react.useEffect)(() => {\n        if (allKnownAtMount || isLoaded) {\n            return;\n        }\n        let cancelled = false;\n        (async () => {\n            try {\n                await loadStrings(ids, component);\n                if (!cancelled) {\n                    setLoaded(true);\n                }\n            }\n            catch (err) { }\n        })();\n        return () => {\n            cancelled = true;\n        };\n    });\n    return (id, a) => (hasString(id, component) ? getString(id, component, a) : \"​\");\n};\n\n;// CONCATENATED MODULE: ./ui/src/components/Modal.tsx\n\n\n\nconst SaveCancelModal = ({ children, onClose, onSave, show, title, saveButtonText, defaultHeight, large, canSave = true }) => {\n    const modalPromise = (0,react.useRef)();\n    const modalRef = (0,react.useRef)();\n    // In rare instances, we can get double save events. This can happen when we hit enter,\n    // and a new event listener is registered while Moodle is still broadcasting its events\n    // which is then called, and so we get two events. This wouldn't happen if the modal was\n    // not re-rendering, I think.\n    const isSavePermitted = useDuplicatedActionPreventor();\n    const { getModule } = useModules([\"core/modal_factory\", \"core/modal_events\"]);\n    const [ready, setReady] = (0,react.useState)(false);\n    const getSaveButton = (0,react.useCallback)(() => {\n        if (!modalRef.current)\n            return null;\n        const node = modalRef.current.getFooter()[0].querySelector('[data-action=\"save\"]');\n        return node ?? null;\n    }, [modalRef.current]);\n    const setSaveButtonText = (text) => {\n        const saveBtn = getSaveButton();\n        if (!saveBtn || !text)\n            return;\n        saveBtn.textContent = text;\n    };\n    const setButtonAttribute = (attr, value) => {\n        const saveBtn = getSaveButton();\n        if (!saveBtn || !attr)\n            return;\n        if (value === null || typeof value === \"undefined\" || value === false) {\n            saveBtn.removeAttribute(attr);\n        }\n        else {\n            saveBtn.setAttribute(attr, value);\n        }\n    };\n    // Create the modal object.\n    (0,react.useEffect)(() => {\n        let cancelled = false;\n        if (modalRef.current)\n            return;\n        const ModalFactory = getModule(\"core/modal_factory\");\n        if (!ModalFactory)\n            return;\n        if (!modalPromise.current) {\n            modalPromise.current = ModalFactory.create({\n                type: ModalFactory.types.SAVE_CANCEL,\n                title: title,\n                large: large,\n                body: `<div class='block_xp' style='${defaultHeight ? `height: ${defaultHeight}px` : \"\"}'></div>`,\n            });\n        }\n        modalPromise.current.then((modal) => {\n            if (cancelled)\n                return;\n            modalRef.current = modal;\n            if (saveButtonText) {\n                setSaveButtonText(saveButtonText);\n            }\n            setReady(true); // State update to force re-render.\n            if (show) {\n                modal.show();\n            }\n        });\n        return () => {\n            cancelled = true;\n        };\n    });\n    // Attach event listeners.\n    (0,react.useEffect)(() => {\n        const modal = modalRef.current;\n        if (!modal)\n            return;\n        const ModalEvents = getModule(\"core/modal_events\");\n        if (!ModalEvents)\n            return;\n        const root = modal.getRoot();\n        const handleSave = (e) => {\n            if (!isSavePermitted())\n                return;\n            onSave && onSave(e);\n        };\n        const handleClose = () => {\n            onClose && onClose();\n        };\n        // Keep the React node height in sync with the modal body to avoid for the modal\n        // to become scrollable. This is required because our current modal content is\n        // absolute and thus requires a hardcoded height.\n        const updateReactNodeHeight = () => {\n            const body = modal.getBody()[0];\n            const reactNode = body ? body.querySelector(\".block_xp\") : null;\n            if (!body || !reactNode) {\n                return;\n            }\n            const height = body.clientHeight - (parseFloat(getComputedStyle(body).paddingTop) + parseFloat(getComputedStyle(body).paddingBottom));\n            reactNode.style.height = `${height}px`;\n        };\n        const attachResize = () => {\n            window.addEventListener(\"resize\", updateReactNodeHeight);\n        };\n        root.on(ModalEvents.save, handleSave);\n        root.on(ModalEvents.hidden, handleClose);\n        root.on(ModalEvents.shown, attachResize);\n        return () => {\n            root.off(ModalEvents.save, handleSave);\n            root.off(ModalEvents.hidden, handleClose);\n            root.off(ModalEvents.shown, attachResize);\n            window.removeEventListener(\"resize\", updateReactNodeHeight);\n        };\n    });\n    // Update visibility.\n    (0,react.useEffect)(() => {\n        if (!modalRef.current)\n            return;\n        if (show) {\n            modalRef.current.show();\n        }\n        else {\n            modalRef.current.hide();\n        }\n    }, [show, modalRef.current]);\n    // Update title.\n    (0,react.useEffect)(() => {\n        if (!modalRef.current || !title)\n            return;\n        modalRef.current.setTitle(title);\n    }, [title, modalRef.current]);\n    // Update save button text.\n    (0,react.useEffect)(() => {\n        setSaveButtonText(saveButtonText);\n    }, [saveButtonText, modalRef.current]);\n    // Update the save button status.\n    (0,react.useEffect)(() => {\n        setButtonAttribute(\"disabled\", !canSave);\n    }, [canSave, modalRef.current]);\n    return modalRef.current ? react_dom.createPortal(children, modalRef.current.getBody()[0].querySelector(\".block_xp\")) : null;\n};\nconst DeleteModal = ({ children, onClose, onDelete, show, title }) => {\n    const modalPromise = (0,react.useRef)();\n    const modalRef = (0,react.useRef)();\n    const [ready, setReady] = (0,react.useState)(false);\n    const isDeletePermitted = useDuplicatedActionPreventor();\n    const deleteStr = hooks_useString(\"delete\", \"core\");\n    const { getModule } = useModules([\"core/modal_factory\", \"core/modal_events\"]);\n    const getDeleteButton = (0,react.useCallback)(() => {\n        if (!modalRef.current)\n            return null;\n        const node = modalRef.current.getFooter()[0].querySelector('[data-action=\"save\"]');\n        return node ?? null;\n    }, [modalRef.current]);\n    // Create the modal object.\n    (0,react.useEffect)(() => {\n        let cancelled = false;\n        if (modalRef.current)\n            return;\n        const ModalFactory = getModule(\"core/modal_factory\");\n        if (!ModalFactory)\n            return;\n        if (!modalPromise.current) {\n            modalPromise.current = ModalFactory.create({\n                type: ModalFactory.types.SAVE_CANCEL, // We use save_cancel as delete_cancel is only in 4.2.\n                title: title,\n                body: `<div class='block_xp'></div>`,\n            });\n        }\n        modalPromise.current.then((modal) => {\n            if (cancelled)\n                return;\n            modalRef.current = modal;\n            const deleteButton = getDeleteButton();\n            if (deleteButton) {\n                if (deleteStr) {\n                    deleteButton.textContent = deleteStr;\n                }\n                deleteButton.classList.add(\"btn-danger\");\n            }\n            setReady(true); // State update to force re-render.\n            if (show) {\n                modal.show();\n            }\n        });\n        return () => {\n            cancelled = true;\n        };\n    });\n    // Attach event listeners.\n    (0,react.useEffect)(() => {\n        const modal = modalRef.current;\n        if (!modal)\n            return;\n        const ModalEvents = getModule(\"core/modal_events\");\n        if (!ModalEvents)\n            return;\n        const root = modal.getRoot();\n        const handleSave = (e) => {\n            if (!isDeletePermitted())\n                return;\n            onDelete && onDelete(e);\n        };\n        const handleClose = () => {\n            onClose && onClose();\n        };\n        root.on(ModalEvents.save, handleSave);\n        root.on(ModalEvents.hidden, handleClose);\n        return () => {\n            root.off(ModalEvents.save, handleSave);\n            root.off(ModalEvents.hidden, handleClose);\n        };\n    });\n    // Update visibility.\n    (0,react.useEffect)(() => {\n        if (!modalRef.current)\n            return;\n        if (show) {\n            modalRef.current.show();\n        }\n        else {\n            modalRef.current.hide();\n        }\n    }, [show, modalRef.current]);\n    // Update title.\n    (0,react.useEffect)(() => {\n        if (!modalRef.current || !title)\n            return;\n        modalRef.current.setTitle(title);\n    }, [title, modalRef.current]);\n    // Update button.\n    (0,react.useEffect)(() => {\n        if (!modalRef.current || !deleteStr)\n            return;\n        const btn = getDeleteButton();\n        if (!btn)\n            return;\n        btn.textContent = deleteStr;\n    }, [deleteStr, modalRef.current]);\n    return modalRef.current ? react_dom.createPortal(children, modalRef.current.getBody()[0].querySelector(\".block_xp\")) : null;\n};\nconst ModalForm = ({ formClass, formArgs, onClose, onSubmit, title }) => {\n    const modalFormRef = (0,react.useRef)();\n    const { getModule } = useModules([\"core_form/modalform\", \"core/modal_factory\", \"core/modal_events\"]);\n    // Create the modal form.\n    (0,react.useEffect)(() => {\n        if (modalFormRef.current)\n            return;\n        const ModalForm = getModule(\"core_form/modalform\");\n        if (!ModalForm)\n            return;\n        modalFormRef.current = new ModalForm({\n            formClass: formClass,\n            args: formArgs ?? {},\n            modalConfig: {\n                title,\n            },\n        });\n        modalFormRef.current.show();\n    });\n    // Attach event listeners.\n    (0,react.useEffect)(() => {\n        const modalForm = modalFormRef.current;\n        if (!modalForm)\n            return;\n        const ModalForm = getModule(\"core_form/modalform\");\n        const ModalEvents = getModule(\"core/modal_events\");\n        if (!ModalForm || !ModalEvents)\n            return;\n        const handleLoaded = () => {\n            const root = modalForm.modal.getRoot();\n            root[0].classList.add(\"block_xp\");\n            // Register the onClose event.\n            root.on(ModalEvents.hidden, handleClose);\n        };\n        const handleSubmit = () => {\n            onSubmit && onSubmit();\n        };\n        const handleClose = () => {\n            onClose && onClose();\n        };\n        modalForm.addEventListener(modalForm.events.LOADED, handleLoaded);\n        modalForm.addEventListener(modalForm.events.FORM_SUBMITTED, handleSubmit);\n        modalForm.addEventListener(modalForm.events.CANCEL_BUTTON_PRESSED, handleClose);\n        return () => {\n            const modalForm = modalFormRef.current;\n            const root = modalForm?.modal?.getRoot();\n            const rootEl = root?.[0];\n            rootEl?.removeEventListener(modalForm.events.LOADED, handleLoaded);\n            rootEl?.removeEventListener(modalForm.events.FORM_SUBMITTED, handleSubmit);\n            rootEl?.removeEventListener(modalForm.events.CANCEL_BUTTON_PRESSED, handleClose);\n            root.off(ModalEvents.hidden, handleClose);\n        };\n    });\n    (0,react.useEffect)(() => {\n        if (!modalFormRef.current)\n            return;\n        const modal = modalFormRef.current.modal;\n        if (!modal)\n            return;\n        modal.setTitle(title);\n    }, [title]);\n    return null;\n};\n\n;// CONCATENATED MODULE: ./ui/src/components/Notification.tsx\n\nconst NotificationError = ({ children }) => {\n    return react.createElement(\"div\", { className: \"alert alert-danger\" }, children);\n};\n\n;// CONCATENATED MODULE: ./ui/src/components/Pix.tsx\n\n\nconst Pix_Pix = ({ id, component = 'block_xp', className, alt = '' }) => {\n    return React.createElement(\"img\", { src: imageUrl(id, component), alt: alt, className: className });\n};\n/* harmony default export */ const components_Pix = ((/* unused pure expression or super */ null && (Pix_Pix)));\n\n;// CONCATENATED MODULE: ./ui/src/components/Spinner.tsx\n\n\n\nconst Spinner_Spinner = ({ className }) => {\n    const alt = useString('loadinghelp', 'core');\n    return React.createElement(Pix, { id: \"y/loading\", component: \"core\", className: className, alt: alt });\n};\n/* harmony default export */ const components_Spinner = ((/* unused pure expression or super */ null && (Spinner_Spinner)));\n\n;// CONCATENATED MODULE: ./ui/src/components/Str.tsx\n\n\nconst Str_Str = ({ id, component = \"block_xp\", a }) => {\n    const str = hooks_useString(id, component, a);\n    return react.createElement(react.Fragment, null, str || \"​\");\n};\n/* harmony default export */ const components_Str = (Str_Str);\n\n;// CONCATENATED MODULE: ./ui/src/components/Button.tsx\n\n\n\n\n\n\nconst CircleButton = ({ className, ...props }) => {\n    return (react.createElement(\"button\", { className: utils_classNames(\"xp-bg-transparent xp-border-0 xp-p-2 xp-flex xp-items-center xp-rounded-full hover:xp-bg-gray-100\", className), type: \"button\", ...props }));\n};\nconst Button = ({ onClick, disabled, children, primary, className, type = \"button\" }) => {\n    const classes = utils_classNames(\"btn\", primary ? \"btn-primary\" : \"btn-default btn-secondary\", className);\n    return (react.createElement(\"button\", { className: classes, onClick: onClick, disabled: disabled, type: type }, children));\n};\nconst SaveButton = ({ onClick, disabled, label, mutation = {}, statePosition = \"after\" }) => {\n    const getStr = useStrings([\"changessaved\", \"error\"], \"core\");\n    const { isLoading, isSuccess, isError } = mutation;\n    const isStateBefore = statePosition === \"before\";\n    const state = (React.createElement(\"div\", { className: `xp-w-8 xp-flex ${isStateBefore ? \"xp-mr-4 xp-justify-end\" : \"xp-ml-4\"}`, \"aria-live\": \"assertive\" },\n        isLoading ? React.createElement(Spinner, null) : null,\n        isSuccess ? React.createElement(Pix, { id: \"i/valid\", component: \"core\", alt: getStr(\"changessaved\") }) : null,\n        isError ? React.createElement(Pix, { id: \"i/invalid\", component: \"core\", alt: getStr(\"error\") }) : null));\n    return (React.createElement(\"div\", { className: \"xp-flex xp-items-center\" },\n        isStateBefore ? state : null,\n        React.createElement(\"div\", { className: \"\" },\n            React.createElement(Button, { primary: true, onClick: onClick, disabled: disabled || isLoading }, label || React.createElement(Str, { id: \"savechanges\", component: \"core\" }))),\n        !isStateBefore ? state : null));\n};\nconst AnchorButton = ({ children, onClick, className, ...props }) => {\n    const anchorButtonProps = useAnchorButtonProps(onClick);\n    return (React.createElement(\"a\", { className: classNames(\"xp-text-inherit xp-no-underline\", className), ...props, ...anchorButtonProps }, children));\n};\n\n;// CONCATENATED MODULE: ./ui/src/components/Input.tsx\n\nconst Input = ({ className = '', ...props }) => {\n    /** Apply those classes for normalised styling across themes and versions. */\n    return react.createElement(\"input\", { ...props, className: `xp-m-0 form-control ${className}` });\n};\nconst Select = ({ className = '', ...props }) => {\n    /** Apply those classes for normalised styling across themes and versions. */\n    return react.createElement(\"select\", { ...props, className: `xp-m-0 xp-max-w-auto form-control ${className}` });\n};\nconst Textarea = ({ className = '', ...props }) => {\n    /** Apply those classes for normalised styling across themes and versions. */\n    return React.createElement(\"textarea\", { ...props, className: `xp-m-0 form-control ${className}` });\n};\n/* harmony default export */ const components_Input = (Input);\n\n;// CONCATENATED MODULE: ./ui/src/components/NumberInput.tsx\n\n\n\n\nconst NumInput = ({ className, value, onChange, selectOnFocus, ...props }) => {\n    const inputProps = hooks_useNumericInputProps(value, onChange);\n    const handleFocus = (e) => {\n        if (!selectOnFocus)\n            return;\n        e.currentTarget.select();\n    };\n    return react.createElement(components_Input, { type: \"text\", ...inputProps, className: className, onFocus: handleFocus, ...props });\n};\nconst PlainNumberInput = ({ value, onChange, selectOnFocus, ...props }) => {\n    const inputProps = useNumericInputProps(value, onChange);\n    const handleFocus = (e) => {\n        if (!selectOnFocus)\n            return;\n        e.currentTarget.select();\n    };\n    return React.createElement(\"input\", { type: \"text\", ...inputProps, onFocus: handleFocus, ...props });\n};\nconst NumberInputWithButtons = ({ onChange, value, min, max, suffix, step = 1, inputProps }) => {\n    const hasMin = typeof min !== \"undefined\";\n    const hasMax = typeof max !== \"undefined\";\n    const minDisabled = hasMin && min >= value;\n    const maxDisabled = hasMax && max <= value;\n    const minusProps = hooks_useAnchorButtonProps(() => {\n        if (minDisabled)\n            return;\n        handleChange(value - step);\n    });\n    const plusProps = hooks_useAnchorButtonProps(() => {\n        if (maxDisabled)\n            return;\n        handleChange(value + step);\n    });\n    const handleChange = (n) => {\n        let final = n;\n        if (hasMin) {\n            final = Math.max(min, final);\n        }\n        if (hasMax) {\n            final = Math.min(max, final);\n        }\n        onChange(final);\n    };\n    const { className: inputClassName, ...remainingInputProps } = inputProps ?? {};\n    const allInputProps = {\n        className: utils_classNames(\"xp-h-auto xp-border-0 xp-text-center xp-rounded-none focus:xp-z-10\", suffix ? \"xp-pr-6\" : null, inputClassName || \"xp-w-16\"),\n        ...remainingInputProps,\n    };\n    return (react.createElement(\"div\", { className: \"xp-inline-flex xp-rounded xp-border xp-border-solid xp-border-gray-300\" },\n        react.createElement(\"a\", { ...minusProps, className: utils_classNames(\"xp-flex-0 xp-border-0 xp-border-gray-300 xp-border-solid xp-border-r xp-rounded-l xp-py-0.5 xp-px-1 xp-flex xp-items-center xp-justify-center\", \"focus:xp-z-10\", minDisabled ? \"xp-bg-gray-100 xp-cursor-pointer xp-text-gray-500\" : \"xp-bg-white xp-text-inherit\") },\n            react.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 20 20\", fill: \"currentColor\", className: \"xp-w-5 xp-h-5\" },\n                react.createElement(\"path\", { fillRule: \"evenodd\", d: \"M4 10a.75.75 0 01.75-.75h10.5a.75.75 0 010 1.5H4.75A.75.75 0 014 10z\", clipRule: \"evenodd\" }))),\n        react.createElement(\"div\", { className: \"xp-flex-1 xp-relative\" },\n            react.createElement(NumInput, { onChange: handleChange, value: value, ...allInputProps }),\n            suffix ? (react.createElement(\"div\", { className: \"xp-pointer-events-none xp-absolute xp-inset-y-0 xp-right-0 xp-flex xp-items-center xp-pr-2\" },\n                react.createElement(\"span\", { className: \"xp-text-gray-500\" }, suffix))) : null),\n        react.createElement(\"a\", { ...plusProps, className: utils_classNames(\"xp-flex-0 xp-border-0 xp-border-gray-300 xp-border-solid xp-border-l xp-rounded-r xp-py-0.5 xp-px-1 xp-flex xp-items-center xp-justify-center\", \"focus:xp-z-10\", maxDisabled ? \"xp-bg-gray-100 xp-cursor-pointer xp-text-gray-500\" : \"xp-bg-white xp-text-inherit\") },\n            react.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 20 20\", fill: \"currentColor\", className: \"xp-w-5 xp-h-5\" },\n                react.createElement(\"path\", { d: \"M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z\" })))));\n};\n\n;// CONCATENATED MODULE: ./ui/src/components/ResourceList.tsx\n\n\n\n\nconst ListEntry = ({ resource, onSelect }) => {\n    if (resource.type === \"header\") {\n        return react.createElement(ListEntryHeader, { label: resource.label });\n    }\n    return (react.createElement(ListEntryItem, { label: resource.label, description: resource.description, isavailable: resource.isavailable, onSelect: onSelect }));\n};\nconst ListEntryItem = ({ label, description, isavailable = true, onSelect }) => {\n    const headingId = useUniqueId();\n    const buttonListeners = useRoleButtonListeners(onSelect);\n    const disabledOpacityClass = `${!isavailable ? \"xp-opacity-60 group-focus:xp-opacity-100 group-hover:xp-opacity-100\" : \"\"}`;\n    return (react.createElement(\"div\", { className: \"xp-p-[0.2rem] xp-relative xp-group focus:xp-z-10 hover:xp-bg-gray-100\" },\n        react.createElement(\"div\", { tabIndex: 0, role: \"button\", \"aria-describedby\": headingId, className: \"xp-px-1.5 xp-py-0.5\", ...buttonListeners },\n            react.createElement(\"div\", { id: headingId, className: `xp-flex` },\n                react.createElement(\"div\", { className: utils_classNames(disabledOpacityClass, \"xp-text-medium\", description ? \"xp-text-xl\" : \"xp-text-base\") }, label),\n                !isavailable ? (react.createElement(\"div\", { className: \"xp-ml-2\" },\n                    react.createElement(\"span\", { className: \"badge badge-pill badge-warning\" },\n                        react.createElement(components_Str, { id: \"unavailable\" })))) : null),\n            description ? (react.createElement(\"div\", { className: utils_classNames(disabledOpacityClass, \"xp-text-gray-500\"), dangerouslySetInnerHTML: { __html: description } })) : null)));\n};\nconst ListEntryHeader = ({ label }) => {\n    return (react.createElement(\"div\", { className: \"xp-px-[0.2rem] xp-bg-gray-200 xp-mt-2 first:xp-mt-0 xp-sticky xp-top-0 xp-z-10\" },\n        react.createElement(\"div\", { className: \"xp-px-1.5 xp-py-1 xp-text-sm xp-leading-tight xp-font-bold\" }, label)));\n};\nconst PlainResourceList = ({ resources, onSelect, emptyContent, }) => {\n    if (!resources.length) {\n        return react.createElement(react.Fragment, null, emptyContent || react.createElement(EmptyResult, null));\n    }\n    return (react.createElement(\"div\", { className: \"xp-flex-1 xp-divide-y xp-divide-gray-200\" }, resources.map((o) => {\n        return react.createElement(ListEntry, { key: `${o.type || \"\"}${o.name}`, resource: o, onSelect: () => onSelect && onSelect(o) });\n    })));\n};\nconst LoadingResourceList = () => {\n    return (react.createElement(\"div\", { className: \"xp-flex-1\" },\n        react.createElement(\"div\", { className: \"xp-h-8 xp-w-full xp-bg-gray-100 xp-mb-2\" }),\n        react.createElement(\"div\", { className: \"xp-h-8 xp-w-full xp-bg-gray-100 xp-mb-2\" }),\n        react.createElement(\"div\", { className: \"xp-h-8 xp-w-full xp-bg-gray-100 xp-mb-2\" }),\n        react.createElement(\"div\", { className: \"xp-h-8 xp-w-full xp-bg-gray-100 xp-mb-2\" }),\n        react.createElement(\"div\", { className: \"xp-h-8 xp-w-full xp-bg-gray-100 xp-mb-2\" })));\n};\nconst EmptyResult = ({ message, content }) => {\n    return (react.createElement(\"div\", { className: \"xp-flex-1 xp-flex xp-flex-col xp-items-center xp-justify-center xp-text-center\" },\n        react.createElement(\"div\", null, message || react.createElement(components_Str, { id: \"noneareavailable\" })),\n        content ? react.createElement(\"div\", { className: \"xp-my-2\" }, content) : null));\n};\n\n;// CONCATENATED MODULE: ./ui/src/components/Icons.tsx\n\nconst Bars3BottomLeftIcon = ({ className }) => (React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 24 24\", fill: \"currentColor\", className: className },\n    React.createElement(\"path\", { fillRule: \"evenodd\", d: \"M3 6.75A.75.75 0 013.75 6h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 6.75zM3 12a.75.75 0 01.75-.75h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 12zm0 5.25a.75.75 0 01.75-.75H12a.75.75 0 010 1.5H3.75a.75.75 0 01-.75-.75z\", clipRule: \"evenodd\" })));\nconst CheckBadgeIconSolid = ({ className }) => (React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 24 24\", fill: \"currentColor\", className: className },\n    React.createElement(\"path\", { fillRule: \"evenodd\", d: \"M8.603 3.799A4.49 4.49 0 0112 2.25c1.357 0 2.573.6 3.397 1.549a4.49 4.49 0 013.498 1.307 4.491 4.491 0 011.307 3.497A4.49 4.49 0 0121.75 12a4.49 4.49 0 01-1.549 3.397 4.491 4.491 0 01-1.307 3.497 4.491 4.491 0 01-3.497 1.307A4.49 4.49 0 0112 21.75a4.49 4.49 0 01-3.397-1.549 4.49 4.49 0 01-3.498-1.306 4.491 4.491 0 01-1.307-3.498A4.49 4.49 0 012.25 12c0-1.357.6-2.573 1.549-3.397a4.49 4.49 0 011.307-3.497 4.49 4.49 0 013.497-1.307zm7.007 6.387a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z\", clipRule: \"evenodd\" })));\nconst LanguageIcon = ({ className }) => (React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 24 24\", fill: \"currentColor\", className: className },\n    React.createElement(\"path\", { fillRule: \"evenodd\", d: \"M9 2.25a.75.75 0 01.75.75v1.506a49.38 49.38 0 015.343.371.75.75 0 11-.186 1.489c-.66-.083-1.323-.151-1.99-.206a18.67 18.67 0 01-2.969 6.323c.317.384.65.753.998 1.107a.75.75 0 11-1.07 1.052A18.902 18.902 0 019 13.687a18.823 18.823 0 01-5.656 4.482.75.75 0 11-.688-1.333 17.323 17.323 0 005.396-4.353A18.72 18.72 0 015.89 8.598a.75.75 0 011.388-.568A17.21 17.21 0 009 11.224a17.17 17.17 0 002.391-5.165 48.038 48.038 0 00-8.298.307.75.75 0 01-.186-1.489 49.159 49.159 0 015.343-.371V3A.75.75 0 019 2.25zM15.75 9a.75.75 0 01.68.433l5.25 11.25a.75.75 0 01-1.36.634l-1.198-2.567h-6.744l-1.198 2.567a.75.75 0 01-1.36-.634l5.25-11.25A.75.75 0 0115.75 9zm-2.672 8.25h5.344l-2.672-5.726-2.672 5.726z\", clipRule: \"evenodd\" })));\nconst PaperAirplaneIconSolid = ({ className }) => (React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 24 24\", fill: \"currentColor\", className: className },\n    React.createElement(\"path\", { d: \"M3.478 2.405a.75.75 0 00-.926.94l2.432 7.905H13.5a.75.75 0 010 1.5H4.984l-2.432 7.905a.75.75 0 00.926.94 60.519 60.519 0 0018.445-8.986.75.75 0 000-1.218A60.517 60.517 0 003.478 2.405z\" })));\nconst ChevronLeftIconSolid = ({ className }) => (react.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", fill: \"none\", viewBox: \"0 0 24 24\", strokeWidth: 1.5, stroke: \"currentColor\", className: className },\n    react.createElement(\"path\", { strokeLinecap: \"round\", strokeLinejoin: \"round\", d: \"M15.75 19.5 8.25 12l7.5-7.5\" })));\n\n;// CONCATENATED MODULE: ./ui/src/components/Slider.tsx\n\n\n\n\n\n\nconst slideClasses = \"xp-absolute xp-inset-0 xp-transform-gpu xp-transition-transform xp-duration-300\";\nconst slideNextClasses = `${slideClasses} xp-translate-x-full`;\nconst slidePrevClasses = `${slideClasses} xp--translate-x-full`;\nconst Slider = ({ children: rawChildren, index }) => {\n    const [internalIndex, setInternalIndex] = (0,react.useState)(index);\n    const slidesRef = (0,react.useRef)([]);\n    const children = react.Children.toArray(rawChildren).filter(Boolean);\n    const nSlides = children.length;\n    // When the number of slides changes.\n    (0,react.useEffect)(() => {\n        slidesRef.current = slidesRef.current.slice(0, nSlides);\n    }, [nSlides]);\n    // Effects when the current slide changes.\n    (0,react.useEffect)(() => {\n        const Aria = getModule(\"core/aria\");\n        slidesRef.current.forEach((item, i) => {\n            if (i === internalIndex) {\n                Aria.unhide(item);\n                item?.focus();\n            }\n            else {\n                Aria.hide(item);\n            }\n        });\n    }, [internalIndex]);\n    // When the index changes, update the local one. We do this to let a child render the slide that\n    // we should transition to before we update the internal index that would render the child instantly.\n    // This allows for the number of slides to be dynamically created by the parent.\n    (0,react.useEffect)(() => {\n        setInternalIndex(index);\n    }, [index]);\n    return (react.createElement(\"div\", { className: \"xp-w-full xp-h-full xp-overflow-hidden xp-relative\" }, react.Children.map(children, (child, i) => {\n        const isActive = i === internalIndex;\n        const isPast = i < internalIndex;\n        return (react.createElement(\"div\", { ref: (el) => (slidesRef.current[i] = el), className: isActive ? slideClasses : isPast ? slidePrevClasses : slideNextClasses }, child));\n    })));\n};\nconst SliderTester = () => {\n    const [index, setIndex] = useState(0);\n    return (React.createElement(\"div\", null,\n        React.createElement(\"div\", { className: \"xp-h-[500px] xp-w-full\" },\n            React.createElement(Slider, { index: index },\n                React.createElement(Slide, null,\n                    \"Slide 1\",\n                    React.createElement(\"div\", { className: \"xp-w-4\", style: { height: \"1000px\" } })),\n                React.createElement(Slide, null,\n                    \"Slide 2\",\n                    React.createElement(\"div\", { className: \"xp-w-4\", style: { height: \"100px\" } })),\n                React.createElement(Slide, null,\n                    \"Slide 3\",\n                    React.createElement(\"div\", { className: \"xp-w-4\", style: { height: \"2000px\" } })),\n                React.createElement(Slide, null,\n                    \"Slide 4\",\n                    React.createElement(\"div\", { className: \"xp-w-4\", style: { height: \"500px\" } })),\n                React.createElement(Slide, null,\n                    \"Slide 5\",\n                    React.createElement(\"div\", { className: \"xp-w-4\", style: { height: \"1500px\" } })))),\n        React.createElement(\"button\", { onClick: () => setIndex((i) => Math.max(0, Math.min(5 - 1, i - 1))) }, \"Prev\"),\n        React.createElement(\"button\", { onClick: () => setIndex((i) => Math.max(0, Math.min(5 - 1, i + 1))) }, \"Next\")));\n};\nconst Slide = ({ children, header, footer, }) => {\n    /* Firefox requires the vertical scroll to be in the child element, else something odd happens. */\n    return (react.createElement(\"div\", { className: \"xp-w-full xp-h-full xp-flex xp-flex-col\" },\n        header,\n        react.createElement(\"div\", { className: \"xp-flex xp-flex-col xp-grow xp-overflow-y-auto\" }, children),\n        footer));\n};\nconst SlideHeader = ({ children, title, hasBack, onBack, }) => {\n    return (react.createElement(\"div\", { className: \"xp-mb-2\" },\n        react.createElement(\"div\", { className: \"xp-flex xp-flex-row xp-items-center xp-gap-4\" },\n            hasBack ? (react.createElement(\"div\", { className: \"shrink-0 xp-grow-0\" },\n                react.createElement(CircleButton, { onClick: onBack, type: \"button\", className: \"xp--mr-2\" },\n                    react.createElement(ChevronLeftIconSolid, { className: \"xp-h-6 xp-w-6\" }),\n                    react.createElement(\"span\", { className: \"xp-sr-only\" },\n                        react.createElement(components_Str, { id: \"back\", component: \"core\" }))))) : null,\n            react.createElement(\"div\", { className: \"xp-flex-1 xp-text-lg xp-font-bold\" }, title)),\n        children));\n};\nconst SlideHeaderWithFilter = ({ hasBack, onBack, onFilterChange, filterValue, filterPlaceholder, title, }) => {\n    const filterStr = hooks_useString(\"filterellipsis\");\n    const handleChange = (0,react.useCallback)((e) => {\n        onFilterChange && onFilterChange(e.currentTarget.value || \"\");\n    }, [onFilterChange]);\n    return (react.createElement(SlideHeader, { hasBack: hasBack, onBack: onBack, title: title },\n        react.createElement(\"div\", { className: \"xp-mt-0.5\" },\n            react.createElement(\"input\", { className: \"form-control xp-w-full\", type: \"text\", value: filterValue || \"\", placeholder: filterPlaceholder || filterStr, onChange: handleChange }))));\n};\n\n;// CONCATENATED MODULE: ./ui/src/components/RuleWizard.tsx\n\n\n\n\n\n\n\n\n\n\n\nconst CmResourceList = ({ courseId, filterTerm, onSelect, resetFilterTerm, options = {} }) => {\n    const query = (0,es.useQuery)([\"cm-resource-list\", courseId, options], async () => {\n        const Ajax = await getModuleAsync(\"core/ajax\");\n        return (await Ajax.call([\n            {\n                methodname: \"block_xp_search_modules\",\n                args: { courseid: courseId, query: \"*\", options },\n            },\n        ])[0]);\n    });\n    const resources = (0,react.useMemo)(() => {\n        const normalisedFilterTerm = (filterTerm || \"\").trim().toLowerCase();\n        const data = query.data || [];\n        return data.reduce((carry, section, idx) => {\n            const modules = normalisedFilterTerm === \"\"\n                ? section.modules\n                : section.modules.filter((module) => {\n                    return module.name.includes(normalisedFilterTerm);\n                });\n            if (!modules.length) {\n                return carry;\n            }\n            // Only show headers if we have multiple sections.\n            if (data.length > 1) {\n                carry.push({ name: idx, label: section.name, type: \"header\" });\n            }\n            modules.forEach((module) => {\n                carry.push({ name: module.cmid, label: module.name });\n            });\n            return carry;\n        }, []);\n    }, [query.data, filterTerm]);\n    if (!query.isSuccess || query.isLoading) {\n        return react.createElement(LoadingResourceList, null);\n    }\n    return (react.createElement(PlainResourceList, { resources: resources, onSelect: (r) => onSelect(r.name), emptyContent: react.createElement(EmptyResult, { message: react.createElement(components_Str, { id: \"nothingmatchesfilter\" }), content: resetFilterTerm ? (react.createElement(Button, { onClick: resetFilterTerm },\n                react.createElement(components_Str, { id: \"clearfilter\" }))) : null }) }));\n};\nconst CmResourceListSlide = ({ courseId, onSelect, hasBack, onBack, cmListOptions, }) => {\n    const [filterTerm, setFilterTerm] = (0,react.useState)(\"\");\n    return (react.createElement(Slide, { header: react.createElement(SlideHeaderWithFilter, { filterValue: filterTerm, onFilterChange: setFilterTerm, hasBack: hasBack, onBack: onBack, title: react.createElement(components_Str, { id: \"rulefiltercm\" }) }) },\n        react.createElement(CmResourceList, { options: cmListOptions, courseId: courseId, onSelect: onSelect, filterTerm: filterTerm, resetFilterTerm: () => setFilterTerm(\"\") })));\n};\nconst SectionResourceList = ({ courseId, onSelect, options = {} }) => {\n    const query = (0,es.useQuery)([\"section-resource-list\", courseId, options], async () => ajaxRequest(\"block_xp_get_sections\", { courseid: courseId, options }));\n    const resources = (0,react.useMemo)(() => {\n        const data = query.data || [];\n        return data.reduce((carry, section, idx) => {\n            carry.push({ name: section.number, label: section.name });\n            return carry;\n        }, []);\n    }, [query.data]);\n    if (!query.isSuccess || query.isLoading) {\n        return react.createElement(LoadingResourceList, null);\n    }\n    return (react.createElement(PlainResourceList, { resources: resources, onSelect: (r) => onSelect(r.name), emptyContent: react.createElement(EmptyResult, { message: react.createElement(components_Str, { id: \"nothingmatchesfilter\" }) }) }));\n};\nconst CmNameSlide = ({ onBack, config, setConfig, }) => {\n    const defaultValue = 1;\n    const getStr = hooks_useStrings([\"rule:eq\", \"rule:contains\", \"rulefiltercmname\"]);\n    return (react.createElement(Slide, { header: react.createElement(SlideHeader, { hasBack: true, onBack: onBack, title: getStr(\"rulefiltercmname\") }) },\n        react.createElement(\"div\", { className: \"xp-mb-4\" },\n            react.createElement(\"label\", { htmlFor: \"xp-rule-cmname-name\", className: \"xp-m-0\" },\n                react.createElement(components_Str, { id: \"activityname\" })),\n            react.createElement(\"div\", { className: \"xp-flex xp-gap-2\" },\n                react.createElement(Select, { value: config.filterint1, onChange: (e) => setConfig({ filterint1: parseInt(e.currentTarget.value, 10) || 0 }), defaultValue: defaultValue.toString(), className: \"xp-w-auto\" },\n                    react.createElement(\"option\", { value: \"1\" }, getStr(\"rule:contains\")),\n                    react.createElement(\"option\", { value: \"0\" }, getStr(\"rule:eq\"))),\n                react.createElement(components_Input, { id: \"xp-rule-cmname-name\", value: config.filterchar1 || \"\", onChange: (e) => setConfig({ filterchar1: e.currentTarget.value, filterint1: config.filterint1 ?? defaultValue }), maxLength: 255 })),\n            react.createElement(\"p\", { className: \"xp-text-gray-500 xp-m-0 xp-mt-1\" },\n                react.createElement(components_Str, { id: \"activityname_help\" }))),\n        react.createElement(PointsToAwardInput, { config: config, setConfig: setConfig })));\n};\nconst anyFilterMethodStuff = {\n    getSlide: () => null,\n    hasSlide: false,\n    isConfigValid: () => true,\n    isSlideRequiringSubmit: false,\n};\nconst filterMethoStuff = {\n    cm: {\n        getSlide: (props) => (react.createElement(CmResourceListSlide, { cmListOptions: {\n                completionenabled: props.method.scopeoptions?.completionenabled,\n                type: props.method.scopeoptions?.type,\n            }, hasBack: props.hasBack, onBack: props.onBack, courseId: props.courseId, onSelect: (cmid) => {\n                props.setConfig({ filtercmid: cmid });\n                props.onContinue();\n            } })),\n        hasSlide: true,\n        isConfigValid: () => true,\n        isSlideRequiringSubmit: false,\n    },\n    cmname: {\n        getSlide: (props) => react.createElement(CmNameSlide, { onBack: props.onBack, config: props.config, setConfig: props.setConfig }),\n        hasSlide: true,\n        isConfigValid: (config) => [0, 1].includes(config?.filterint1) &&\n            typeof config.filterchar1 === \"string\" &&\n            config.filterchar1.trim() !== \"\" &&\n            typeof config?.points === \"number\" &&\n            !isNaN(config.points),\n        isSlideRequiringSubmit: true,\n        collectsPoints: true,\n    },\n    section: {\n        getSlide: (props) => (react.createElement(Slide, { header: react.createElement(SlideHeader, { hasBack: props.hasBack, onBack: props.onBack, title: react.createElement(components_Str, { id: \"rulefiltersection\" }) }) },\n            react.createElement(SectionResourceList, { courseId: props.courseId, onSelect: (num) => {\n                    props.setConfig({ filterint1: num });\n                    props.onContinue();\n                } }))),\n        hasSlide: true,\n        isConfigValid: () => true,\n        isSlideRequiringSubmit: false,\n    },\n    any: anyFilterMethodStuff,\n    anycm: anyFilterMethodStuff,\n    anycourse: anyFilterMethodStuff,\n    anysection: anyFilterMethodStuff,\n    thiscourse: anyFilterMethodStuff,\n};\nconst defaultConfig = { points: 10 };\nconst RuleWizardModal = (props) => {\n    const getStr = hooks_useStrings([\"addacondition\"]);\n    const getCoreStr = hooks_useStrings([\"continue\", \"save\"], \"core\");\n    const [selectedMethod, setSelectedMethod] = (0,react.useState)(null);\n    const [config, setConfig] = (0,react.useState)(defaultConfig);\n    const [index, setIndex] = (0,react.useState)(0);\n    const handleSelected = (method) => {\n        if (!(method in filterMethoStuff)) {\n            return;\n        }\n        setSelectedMethod(method);\n        setIndex(1);\n    };\n    const handleIndexChange = (rawIndex) => {\n        const newIndex = Math.max(0, rawIndex);\n        if (newIndex === 0) {\n            setConfig(defaultConfig);\n        }\n        setIndex(newIndex);\n    };\n    const handleAddToConfig = (data) => {\n        setConfig({ ...config, ...data });\n    };\n    const handleBack = () => {\n        handleIndexChange(index - 1);\n    };\n    const resetState = (0,react.useCallback)(() => {\n        setSelectedMethod(null);\n        setConfig(defaultConfig);\n        setIndex(0);\n    }, []);\n    (0,react.useEffect)(() => {\n        // Reset the state when the modal is closed/hidden.\n        if (!props.show) {\n            resetState();\n        }\n    }, [props.show]);\n    const methodStuff = selectedMethod ? filterMethoStuff[selectedMethod] ?? null : null;\n    const isLastStep = index === (methodStuff?.hasSlide && !methodStuff?.collectsPoints ? 2 : 1);\n    const isStepContinue = !isLastStep;\n    const isStepValid = methodStuff && index === 1 ? methodStuff?.isConfigValid(config) : true;\n    const isStepRequiringButton = Boolean(methodStuff?.isSlideRequiringSubmit);\n    const canClickSaveButton = (isLastStep || isStepRequiringButton) && isStepValid;\n    const handleSave = (e) => {\n        e.preventDefault();\n        if (!canClickSaveButton) {\n            return;\n        }\n        if (isStepContinue) {\n            handleIndexChange(index + 1);\n            return;\n        }\n        if (!selectedMethod) {\n            return;\n        }\n        props.onSave({ filter: selectedMethod, config });\n    };\n    const handleClose = () => {\n        props.onClose();\n    };\n    const methodSlide = selectedMethod\n        ? methodStuff?.getSlide({\n            setConfig: handleAddToConfig,\n            config,\n            hasBack: index === 1,\n            onBack: handleBack,\n            onContinue: () => handleIndexChange(index + 1),\n            method: props.method,\n            courseId: props.courseid,\n        })\n        : null;\n    const sortedFilters = (0,react.useMemo)(() => {\n        return props.filters.sort((a, b) => {\n            const wa = a.weight ?? null;\n            const wb = b.weight ?? null;\n            if (wa === wb)\n                return 0;\n            if (wa === null || wb === null)\n                return 1; // Always show null last.\n            if (wa === 0)\n                return -1; // Always show the 0 weight first.\n            return wb - wa; // Descending order.\n        });\n    }, [props.filters]);\n    return (react.createElement(SaveCancelModal, { show: props.show, large: true, defaultHeight: 500, canSave: canClickSaveButton, onSave: handleSave, onClose: handleClose, saveButtonText: isStepContinue ? getCoreStr(\"continue\") : getCoreStr(\"save\"), title: getStr(\"addacondition\") },\n        react.createElement(Slider, { index: index },\n            react.createElement(Slide, null,\n                react.createElement(PlainResourceList, { onSelect: (r) => handleSelected(r.name), resources: sortedFilters })),\n            selectedMethod && methodSlide ? methodSlide : null,\n            selectedMethod && !methodStuff?.collectsPoints ? (react.createElement(Slide, { header: react.createElement(SlideHeader, { hasBack: true, onBack: handleBack, title: methodStuff?.hasSlide ? react.createElement(components_Str, { id: \"pointstoaward\" }) : react.createElement(components_Str, { id: `rulefilter${selectedMethod}` }) }) },\n                react.createElement(\"div\", { className: \"\" },\n                    react.createElement(PointsToAwardInput, { config: config, setConfig: setConfig })))) : null)));\n};\nconst PointsToAwardInput = ({ setConfig, config, }) => {\n    return (react.createElement(\"div\", null,\n        react.createElement(\"label\", { htmlFor: \"xp-rule-pointstoaward\", className: \"xp-m-0\" },\n            react.createElement(components_Str, { id: \"pointstoaward\" })),\n        react.createElement(\"div\", null,\n            react.createElement(NumberInputWithButtons, { value: config.points, onChange: (points) => setConfig({ ...config, points }), min: 0, max: 9999999, inputProps: { id: \"xp-rule-pointstoaward\", className: \"xp-w-24\", selectOnFocus: true } })),\n        react.createElement(\"p\", { className: \"xp-text-gray-500 xp-m-0 xp-mt-1\" },\n            react.createElement(components_Str, { id: \"pointstoaward_help\" }))));\n};\n\n// EXTERNAL MODULE: ./node_modules/react-query/es/core/queryClient.js + 4 modules\nvar queryClient = __webpack_require__(98);\n;// CONCATENATED MODULE: ./ui/src/lib/query.ts\n\n\nconst query_queryClient = new queryClient/* QueryClient */.E({\n    defaultOptions: {\n        queries: {\n            staleTime: 1000 * 60,\n            onError: (err) => getModule(\"core/notification\").exception(err),\n        },\n        mutations: {\n            onError: (err) => getModule(\"core/notification\").exception(err),\n        },\n    },\n});\n\n;// CONCATENATED MODULE: ./ui/src/lib/types.ts\nvar ContextLevel;\n(function (ContextLevel) {\n    ContextLevel[ContextLevel[\"System\"] = 10] = \"System\";\n    ContextLevel[ContextLevel[\"User\"] = 30] = \"User\";\n    ContextLevel[ContextLevel[\"CourseCategory\"] = 40] = \"CourseCategory\";\n    ContextLevel[ContextLevel[\"Course\"] = 50] = \"Course\";\n    ContextLevel[ContextLevel[\"Module\"] = 70] = \"Module\";\n})(ContextLevel || (ContextLevel = {}));\n;\n;\n\n;// CONCATENATED MODULE: ./ui/src/completion-rules.tsx\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst useRules = (contextid, types, childcontextid) => {\n    return (0,es.useQuery)([\"rules\", contextid, types, childcontextid], async () => {\n        const data = await ajaxRequest(\"block_xp_get_rules\", {\n            contextid,\n            types,\n            childcontextid,\n        });\n        return data.map((data) => ({\n            ...data,\n            method: data.typename,\n            filter: data.filtername,\n        }));\n    });\n};\nconst useAddRuleMutation = (contextid, childcontextid, { onSuccess }) => {\n    return (0,es.useMutation)(async ({ method, filter, config }) => {\n        return ajaxRequest(\"block_xp_create_rule\", {\n            contextid,\n            childcontextid: childcontextid ?? 0,\n            points: config.points ?? 0,\n            type: {\n                name: method,\n                char1: config.typechar1 ?? null,\n            },\n            filter: {\n                name: filter,\n                courseid: config.filtercourseid ?? null,\n                cmid: config.filtercmid ?? null,\n                int1: config.filterint1 ?? null,\n                char1: config.filterchar1 ?? null,\n            },\n        });\n    }, {\n        onSuccess,\n    });\n};\nconst useDeleteRuleMutation = () => {\n    return (0,es.useMutation)(async ({ id }) => {\n        return ajaxRequest(\"block_xp_delete_rule\", { id });\n    });\n};\nconst AppContext = react.createContext({\n    rules: [],\n    addRule: () => { },\n    editRule: (id) => { },\n    removeRule: (id) => { },\n});\nconst availableRuleTypes = [\"cm_completion\", \"section_completion\", \"course_completion\"];\nconst guessMethodFromLocation = () => {\n    return Math.max(0, availableRuleTypes.indexOf((window.location.hash ?? \"\").replace(/^#/, \"\")));\n};\nconst updateLocationFromMethodIndex = (idx) => {\n    const hash = \"#\" + availableRuleTypes[idx];\n    window.location.hash = hash;\n};\nconst App = (props) => {\n    const queryClient = (0,es.useQueryClient)();\n    const [selectedTabIndex, setSelectedTabIndex] = (0,react.useState)(guessMethodFromLocation);\n    const [optimisticallyDeleted, setOptimisticallyDeleted] = (0,react.useState)([]);\n    const childcontextid = props.childcontext?.id ?? null;\n    const currentCourseId = props.childcontext?.contextlevel === ContextLevel.Course ? props.childcontext.instanceid : props.world.courseid;\n    const [isAdding, setIsAdding] = (0,react.useState)(false);\n    const [isEditing, setIsEditing] = (0,react.useState)(null);\n    const [isDeleting, setIsDeleting] = (0,react.useState)(null);\n    const getStr = hooks_useStrings([\"deletecondition\", \"editcondition\", \"ruleadded\"]);\n    const rulesQuery = useRules(props.world.contextid, availableRuleTypes, childcontextid);\n    const addRuleMutation = useAddRuleMutation(props.world.contextid, childcontextid, {\n        onSuccess: () => {\n            invalidateCurrentQuery();\n            setIsAdding(false);\n            const Toast = getModule(\"core/toast\");\n            Toast && Toast.add(getStr(\"ruleadded\"));\n        },\n    });\n    const deleteRuleMutation = useDeleteRuleMutation();\n    const handleSelectedTabIndexChange = (idx) => {\n        setSelectedTabIndex(idx);\n        setIsAdding(false);\n        setIsEditing(null);\n        setIsDeleting(null);\n        updateLocationFromMethodIndex(idx);\n    };\n    const currentRuleType = availableRuleTypes[selectedTabIndex];\n    const rules = (0,react.useMemo)(() => {\n        return (rulesQuery.data || []).filter((r) => !optimisticallyDeleted.includes(r.id));\n    }, [rulesQuery.data, optimisticallyDeleted]);\n    const invalidateCurrentQuery = (0,react.useCallback)(() => {\n        queryClient.invalidateQueries([\"rules\", props.world.contextid, availableRuleTypes, childcontextid]);\n    }, [queryClient, props]);\n    const ruleTypesByName = (0,react.useMemo)(() => {\n        return props.ruletypes.reduce((acc, ruletype) => {\n            acc[ruletype.name] = ruletype;\n            return acc;\n        }, {});\n    }, [props.ruletypes]);\n    const groupedRules = (0,react.useMemo)(() => {\n        return rules.reduce((acc, rule) => {\n            if (!acc[rule.method]) {\n                acc[rule.method] = [];\n            }\n            acc[rule.method].push(rule);\n            return acc;\n        }, {});\n    }, [rules]);\n    const currentMethodFilters = (0,react.useMemo)(() => {\n        if (!ruleTypesByName[currentRuleType]?.filters) {\n            return [];\n        }\n        return props.rulefilters\n            .filter((filter) => ruleTypesByName[currentRuleType].filters.includes(filter.name))\n            .filter((filter) => filter.ismultipleallowed || !groupedRules[currentRuleType]?.some((rule) => rule.filter === filter.name));\n    }, [currentRuleType, props.rulefilters, groupedRules]);\n    const canAdd = true;\n    const showAddBtnInTabs = canAdd && groupedRules[currentRuleType]?.length;\n    if (rulesQuery.isLoading || rulesQuery.isError) {\n        return react.createElement(AppLoading, null);\n    }\n    return (react.createElement(AppContext.Provider, { value: {\n            rules,\n            addRule: () => setIsAdding(true),\n            editRule: (ruleId) => setIsEditing(ruleId),\n            removeRule: (ruleId) => setIsDeleting(ruleId),\n        } },\n        react.createElement(\"div\", null,\n            react.createElement(tabs/* Tab */.o.Group, { selectedIndex: selectedTabIndex, onChange: handleSelectedTabIndexChange },\n                react.createElement(tabs/* Tab */.o.List, { as: \"div\", className: \"nav nav-tabs\" },\n                    react.createElement(tabs/* Tab */.o, { as: react.Fragment }, ({ selected }) => (react.createElement(\"button\", { className: utils_classNames(\"nav-item nav-link\", selected ? \"active\" : null) },\n                        react.createElement(components_Str, { id: \"activity\", component: \"core\" })))),\n                    react.createElement(tabs/* Tab */.o, { as: react.Fragment }, ({ selected }) => (react.createElement(\"button\", { className: utils_classNames(\"nav-item nav-link\", selected ? \"active\" : null) },\n                        react.createElement(components_Str, { id: \"section\", component: \"core\" })))),\n                    react.createElement(tabs/* Tab */.o, { as: react.Fragment }, ({ selected }) => (react.createElement(\"button\", { className: utils_classNames(\"nav-item nav-link\", selected ? \"active\" : null) },\n                        react.createElement(components_Str, { id: \"course\", component: \"core\" })))),\n                    react.createElement(\"div\", { className: \"xp-flex-1 xp-flex xp-justify-end xp-items-center\" }, showAddBtnInTabs ? (react.createElement(\"button\", { className: \"btn btn-primary btn-sm\", onClick: () => setIsAdding(true) },\n                        react.createElement(components_Str, { id: \"add\", component: \"core\" }))) : null)),\n                react.createElement(tabs/* Tab */.o.Panels, { className: \"xp-mt-4\" },\n                    react.createElement(tabs/* Tab */.o.Panel, null, \"cm_completion\" in ruleTypesByName ? (react.createElement(CompletionRules, { rules: groupedRules.cm_completion, type: ruleTypesByName[\"cm_completion\"], filters: props.rulefilters })) : (react.createElement(NotificationError, null,\n                        react.createElement(components_Str, { id: \"unknowntypea\", a: \"cm_completion\" })))),\n                    react.createElement(tabs/* Tab */.o.Panel, null, \"section_completion\" in ruleTypesByName ? (react.createElement(CompletionRules, { rules: groupedRules.section_completion, type: ruleTypesByName[\"section_completion\"], filters: props.rulefilters })) : (react.createElement(NotificationError, null,\n                        react.createElement(components_Str, { id: \"unknowntype\", a: \"section_completion\" })))),\n                    react.createElement(tabs/* Tab */.o.Panel, null, \"course_completion\" in ruleTypesByName ? (react.createElement(CompletionRules, { rules: groupedRules.course_completion, type: ruleTypesByName[\"course_completion\"], filters: props.rulefilters })) : (react.createElement(NotificationError, null,\n                        react.createElement(components_Str, { id: \"unknowntype\", a: \"course_completion\" }))))))),\n        react.createElement(RuleWizardModal, { show: isAdding, courseid: currentCourseId, contextlevel: props.world.contextlevel, method: ruleTypesByName[currentRuleType], filters: currentMethodFilters, onClose: () => setIsAdding(false), onSave: ({ filter, config }) => {\n                addRuleMutation.mutate({ method: currentRuleType, filter, config });\n            } }),\n        react.createElement(DeleteModal, { show: isDeleting !== null, onClose: () => setIsDeleting(null), onDelete: () => {\n                if (!isDeleting)\n                    return;\n                setOptimisticallyDeleted([...optimisticallyDeleted, isDeleting]);\n                deleteRuleMutation.mutate({ id: isDeleting }, {\n                    onError: () => {\n                        setOptimisticallyDeleted(optimisticallyDeleted.filter((id) => id !== isDeleting));\n                    },\n                    onSuccess: () => {\n                        invalidateCurrentQuery();\n                    },\n                    onSettled: () => {\n                        setIsDeleting(null);\n                    },\n                });\n            }, title: getStr(\"deletecondition\") },\n            react.createElement(components_Str, { id: \"areyousure\", component: \"core\" })),\n        isEditing ? (react.createElement(ModalForm, { formClass: \"block_xp\\\\form\\\\rule\", formArgs: { id: isEditing }, title: getStr(\"editcondition\"), onClose: () => setIsEditing(null), onSubmit: () => {\n                setIsEditing(null);\n                invalidateCurrentQuery();\n            } })) : null));\n};\nconst groupRulesByFilter = (rules) => {\n    if (!rules)\n        return [];\n    const filterNames = rules.map((rule) => rule.filter).filter((value, index, self) => self.indexOf(value) === index);\n    return filterNames\n        .map((filterName) => {\n        const rulesForFilter = rules.filter((rule) => rule.filter === filterName);\n        return { filter: filterName, rules: rulesForFilter };\n    })\n        .filter((group) => group.rules.length > 0);\n};\nconst NoRulesZeroState = ({ onClick }) => {\n    return (react.createElement(\"div\", { className: \"xp-rounded xp-border-dashed xp-border-2 xp-p-4 xp-py-6 xp-text-center xp-border-gray-200\" },\n        react.createElement(\"div\", { className: \"xp-text-xl xp-font-bold xp-mb-4\" },\n            react.createElement(components_Str, { id: \"noconditionsyet\" })),\n        react.createElement(\"div\", null,\n            react.createElement(components_Str, { id: \"noconditionsyetintro\" })),\n        react.createElement(\"div\", { className: \"xp-mt-4\" },\n            react.createElement(\"button\", { className: \"btn btn-primary\", onClick: onClick },\n                react.createElement(components_Str, { id: \"add\", component: \"core\" })))));\n};\nconst CompletionRules = ({ rules, type, filters }) => {\n    const filteredRules = (0,react.useMemo)(() => rules?.filter((r) => type.filters.includes(r.filter) && filters.find((f) => f.name === r.filter)), [rules, type.filters]);\n    const groupedRules = (0,react.useMemo)(() => groupRulesByFilter(filteredRules), [filteredRules]);\n    const { addRule, removeRule, editRule } = react.useContext(AppContext);\n    const handleAddClick = () => {\n        addRule();\n    };\n    if (!filteredRules?.length) {\n        return react.createElement(NoRulesZeroState, { onClick: handleAddClick });\n    }\n    return (react.createElement(\"div\", { className: \"xp-space-y-4\" }, groupedRules.map(({ filter, rules }) => {\n        const ruleFilter = filters.find((f) => f.name === filter);\n        if (!ruleFilter)\n            return null;\n        return (react.createElement(RulesSection, { key: filter, title: ruleFilter?.label, description: ruleFilter?.description }, rules.map((rule) => {\n            return (react.createElement(Rule, { key: rule.id, points: rule.points, label: rule.label, onDelete: () => removeRule(rule.id), onEdit: () => editRule(rule.id) }));\n        })));\n    })));\n};\nconst RulesSection = ({ children, title, description, }) => {\n    return (react.createElement(\"div\", null,\n        react.createElement(\"h5\", { className: \"xp-font-bold xp-m-0 xp-mb-1 xp-text-base\" }, title),\n        react.createElement(\"p\", { className: \"xp-mb-2 xp-text-sm xp-text-gray-500 xp-m-0\" }, description),\n        react.createElement(\"div\", { className: \"[&>div]:xp-border-0 [&>div]:xp-border-b [&>div]:xp-border-solid [&>div]:xp-border-gray-200\" }, children)));\n};\nconst Rule = ({ points, label, onDelete, onEdit, }) => {\n    return (react.createElement(\"div\", { className: \"\" },\n        react.createElement(\"div\", { className: \"xp-flex xp-gap-2\" },\n            react.createElement(\"div\", { className: \"xp-shrink-0 xp-flex xp-items-center\" },\n                react.createElement(\"div\", { className: utils_classNames(\"xp-min-w-[86px] xp-text-center xp-rounded xp-px-2 xp-py-0.5 xp-font-bold xp-tracking-wide\", !points ? \"xp-bg-gray-200\" : \"xp-bg-blue-100\") }, points !== null ? `${points != 0 ? \"+\" : \"\"}${points}` : \"-\")),\n            react.createElement(\"div\", { className: \"xp-grow xp-flex xp-items-center\" },\n                react.createElement(\"div\", { className: \"xp-grow\" }, label)),\n            react.createElement(\"div\", { className: \"xp-shrink-0\" },\n                react.createElement(RuleDropdown, { onDelete: onDelete, onEdit: onEdit })))));\n};\nconst RuleDropdown = ({ onEdit, onDelete }) => {\n    const deleteProps = hooks_useAnchorButtonProps(onDelete);\n    const editProps = hooks_useAnchorButtonProps(onEdit);\n    return (react.createElement(Dropdown, { buttonLabel: react.createElement(components_Str, { id: \"options\", component: \"core\" }), items: [\n            { id: \"edit\", label: react.createElement(components_Str, { id: \"edit\", component: \"core\" }), props: editProps },\n            { id: \"delete\", label: react.createElement(components_Str, { id: \"delete\", component: \"core\" }), props: deleteProps, danger: true },\n        ] }));\n};\nfunction startApp(node, props) {\n    react_dom.render(react.createElement(contexts_AddonContext.Provider, { value: makeAddonContextValueFromAppProps(props) },\n        react.createElement(es.QueryClientProvider, { client: query_queryClient },\n            react.createElement(App, { ...props }))), node);\n}\nconst dependencies = makeDependenciesDefinition(commonStaticModulesToDependOn);\n\n\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \t\tif (cachedModule !== undefined) {\n/******/ \t\t\treturn cachedModule.exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = __webpack_modules__;\n/******/ \t\n/************************************************************************/\n/******/ \t/* webpack/runtime/chunk loaded */\n/******/ \t(() => {\n/******/ \t\tvar deferred = [];\n/******/ \t\t__webpack_require__.O = (result, chunkIds, fn, priority) => {\n/******/ \t\t\tif(chunkIds) {\n/******/ \t\t\t\tpriority = priority || 0;\n/******/ \t\t\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n/******/ \t\t\t\tdeferred[i] = [chunkIds, fn, priority];\n/******/ \t\t\t\treturn;\n/******/ \t\t\t}\n/******/ \t\t\tvar notFulfilled = Infinity;\n/******/ \t\t\tfor (var i = 0; i < deferred.length; i++) {\n/******/ \t\t\t\tvar [chunkIds, fn, priority] = deferred[i];\n/******/ \t\t\t\tvar fulfilled = true;\n/******/ \t\t\t\tfor (var j = 0; j < chunkIds.length; j++) {\n/******/ \t\t\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n/******/ \t\t\t\t\t\tchunkIds.splice(j--, 1);\n/******/ \t\t\t\t\t} else {\n/******/ \t\t\t\t\t\tfulfilled = false;\n/******/ \t\t\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n/******/ \t\t\t\t\t}\n/******/ \t\t\t\t}\n/******/ \t\t\t\tif(fulfilled) {\n/******/ \t\t\t\t\tdeferred.splice(i--, 1)\n/******/ \t\t\t\t\tvar r = fn();\n/******/ \t\t\t\t\tif (r !== undefined) result = r;\n/******/ \t\t\t\t}\n/******/ \t\t\t}\n/******/ \t\t\treturn result;\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/compat get default export */\n/******/ \t(() => {\n/******/ \t\t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t\t__webpack_require__.n = (module) => {\n/******/ \t\t\tvar getter = module && module.__esModule ?\n/******/ \t\t\t\t() => (module['default']) :\n/******/ \t\t\t\t() => (module);\n/******/ \t\t\t__webpack_require__.d(getter, { a: getter });\n/******/ \t\t\treturn getter;\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/create fake namespace object */\n/******/ \t(() => {\n/******/ \t\tvar getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\n/******/ \t\tvar leafPrototypes;\n/******/ \t\t// create a fake namespace object\n/******/ \t\t// mode & 1: value is a module id, require it\n/******/ \t\t// mode & 2: merge all properties of value into the ns\n/******/ \t\t// mode & 4: return value when already ns object\n/******/ \t\t// mode & 16: return value when it's Promise-like\n/******/ \t\t// mode & 8|1: behave like require\n/******/ \t\t__webpack_require__.t = function(value, mode) {\n/******/ \t\t\tif(mode & 1) value = this(value);\n/******/ \t\t\tif(mode & 8) return value;\n/******/ \t\t\tif(typeof value === 'object' && value) {\n/******/ \t\t\t\tif((mode & 4) && value.__esModule) return value;\n/******/ \t\t\t\tif((mode & 16) && typeof value.then === 'function') return value;\n/******/ \t\t\t}\n/******/ \t\t\tvar ns = Object.create(null);\n/******/ \t\t\t__webpack_require__.r(ns);\n/******/ \t\t\tvar def = {};\n/******/ \t\t\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n/******/ \t\t\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n/******/ \t\t\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n/******/ \t\t\t}\n/******/ \t\t\tdef['default'] = () => (value);\n/******/ \t\t\t__webpack_require__.d(ns, def);\n/******/ \t\t\treturn ns;\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/define property getters */\n/******/ \t(() => {\n/******/ \t\t// define getter functions for harmony exports\n/******/ \t\t__webpack_require__.d = (exports, definition) => {\n/******/ \t\t\tfor(var key in definition) {\n/******/ \t\t\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n/******/ \t\t\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n/******/ \t\t\t\t}\n/******/ \t\t\t}\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/hasOwnProperty shorthand */\n/******/ \t(() => {\n/******/ \t\t__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/make namespace object */\n/******/ \t(() => {\n/******/ \t\t// define __esModule on exports\n/******/ \t\t__webpack_require__.r = (exports) => {\n/******/ \t\t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t\t}\n/******/ \t\t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/runtimeId */\n/******/ \t(() => {\n/******/ \t\t__webpack_require__.j = 834;\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/jsonp chunk loading */\n/******/ \t(() => {\n/******/ \t\t// no baseURI\n/******/ \t\t\n/******/ \t\t// object to store loaded and loading chunks\n/******/ \t\t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n/******/ \t\t// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\n/******/ \t\tvar installedChunks = {\n/******/ \t\t\t834: 0\n/******/ \t\t};\n/******/ \t\t\n/******/ \t\t// no chunk on demand loading\n/******/ \t\t\n/******/ \t\t// no prefetching\n/******/ \t\t\n/******/ \t\t// no preloaded\n/******/ \t\t\n/******/ \t\t// no HMR\n/******/ \t\t\n/******/ \t\t// no HMR manifest\n/******/ \t\t\n/******/ \t\t__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n/******/ \t\t\n/******/ \t\t// install a JSONP callback for chunk loading\n/******/ \t\tvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n/******/ \t\t\tvar [chunkIds, moreModules, runtime] = data;\n/******/ \t\t\t// add \"moreModules\" to the modules object,\n/******/ \t\t\t// then flag all \"chunkIds\" as loaded and fire callback\n/******/ \t\t\tvar moduleId, chunkId, i = 0;\n/******/ \t\t\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n/******/ \t\t\t\tfor(moduleId in moreModules) {\n/******/ \t\t\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n/******/ \t\t\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n/******/ \t\t\t\t\t}\n/******/ \t\t\t\t}\n/******/ \t\t\t\tif(runtime) var result = runtime(__webpack_require__);\n/******/ \t\t\t}\n/******/ \t\t\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n/******/ \t\t\tfor(;i < chunkIds.length; i++) {\n/******/ \t\t\t\tchunkId = chunkIds[i];\n/******/ \t\t\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n/******/ \t\t\t\t\tinstalledChunks[chunkId][0]();\n/******/ \t\t\t\t}\n/******/ \t\t\t\tinstalledChunks[chunkId] = 0;\n/******/ \t\t\t}\n/******/ \t\t\treturn __webpack_require__.O(result);\n/******/ \t\t}\n/******/ \t\t\n/******/ \t\tvar chunkLoadingGlobal = globalThis[\"webpackChunkblock_xp\"] = globalThis[\"webpackChunkblock_xp\"] || [];\n/******/ \t\tchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\n/******/ \t\tchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));\n/******/ \t})();\n/******/ \t\n/************************************************************************/\n/******/ \t\n/******/ \t// startup\n/******/ \t// Load entry module and return exports\n/******/ \t// This entry module depends on other loaded chunks and execution need to be delayed\n/******/ \tvar __webpack_exports__ = __webpack_require__.O(undefined, [224], () => (__webpack_require__(913)))\n/******/ \t__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n/******/ \t\n/******/ \treturn __webpack_exports__;\n/******/ })()\n;\n});;"],"names":["define","deferred","leafPrototypes","getProto","__webpack_modules__","__unused_webpack_module","__webpack_exports__","__webpack_require__","r","d","App","dependencies","startApp","tabs","react","react_dom","es","menu","utils_classNames","args","filter","Boolean","join","uniqueId","Dropdown","_ref","buttonLabel","items","createElement","W","as","className","Button","Items","map","item","key","id","Item","_ref2","active","props","danger","label","AppLoading","M","window","modules","ajaxRequest","method","getModuleAsync","call","methodname","getString","component","a","util","get_string","hasString","str","getModule","name","amd","Promise","resolve","reject","require","mod","loadStringCache","maxItems","keys","purge","length","idx","Math","max","slice","forEach","set","value","push","get","fifoCache","loadString","cacheKey","promise","loadStrings","ids","get_strings","makeAddonContextValueFromAppProps","activated","enablepromo","promourl","addon","contexts_AddonContext","createContext","hooks_useAnchorButtonProps","onClick","href","role","useRoleButtonListeners","useDuplicatedActionPreventor","msDelay","ref","useRef","useCallback","current","Date","now","useModules","modulesPromise","modulesRef","ready","setReady","useState","useEffect","all","module","cancelled","then","loadedModles","reduce","acc","i","e","preventDefault","onKeyDown","useUniqueId","hooks_useString","wasKnownAtMount","useMemo","isLoaded","setLoaded","err","hooks_useStrings","idsForKey","allKnownAtMount","every","SaveCancelModal","_ref3","children","onClose","onSave","show","title","saveButtonText","defaultHeight","large","canSave","modalPromise","modalRef","isSavePermitted","getSaveButton","node","getFooter","querySelector","setSaveButtonText","text","saveBtn","textContent","ModalFactory","create","type","types","SAVE_CANCEL","body","modal","ModalEvents","root","getRoot","handleSave","handleClose","updateReactNodeHeight","getBody","reactNode","height","clientHeight","parseFloat","getComputedStyle","paddingTop","paddingBottom","style","attachResize","addEventListener","on","save","hidden","shown","off","removeEventListener","hide","setTitle","attr","removeAttribute","setAttribute","setButtonAttribute","createPortal","DeleteModal","_ref4","onDelete","isDeletePermitted","deleteStr","getDeleteButton","deleteButton","classList","add","btn","ModalForm","_ref5","formClass","formArgs","onSubmit","modalFormRef","modalConfig","modalForm","handleLoaded","handleSubmit","events","LOADED","FORM_SUBMITTED","CANCEL_BUTTON_PRESSED","_modalForm$modal","rootEl","NotificationError","_ref6","components_Str","_ref9","Fragment","CircleButton","_ref10","_ref11","disabled","primary","classes","Select","_ref15","components_Input","_ref14","NumInput","_ref17","onChange","selectOnFocus","inputProps","valueAsString","toString","externalValue","setExternalValue","internalValue","setInternalValue","target","replace","onBlur","v","parseInt","hooks_useNumericInputProps","onFocus","currentTarget","select","NumberInputWithButtons","_ref19","min","suffix","step","hasMin","hasMax","minDisabled","maxDisabled","minusProps","handleChange","plusProps","n","final","inputClassName","remainingInputProps","allInputProps","xmlns","viewBox","fill","fillRule","clipRule","ListEntry","_ref20","resource","onSelect","ListEntryHeader","ListEntryItem","description","isavailable","_ref21","headingId","buttonListeners","disabledOpacityClass","tabIndex","dangerouslySetInnerHTML","__html","_ref22","PlainResourceList","_ref23","resources","emptyContent","o","EmptyResult","LoadingResourceList","_ref24","message","content","ChevronLeftIconSolid","_ref29","strokeWidth","stroke","strokeLinecap","strokeLinejoin","slideClasses","slideNextClasses","slidePrevClasses","Slider","_ref30","rawChildren","index","internalIndex","setInternalIndex","slidesRef","Children","toArray","nSlides","Aria","unhide","focus","child","isActive","isPast","el","Slide","_ref31","header","footer","SlideHeader","_ref32","hasBack","onBack","SlideHeaderWithFilter","_ref33","onFilterChange","filterValue","filterPlaceholder","filterStr","placeholder","CmResourceList","_ref34","courseId","filterTerm","resetFilterTerm","options","query","useQuery","async","Ajax","courseid","normalisedFilterTerm","trim","toLowerCase","data","carry","section","includes","cmid","isSuccess","isLoading","CmResourceListSlide","_ref35","cmListOptions","setFilterTerm","SectionResourceList","_ref36","number","CmNameSlide","_ref37","config","setConfig","getStr","htmlFor","filterint1","defaultValue","filterchar1","maxLength","PointsToAwardInput","anyFilterMethodStuff","getSlide","hasSlide","isConfigValid","isSlideRequiringSubmit","filterMethoStuff","cm","completionenabled","scopeoptions","_props$method$scopeop","_props$method$scopeop2","filtercmid","onContinue","cmname","points","isNaN","collectsPoints","num","any","anycm","anycourse","anysection","thiscourse","defaultConfig","RuleWizardModal","getCoreStr","selectedMethod","setSelectedMethod","setIndex","handleIndexChange","rawIndex","newIndex","handleBack","resetState","methodStuff","isLastStep","isStepContinue","isStepValid","isStepRequiringButton","canClickSaveButton","methodSlide","sortedFilters","filters","sort","b","wa","weight","wb","_ref38","query_queryClient","E","defaultOptions","queries","staleTime","onError","exception","mutations","ContextLevel","AppContext","rules","addRule","editRule","removeRule","availableRuleTypes","guessMethodFromLocation","indexOf","location","hash","queryClient","useQueryClient","selectedTabIndex","setSelectedTabIndex","optimisticallyDeleted","setOptimisticallyDeleted","childcontextid","childcontext","_props$childcontext","currentCourseId","contextlevel","Course","instanceid","world","isAdding","setIsAdding","isEditing","setIsEditing","isDeleting","setIsDeleting","rulesQuery","contextid","typename","filtername","useRules","addRuleMutation","onSuccess","useMutation","char1","typechar1","filtercourseid","int1","useAddRuleMutation","invalidateCurrentQuery","Toast","deleteRuleMutation","currentRuleType","invalidateQueries","ruleTypesByName","ruletypes","ruletype","groupedRules","rule","currentMethodFilters","_ruleTypesByName$curr","rulefilters","ismultipleallowed","_groupedRules$current","some","showAddBtnInTabs","_groupedRules$current2","isError","Provider","ruleId","Group","selectedIndex","updateLocationFromMethodIndex","List","_ref42","selected","_ref43","_ref44","Panels","Panel","CompletionRules","cm_completion","section_completion","course_completion","_ref45","mutate","onSettled","NoRulesZeroState","_ref46","_ref47","filteredRules","find","f","self","filterName","rulesForFilter","group","groupRulesByFilter","useContext","handleAddClick","_ref48","ruleFilter","RulesSection","Rule","onEdit","_ref49","_ref50","RuleDropdown","_ref51","deleteProps","editProps","render","QueryClientProvider","client","names","optional","list","isOptional","charAt","substring","loader","mods","setModule","makeDependenciesDefinition","__webpack_module_cache__","moduleId","cachedModule","undefined","exports","m","O","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","Object","splice","getter","__esModule","getPrototypeOf","obj","__proto__","t","mode","this","ns","def","getOwnPropertyNames","definition","defineProperty","enumerable","prop","prototype","hasOwnProperty","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","globalThis","bind"],"mappings":"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"}