{"version":3,"sources":["jquery.touch-punch.js"],"names":["define","$","support","touch","document","touchHandled","mouseProto","ui","mouse","prototype","_mouseInit","_mouseDestroy","_touchStart","event","this","_mouseCapture","originalEvent","changedTouches","_touchMoved","simulateMouseEvent","_touchMove","_touchEnd","element","bind","touchstart","proxy","touchmove","touchend","call","unbind","simulatedType","touches","length","preventDefault","simulatedEvent","createEvent","initMouseEvent","window","screenX","screenY","clientX","clientY","target","dispatchEvent"],"mappings":"AAyBAA,OAAO,CAAC,UAAW,SAASC,GAOxB,GAHAA,EAAEC,QAAQC,MAAQ,eAAgBC,SAG7BH,EAAEC,QAAQC,MAAf,CAIA,IAGEE,EAHEC,EAAaL,EAAEM,GAAGC,MAAMC,UAC1BC,EAAaJ,EAAWI,WACxBC,EAAgBL,EAAWK,cA+C7BL,EAAWM,YAAc,SAASC,IAK1BR,GAHOS,KAGeC,cAAcF,EAAMG,cAAcC,eAAe,MAK3EZ,GAAe,EARJS,KAWNI,aAAc,EAGnBC,EAAmBN,EAAO,aAG1BM,EAAmBN,EAAO,aAG1BM,EAAmBN,EAAO,eAO9BP,EAAWc,WAAa,SAASP,GAGxBR,IAKLS,KAAKI,aAAc,EAGnBC,EAAmBN,EAAO,eAO9BP,EAAWe,UAAY,SAASR,GAGvBR,IAKLc,EAAmBN,EAAO,WAG1BM,EAAmBN,EAAO,YAGrBC,KAAKI,aAGNC,EAAmBN,EAAO,SAI9BR,GAAe,IASnBC,EAAWI,WAAa,WAETI,KAGNQ,QAAQC,KAAK,CACdC,WAAYvB,EAAEwB,MAJPX,KAImB,eAC1BY,UAAWzB,EAAEwB,MALNX,KAKkB,cACzBa,SAAU1B,EAAEwB,MANLX,KAMiB,eAI5BJ,EAAWkB,KAVAd,OAgBfR,EAAWK,cAAgB,WAEZG,KAGNQ,QAAQO,OAAO,CAChBL,WAAYvB,EAAEwB,MAJPX,KAImB,eAC1BY,UAAWzB,EAAEwB,MALNX,KAKkB,cACzBa,SAAU1B,EAAEwB,MANLX,KAMiB,eAI5BH,EAAciB,KAVHd,OAxIf,SAASK,EAAmBN,EAAOiB,GAG/B,KAAIjB,EAAMG,cAAce,QAAQC,OAAS,GAAzC,CAIAnB,EAAMoB,iBAEN,IAAI9B,EAAQU,EAAMG,cAAcC,eAAe,GAC/CiB,EAAiB9B,SAAS+B,YAAY,eAGtCD,EAAeE,eACfN,GACA,GACA,EACAO,OACA,EACAlC,EAAMmC,QACNnC,EAAMoC,QACNpC,EAAMqC,QACNrC,EAAMsC,SACN,GACA,GACA,GACA,EACA,EACA,MAIA5B,EAAM6B,OAAOC,cAAcT","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/* !\n * jQuery UI Touch Punch 0.2.3\n *\n * Copyright 2011â€“2014, Dave Furfero\n * Dual licensed under the MIT or GPL Version 2 licenses.\n *\n * Depends:\n *  jquery.ui.widget.js\n *  jquery.ui.mouse.js\n */\ndefine(['jquery'], function($) {\n    // (function ($) {\n\n    // Detect touch support\n    $.support.touch = 'ontouchend' in document;\n\n    // Ignore browsers without touch support\n    if (!$.support.touch) {\n        return;\n    }\n\n    var mouseProto = $.ui.mouse.prototype,\n      _mouseInit = mouseProto._mouseInit,\n      _mouseDestroy = mouseProto._mouseDestroy,\n      touchHandled;\n\n    /**\n     * Simulate a mouse event based on a corresponding touch event\n     * @param {Object} event A touch event\n     * @param {String} simulatedType The corresponding mouse event\n     */\n    function simulateMouseEvent(event, simulatedType) {\n\n        // Ignore multi-touch events\n        if (event.originalEvent.touches.length > 1) {\n            return;\n        }\n\n        event.preventDefault();\n\n        var touch = event.originalEvent.changedTouches[0],\n        simulatedEvent = document.createEvent('MouseEvents');\n\n        // Initialize the simulated mouse event using the touch event's coordinates\n        simulatedEvent.initMouseEvent(\n        simulatedType, // Type\n        true, // Bubbles\n        true, // Cancelable\n        window, // View\n        1, // Detail\n        touch.screenX, // ScreenX\n        touch.screenY, // ScreenY\n        touch.clientX, // ClientX\n        touch.clientY, // ClientY\n        false, // CtrlKey\n        false, // AltKey\n        false, // ShiftKey\n        false, // MetaKey\n        0, // Button\n        null // RelatedTarget\n        );\n\n        // Dispatch the simulated event to the target element\n        event.target.dispatchEvent(simulatedEvent);\n    }\n\n    /**\n   * Handle the jQuery UI widget's touchstart events\n   * @param {Object} event The widget element's touchstart event\n   */\n    mouseProto._touchStart = function(event) {\n\n        var self = this;\n\n        // Ignore the event if another widget is already being handled\n        if (touchHandled || !self._mouseCapture(event.originalEvent.changedTouches[0])) {\n            return;\n        }\n\n        // Set the flag to prevent other widgets from inheriting the touch event\n        touchHandled = true;\n\n        // Track movement to determine if interaction was a click\n        self._touchMoved = false;\n\n        // Simulate the mouseover event\n        simulateMouseEvent(event, 'mouseover');\n\n        // Simulate the mousemove event\n        simulateMouseEvent(event, 'mousemove');\n\n        // Simulate the mousedown event\n        simulateMouseEvent(event, 'mousedown');\n    };\n\n    /**\n   * Handle the jQuery UI widget's touchmove events\n   * @param {Object} event The document's touchmove event\n   */\n    mouseProto._touchMove = function(event) {\n\n        // Ignore event if not handled\n        if (!touchHandled) {\n            return;\n        }\n\n        // Interaction was not a click\n        this._touchMoved = true;\n\n        // Simulate the mousemove event\n        simulateMouseEvent(event, 'mousemove');\n    };\n\n    /**\n   * Handle the jQuery UI widget's touchend events\n   * @param {Object} event The document's touchend event\n   */\n    mouseProto._touchEnd = function(event) {\n\n        // Ignore event if not handled\n        if (!touchHandled) {\n            return;\n        }\n\n        // Simulate the mouseup event\n        simulateMouseEvent(event, 'mouseup');\n\n        // Simulate the mouseout event\n        simulateMouseEvent(event, 'mouseout');\n\n        // If the touch interaction did not move, it should trigger a click\n        if (!this._touchMoved) {\n\n            // Simulate the click event\n            simulateMouseEvent(event, 'click');\n        }\n\n        // Unset the flag to allow other widgets to inherit the touch event\n        touchHandled = false;\n    };\n\n    /**\n   * A duck punch of the $.ui.mouse _mouseInit method to support touch events.\n   * This method extends the widget with bound touch event handlers that\n   * translate touch events to mouse events and pass them to the widget's\n   * original mouse event handling methods.\n   */\n    mouseProto._mouseInit = function() {\n\n        var self = this;\n\n        // Delegate the touch handlers to the widget's element\n        self.element.bind({\n            touchstart: $.proxy(self, '_touchStart'),\n            touchmove: $.proxy(self, '_touchMove'),\n            touchend: $.proxy(self, '_touchEnd')\n        });\n\n        // Call the original $.ui.mouse init method\n        _mouseInit.call(self);\n    };\n\n    /**\n   * Remove the touch event handlers\n   */\n    mouseProto._mouseDestroy = function() {\n\n        var self = this;\n\n        // Delegate the touch handlers to the widget's element\n        self.element.unbind({\n            touchstart: $.proxy(self, '_touchStart'),\n            touchmove: $.proxy(self, '_touchMove'),\n            touchend: $.proxy(self, '_touchEnd')\n        });\n\n        // Call the original $.ui.mouse destroy method\n        _mouseDestroy.call(self);\n    };\n\n});\n"],"file":"jquery.touch-punch.min.js"}