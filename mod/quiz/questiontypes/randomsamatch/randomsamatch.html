<form name="theform" method="post" action="question.php">

<center>

<table cellpadding="5">

<tr valign="top">

    <td align="right"><p><b><?php  print_string("category", "quiz") ?>:</b></p></td>

    <td>

    <?php echo $categories[$question->category]; ?>

    <input type="hidden" name="category" value="<?php echo "$question->category"; ?>" />

    </td>

</tr>

<tr valign="top">

    <td align="right"><p><b><?php  print_string("questionname", "quiz") ?>:</b></p></td>

    <td>

        <?php

           if (empty($question->name)) {

               $question->name =  get_string("randomsamatch", "quiz");

           }

        ?>

        <input type="text" name="name" size="40" value="<?php  p($question->name) ?>" />

        <?php  if (isset($err["name"])) formerr($err["name"]); ?>

    </td>

</tr>

<tr valign="top">

    <td align="right"><p><b><?php  print_string("introduction", "quiz") ?>:</b></p>

    <br />

    <p><font size="1">

    <?php

           if ($usehtmleditor) {

               helpbutton("richtext", get_string("helprichtext"), "moodle", true, true);

           } else {

               helpbutton("text", get_string("helptext"), "moodle", true, true);

           }

    ?>

    </font></p>

    </td>

    <td>

        <?php  if (isset($err["questiontext"])) {

               formerr($err["questiontext"]); 

               echo "<br />";

           }



           if (empty($question->questiontext)) {

               $question->questiontext =  get_string("randomsamatchintro", "quiz");

           }

           print_textarea($usehtmleditor, 15, 60, 630, 300, "questiontext", $question->questiontext);



           if ($usehtmleditor) {

               echo '<input type="hidden" name="questiontextformat" value="'.FORMAT_HTML.'" />';

           } else {

               echo "<div align="right">";

               print_string("formattexttype");

               echo ":&nbsp;";

               if (!$question->questiontextformat) {

                   $question->questiontextformat = FORMAT_MOODLE;

               }

               choose_from_menu(format_text_menu(), "questiontextformat", $question->questiontextformat, "");

               helpbutton("textformat", get_string("helpformatting"));

               echo "</div>";

           }

        ?>

    </td>

</tr>

<tr valign="top">

    <td align="right"><p><b><?php  print_string("randomsamatchnumber", "quiz") ?>:</b></p></td>

    <td>

    <?php 

        if ($numberavailable < 2) {

            echo "ERROR";

            $maxrandom=2;

        } else if ($numberavailable < 6) {

            $maxrandom = $numberavailable;

        } else {

            $maxrandom = QUIZ_MAX_NUMBER_ANSWERS;

        }



        for ($i=2;$i<=$maxrandom;$i++) {

            $menu[$i] = $i;

        }

        choose_from_menu($menu, "choose", "$options->choose", "");

        unset($menu);

     ?>

    </td>

</tr>

</table>



<input type="hidden" name="id" value="<?php  p($question->id) ?>" />

<input type="hidden" name="qtype" value="<?php  p($question->qtype) ?>" />

<input type="submit" value="<?php  print_string("savechanges") ?>" />



</center>

</form>

